define("vpro/util/date",[],function(){function m(a){function b(a){return a>9?a:"0"+a}a=a||new Date;return[a.getUTCFullYear(),"-",b(a.getMonth()+1),"-",b(a.getDate()),"T",b(a.getHours()),":",b(a.getMinutes()),"+01"].join("")}function l(a){var b=/([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/,c=b.exec(a),d=0,e=new Date(c[1],0,1);c[3]&&e.setMonth(c[3]-1),c[5]&&e.setDate(c[5]),c[7]&&e.setHours(c[7]),c[8]&&e.setMinutes(c[8]),c[10]&&e.setSeconds(c[10]),c[12]&&e.setMilliseconds(parseInt("0."+c[12],10)*1e3),c[14]&&(d=parseInt(c[16],10)*60+parseInt(c[17],10),d*=c[15]==="-"?1:-1);return e}function k(a,b){var c=this,d,e,f=/\\?([a-z])/gi,h,i=function(a,b){return(a=a+"").length<b?Array(++b-a.length).join("0")+a:a},j=["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],k={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};h=function(a,b){return e[a]?e[a]():b},e={d:function(){return i(e.j(),2)},D:function(){return e.l().slice(0,3)},j:function(){return d.getDate()},l:function(){return j[e.w()]+"day"},N:function(){return e.w()||7},S:function(){return k[e.j()]||"th"},w:function(){return d.getDay()},z:function(){var a=new Date(e.Y(),e.n()-1,e.j()),b=new Date(e.Y(),0,1);return Math.round((a-b)/864e5)+1},W:function(){var a=new Date(e.Y(),e.n()-1,e.j()-e.N()+3),b=new Date(a.getFullYear(),0,4);return 1+Math.round((a-b)/864e5/7)},F:function(){return j[6+e.n()]},m:function(){return i(e.n(),2)},M:function(){return e.F().slice(0,3)},n:function(){return d.getMonth()+1},t:function(){return(new Date(e.Y(),e.n(),0)).getDate()},L:function(){var a=e.Y(),b=a&3,c=a%400,d=a%100;return 0+(!b&&(d||!c))},o:function(){var a=e.n(),b=e.W(),c=e.Y();return c+(a===12&&b<9?-1:a===1&&b>9)},Y:function(){return d.getFullYear()},y:function(){return(e.Y()+"").slice(-2)},a:function(){return d.getHours()>11?"pm":"am"},A:function(){return e.a().toUpperCase()},B:function(){var a=d.getUTCHours()*3600,b=d.getUTCMinutes()*60,c=d.getUTCSeconds();return i(Math.floor((a+b+c+3600)/86.4)%1e3,3)},g:function(){return e.G()%12||12},G:function(){return d.getHours()},h:function(){return i(e.g(),2)},H:function(){return i(e.G(),2)},i:function(){return i(d.getMinutes(),2)},s:function(){return i(d.getSeconds(),2)},u:function(){return i(d.getMilliseconds()*1e3,6)},e:function(){return"UTC"},I:function(){var a=new Date(e.Y(),0),b=Date.UTC(e.Y(),0),c=new Date(e.Y(),6),d=Date.UTC(e.Y(),6);return 0+(a-b!==c-d)},O:function(){var a=d.getTimezoneOffset();return(a>0?"-":"+")+i(Math.abs(a/60*100),4)},P:function(){var a=e.O();return a.substr(0,3)+":"+a.substr(3,2)},T:function(){return"UTC"},Z:function(){return-d.getTimezoneOffset()*60},c:function(){return"Y-m-d\\Th:i:sP".replace(f,h)},r:function(){return"D, d M Y H:i:s O".replace(f,h)},U:function(){return d.getTime()/1e3|0}},this.date=function(a,b){c=this,d=typeof b=="undefined"?new Date:b instanceof Date?new Date(b):new Date(b*1e3),g(d)||(d=new Date);return a.replace(f,h)};return this.date(a,b)}function j(a,b){var c=b===undefined?!0:b;a=Number(a);var d=Math.floor(a/3600),e=Math.floor(a%3600/60),f=Math.floor(a%3600%60);if(c){var d=d>0?d+":":"",e=e>0?(d>0&&e<10?"0":"")+e+":":"00:";e=d==""&&e=="00:"?"0:":e;var f=(f<10?"0":"")+f;return d+e+f}return d+":"+e+":"+f}function i(a,b){var c=h(a,b),d=Math.floor(a%1e3),e=d;d<100?e="0"+d:d<10?e="00"+d:d<1&&(e="000");return c+"."+e}function h(a,b){var c=Math.floor(a/1e3),d=Math.floor(c/3600),e=Math.floor(c%3600/60),f=Math.floor(c%3600%60);b||(b=":");var g=b+(f<10?"0"+f:f);e>0?(g=e+g,d>0&&(g=d+b+(e<10?"0"+g:g))):g="0"+g;return g}function g(a){var b=new Date(a);return!isNaN(b.getFullYear())}function f(a){var b=a.split(":");return Number(b[2])+Number(b[1]*60)+Number(b[0]*3600)}function e(a,d){return c(a,d,b)}function d(b,d){return c(b,d,a)}function c(a,b,c){b=b||!1;var d=c[a];b&&(d=d.slice(0,b));return d}var a=["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],b=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];return{days:a,months:b,dateString:c,dayString:d,monthString:e,millisecondsToHms:h,millisecondsToHmsl:i,hmsToSeconds:f,secondsToHms:j,format:k,parseIso8601:l,createIso8601:m}}),define("vpro/util/url",[],function(){function g(a){return a.slice(0,4)==="urn:"}function f(a){return a.slice(0,7)!=="http://"?"http://"+a:a}function e(a){var b={};if(!a)if(location.search)a=location.search.substr(1);else return[];a=a.replace("?","").replace("&amp;","&"),a=a.split("&");for(var c=0,d=a.length;c<d;c++){var e=a[c].split("="),f=decodeURIComponent(e[0]),g=e.length===2?decodeURIComponent(e[1]):"";b[f]=g}return b}function d(a,b){var c={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},d=c.parser[c.strictMode?"strict":"loose"].exec(a),e={},f=14;while(f--)e[c.key[f]]=d[f]||"";switch(b){case"PHP_URL_SCHEME":return e.protocol;case"PHP_URL_HOST":return e.host;case"PHP_URL_PORT":return e.port;case"PHP_URL_USER":return e.user;case"PHP_URL_PASS":return e.password;case"PHP_URL_PATH":return e.path;case"PHP_URL_QUERY":return e.query;case"PHP_URL_FRAGMENT":return e.anchor;default:var g={};e.protocol!==""&&(g.scheme=e.protocol),e.host!==""&&(g.host=e.host),e.port!==""&&(g.port=e.port),e.user!==""&&(g.user=e.user),e.password!==""&&(g.pass=e.password),e.path!==""&&(g.path=e.path),e.query!==""&&(g.query=e.query),e.anchor!==""&&(g.fragment=e.anchor);return g}}function c(a){return e(d(a).query)}function b(a){var b=a.split(".");return b.length>1?b.pop():!1}function a(a){var b=[];for(var c in a){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")}return{buildQuery:a,getExtension:b,getQueryFromUrl:c,parse:d,parseQuery:e,prefixHttp:f,uriIsUrn:g}}),define("vpro/util/image",["domain-config","vpro/util/url"],function(a,b){function p(a,b,c){return n(a,[{profile:g.SIZE,options:{width:b}},{profile:g.CROP,options:{width:b,height:c}}])}function o(a,b,c){return n(a,{profile:g.SIZE,options:{width:b,height:c}})}function n(a,b,c){return m(a,b,c)}function m(a,c,e){e=e||f;if(b.uriIsUrn(a)){var g=h(a);if(g){var k="";c&&(k=l(c));return j(g,k,e)}}else if(d.test(a)){var g=i(a);if(g){var k="";c&&(k=l(c));return j(g,k,e)}}return a}function l(a){var b="";if(a.length)for(var c=0,d=a.length;c<d;c++){var e=a[c];b+=k(e.profile,e.options)}else b+=k(a.profile,a.options);return b}function k(a,b){var c="";switch(a){case g.SIZE:if(b.width||b.height)c=g.SIZE+""+(b.width?b.width:""),b.height&&(c+="x"+b.height),c+="/";break;case g.COLORIZE:if(b.color){/^#/.test(b.color)&&(b.color=b.color.substring(1));if(/[\d]{3}/.test(b.color)){var d=b.color.split("");b.color=d[0]+""+d[0]+""+d[1]+""+d[1]+""+d[2]+""+d[2]}c=g.COLORIZE+""+b.color.toUpperCase()+"/"}break;case g.CROP:b.width&&b.height&&(c=g.CROP+""+b.width+"x"+b.height+"/")}return c}function j(a,b,d){d=d||f,b=b||"";return c+b+a+"."+d}function i(a){var b=a.match(d);return b&&b.length>1?parseFloat(b[b.length-1]):null}function h(a){var b=a.match(e);return b&&b.length>1?parseFloat(b[1]):null}var c=a.imageServer,d=new RegExp("^"+c.replace(/\./ig,"\\.")+"((s|ch|c)[^/]+/){0,4}([\\d]+)\\.[\\w]+$","i"),e=/urn:vpro[\.:]image:([\d]+)$/i,f="jpg",g={SIZE:"s",COLORIZE:"ch",CROP:"c"};return{PROFILES:g,idFromUri:h,transform:n,urlFromUri:m,getResized:o,getCropped:p}}),define("vpro/util/object",[],function(){function d(b){var c=a(b),d=Math.floor(Math.random()*c),e=0;for(var f in b){if(e==d)return b[f];e++}return!1}function c(a){var b={};for(var c in a)b[c]||(b[c]=a[c]);return b}function b(a,c){if(a===c)return!0;for(var d in a){if(!a.hasOwnProperty(d))continue;if(!c.hasOwnProperty(d))return!1;if(a[d]===c[d])continue;return typeof a[d]=="object"&&!b(a[d],c[d])?!1:!1}return!0}function a(a){var b=0;for(var c in a)b++;return b}return{count:a,deepEqual:b,removeDuplicates:c,random:d}}),define("vpro/util/string",[],function(){function m(a,b){return parseInt(a,b?b:10)!=="NaN"}function l(a){var b=a.split(":"),c=b[b.length-1];return m(c)?c:undefined}function k(a,b){var c="";for(var d=0;d<b;d++)c+=a;return c}function j(a){return a.split("").reverse().join("")}function i(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function h(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function g(a){typeof a=="string"&&(a=a.replace(/<[^>]+>/ig,""));return a}function f(a,b,c){c=!c&&c!==""?" (&#8230;)":c;if(a.length<b)return a;a=a.slice(0,b);return a+c}function e(a){return a>9?a:"0"+a}function d(a,b){var c=b?a:"",d=b?b:a,e="";for(var f in d){var g=d[f];e+=g,f<d.length-1&&(e+=c)}return e}function c(b){return a('"%s"',b)}function b(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;m=[].concat(m),d&&(this.window[d]=0);for(e=0,i=m.length;e<i;e++){if(m[e]==="")continue;for(f=0,j=k.length;f<j;f++)g=m[e]+"",h=n?l[f]!==undefined?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length)}return o?m:m[0]}function a(){var a=0,b,c=arguments[a++],d=[],e,f,g,h;while(c){if(e=/^[^\x25]+/.exec(c))d.push(e[0]);else if(e=/^\x25{2}/.exec(c))d.push("%");else{if(!(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(c)))throw"string.printf(): Unknown exception";if((b=arguments[e[1]||a++])==null)throw"string.printf(): Too few arguments, or one of you arguments is undefined: "+a;if(/[^s]/.test(e[7])&&typeof b!="number")throw"string.printf(): Expecting number but found "+typeof b;switch(e[7]){case"b":b=b.toString(2);break;case"c":b=String.fromCharCode(b);break;case"d":b=parseInt(b);break;case"e":b=e[6]?b.toExponential(e[6]):b.toExponential();break;case"f":b=e[6]?parseFloat(b).toFixed(e[6]):parseFloat(b);break;case"o":b=b.toString(8);break;case"s":b=(b=String(b))&&e[6]?b.substring(0,e[6]):b;break;case"u":b=Math.abs(b);break;case"x":b=b.toString(16);break;case"X":b=b.toString(16).toUpperCase()}b=/[def]/.test(e[7])&&e[2]&&b>0?"+"+b:b,g=e[3]?e[3]=="0"?"0":e[3].charAt(1):" ",h=e[5]-String(b).length,f=e[5]?str_repeat(g,h):"",d.push(e[4]?b+f:f+b)}c=c.substring(e[0].length)}return d.join("")}return{escapeHtml:h,stripHtml:g,ellipsis:f,enquote:c,implode:d,printf:a,replace:b,trim:i,zero:e,reverse:j,repeat:k,urnId:l,tryParseInt:m}}),define("vpro/woord/js/util",["ext/stapes/0.6.1-pre/stapes","vpro/util/date","vpro/util/image","vpro/util/object","vpro/util/string","vpro/util/url"],function(a,b,c,d,e,f){function h(a){var b=a.split(":");return{type:b[3],id:b[4]}}function g(a,b){return a.replace(/\{\{([^{}]+)\}\}/g,function(a,c){return b[c]})}(function(){var b=a._.Module.set;a.extend({set:function(a,c){typeof a=="string"&&this.get(a)===c&&(this.emit("nochange",a),this.emit("nochange:"+a,c));return b.apply(this,arguments)}})})();return{date:b,image:c,object:d,string:e,Stapes:a,tmpl:g,uri:{parseUrn:h},url:f}}),define("vpro/woord/js/hacks",["ext/fastclick/0.4.2/fastclick"],function(a){var b=[function(){function a(a){return["INPUT","TEXTAREA"].indexOf(a.nodeName)!==-1||a.classList.contains("clear-query-faded-icon")}purno.addEventListener(document,"touchstart",function(b){!a(b.target)&&a(document.activeElement)&&setTimeout(function(){document.activeElement.blur()},10)})},function(){"ontouchstart"in window&&purno.addEventListener(window,"load",function(){new a(document.body)})},function(){if("ontouchstart"in window){if(screen.width>980||screen.height>980)return;if(window.navigator.standalone===!0)return;if(window.innerWidth!==document.documentElement.clientWidth&&window.innerWidth-1!==document.documentElement.clientWidth)return;var a=!1,b=function(){if(a)return!1;var b=document.activeElement;return!b||["SELECT","INPUT","TEXTAREA"].indexOf(b.tagName)==-1},c=function(){if(!!b()){var c=document.getElementsByTagName("body")[0];c.style.height=document.documentElement.clientWidth/screen.width*screen.height+"px",a=!0,setTimeout(function(){window.pageYOffset===0&&(window.scrollTo(0,1),c.style.height=window.innerHeight+"px",window.scrollTo(0,0),setTimeout(function(){a=!1},50))},1e3)}},d=function(){var a;return function(){!b()||(a&&clearTimeout(a),a=setTimeout(c,200))}}();c(),purno.addEventListener(window,"resize",d),purno.addEventListener(window,"orientationchange",d)}}];return{run:function(){b.forEach(function(a){a()})}}}),function(a){typeof define=="function"&&define.amd?define("vpro/purno/shims",[],a):a()}(function(){var a=Element.prototype,b=/\s/;Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),Array.prototype.every||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++){var e=a.call(b||this,this[c],c,this);if(!e)return!1}return!0}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++){var f=this[d];a.call(b||this,f,d,this)&&c.push(f)}return c}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b||this,this[c],c,this)}),Array.prototype.map||(Array.prototype.map=function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++)c[d]=a.call(b||this,this[d],d,this);return c}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(this===null)return-1;for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1}),Array.prototype.some||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;c<d;c++){var e=a.call(b||this,this[c],c,this);if(e)return!0}return!1}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){if("function"!=typeof a)throw new TypeError(a+" is not a function");var c=0,d=this.length>>>0,e,f=!1;1<arguments.length&&(e=b,f=!0);for(;d>c;++c){if(!this.hasOwnProperty(c))continue;f?e=a(e,this[c],c,this):(e=this[c],f=!0)}if(!f)throw new TypeError("Reduce of empty array with no initial value");return e}),String.prototype.trim||(String.prototype.trim=function(){var a=this.replace(/^\s\s*/,""),c=a.length;while(b.test(a.charAt(--c)));return a.slice(0,c+1)}),"classList"in document.createElement("div")||Object.defineProperty(a,"classList",{get:function(){function b(b){return function(c){var d=a.className.split(/\s+/),e=d.indexOf(c);b(d,e,c),a.className=d.join(" ").trim()}}var a=this,c={add:b(function(a,b,c){~b||a.push(c)}),remove:b(function(a,b){~b&&a.splice(b,1)}),toggle:b(function(a,b,c){~b?a.splice(b,1):a.push(c)}),contains:function(b){return!!~a.className.split(/\s+/).indexOf(b)},item:function(b){return a.className.split(/\s+/)[b]||null}};return c}}),a.matchesSelector=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;while(c[++d]&&c[d]!=b);return!!c[d]}}),function(){var a={},b=function(){},c=Array.prototype,d=Object.prototype.toString,e=c.slice,f=/\s/,g=Element.prototype;a.EventEmitter=function(){},a.EventEmitter.prototype={addEventListener:function(a,b){this._purnoHandlers=this._purnoHandlers||{},this._purnoHandlers[a]=this._purnoHandlers[a]||[],this._purnoHandlers[a].push(b)},dispatchEvent:function(a){this._purnoHandlers=this._purnoHandlers||{};if(!!this._purnoHandlers[a]){var b=this._purnoHandlers[a];for(var c=0,d=b.length;c<d;c++)b[c].apply(this,e.call(arguments,1))}},removeEventListener:function(a,b){this._purnoHandlers=this._purnoHandlers||{};if(!!this._purnoHandlers[a]){var c=this._purnoHandlers[a];for(var d=0,e=c.length;d<e;d++){var f=c[d];f===b&&c.splice(d,1)}}}},a.addEventListener=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):(a["e"+b+c]=c,a[b+c]=function(){var d=window.event;d.target=d.target||d.srcElement,a["e"+b+c](d)},a.attachEvent("on"+b,a[b+c]))},a.clone=function(a){b.prototype=a;return new b},a.domReady=function(b){/in/.test(document.readyState)?setTimeout(function(){a.domReady(b)},9):b()},a.extend=function(){var a=arguments[0];e.call(arguments,1).forEach(function(b){if(!b)throw new Error("purno.extend: source objects are undefined");for(var c in b){var d=b[c];a[c]=d}});return a},a.makeArray=function(a){var b=[];try{b=e.call(a)}catch(c){for(var d=0,f=a.length;d<f;d++)b.push(a[d])}return b},a.parents=function(a,b){var c=[],d=a.parentNode;while(d.parentNode)c.push(d),d=d.parentNode;return b?c.filter(function(a){return a.matchesSelector(b)}):c},a.query=function(b,c){c=c||document;return a.makeArray(c.querySelectorAll(b))},a.removeEventListener=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):(a.detachEvent("on"+b,a[b+c]),a[b+c]=null,a["e"+b+c]=null)},a.typeOf=function(a){return a===null||typeof a=="undefined"?String(a):d.call(a).replace(/\[object |\]/g,"").toLowerCase()},typeof module!="undefined"&&module.exports?module.exports=a:typeof define=="function"&&define.amd?define("vpro/purno/purno",["vpro/purno/shims"],function(){return a}):window.purno=window.purno||a}(),define("vpro/woord/js/view/Comments",["jquery","domain-config","vpro/purno/purno"],function(a,b,c){var d={},e=function(a){this._createEventHandlers(),a=c.extend({},d,a||{}),this.applyConfig(a)};e.prototype=c.clone(c.EventEmitter.prototype),c.extend(e.prototype,{applyConfig:function(a){if(!!a){this._config=c.extend(this._config||{},a||{});for(var b in a){if(b.length<3)continue;var d="set"+b.substring(0,1).toUpperCase()+b.substring(1);c.typeOf(this[d])=="function"&&(this[d](a[b]),delete this._config[b])}}},_createEventHandlers:function(){this._onToggleClickHandler=this._onToggleClick.bind(this)},_onToggleClick:function(){this.toggleExpanded()},_bindEventHandlers:function(){this._getToggleEl().bind("click",this._onToggleClickHandler)},_unbindEventHandlers:function(){this._getToggleEl().unbind("click",this._onToggleClickHandler)},_isExpanded:function(){return this.getContainerEl().hasClass("expanded")},resetRenderState:function(){this._isExpanded()?this.renderWidget():this._renderOnExpand=!0},toggleExpanded:function(){this._isExpanded()?this.collapse():this.expand()},getContainerEl:function(){return this._commentsContainerEl||a("")},setContainerEl:function(a){this._commentsContainerEl&&this._unbindEventHandlers(),this._commentsContainerEl=a,this._bindEventHandlers()},_getToggleEl:function(){return this.getContainerEl().find(".comments-container-toggle")},_getContainerContentEl:function(){return this.getContainerEl().find(".comments-container-content")},scrollIntoView:function(){var a=this.getContainerEl();a.each(function(){this.scrollIntoView()})},expand:function(){var a=this.getContainerEl();a.addClass("expanded"),this._onExpand(),this.dispatchEvent("expand")},_onExpand:function(){this._renderOnExpand&&(this._renderOnExpand=!1,this.renderWidget())},collapse:function(){var a=this.getContainerEl();a.removeClass("expanded"),this.dispatchEvent("collapse")},_setRenderOptions:function(a){!a||(this._renderOptions=a,this.dispatchEvent("renderoptionsset",a))},_getRenderOptions:function(){return this._renderOptions||{}},_getDisqusIframe:function(a){return"".concat('<iframe src="'+b.embedServer+"/disqus/","?",a,'" width="100%" height="500" ','frameborder="0"></iframe>')},_getQueryOptions:function(a){return{color:"#9b00db",identifier:a.identifier,shortname:this._config.disqusShortname,title:a.title,url:a.url}},_makeQueryString:function(a){var b="";for(var c in a)b+=c+"="+encodeURIComponent(a[c])+"&";return b},render:function(a){this._isExpanded()&&this.collapse(),this._setRenderOptions(a),this.resetRenderState()},renderWidget:function(){var a=this._getRenderOptions(),b=this._makeQueryString(this._getQueryOptions(a)),c=this._getDisqusIframe(b),d=this._getContainerContentEl();d.html(c)}});return e}),define("vpro/woord/js/view/Home",["vpro/woord/js/util","vpro/woord/js/view/Comments"],function(a,b){return a.Stapes.create().extend({init:function(a){this.$el=$("#home .content"),this.$start=this.$el.find(".start.container"),this.$article=this.$el.find(".article.container"),this.slogan=a.slogan,this.commentsView=new b({disqusShortname:a.disqusShortname}),this.templates=a.templates,this._bindEventHandlers()},_bindEventHandlers:function(){this.$el.on("click","a",function(a){var b=$(a.currentTarget),c=b.attr("href");c=c.replace("http://woord.nl/",""),c=c.replace("http://www.woord.nl/","");if(b.attr("target")!="_blank"){if(c.indexOf(".html")===-1||(c.indexOf("http://")!==-1||c.indexOf("https://")!==-1)&&c.indexOf(window.location.hostname)==-1){b.attr("target","_blank");return}a.preventDefault(),this.emit("activate:url",c)}}.bind(this)),this.$article.on("click",".back",function(a){a.preventDefault(),this.emit("activate:back")}.bind(this)),this.$el.on("click",".searchlink",function(a){a.preventDefault(),this.emit("activate:search")}.bind(this))},renderArticle:function(a){var b=this.templates.newsarticle({article:a});this.$article.html(b),this.commentsView.setContainerEl(this.$article.find(".comments-container"));var c=this.$article.find("#mgnlcontent").attr("data-uuid");this.commentsView.render({identifier:c,url:window.location.href,title:" "}),this.$article.is(".active")?this.$article.scrollTop(0):(this.$article.addClass("active"),this.$article.scrollTop(0),this.$start.removeClass("active"))},getArticleTitle:function(){return!this.$article||!this.$article.length?"":this.$article.find("h1.title").html()||""},renderStart:function(a){var b=this.templates.startpage({slogan:this.slogan,startcontent:a});this.$start.html(b).addClass("active"),this.$article.removeClass("active")}})}),define("vpro/woord/js/model/Page",["vpro/woord/js/util"],function(a){var b=a.Stapes.create();b.extend({init:function(a){this.siteRoot=a.siteRoot,this.on({"change:path":b.createUrl,"change:url":b.loadUrl})},createUrl:function(a){var b=this.siteRoot+a;b=b.replace(/\?(.*)/,""),b=b.replace(".html",".ajax"),this.set("url",b)},loadUrl:function(a){this.emit("loadstart");var b=$.get(a);b.complete(function(a){this.set("html",a.responseText)}.bind(this)),b.error(function(a){this.emit("error",404)}.bind(this))}});return b}),define("vpro/woord/js/controller/Home",["vpro/woord/js/util","vpro/woord/js/view/Home","vpro/woord/js/model/Page"],function(a,b,c){return a.Stapes.create().extend({init:function(a,d){this.woord=a,this.page=c.create(),this.pageType="start",this.page.init({siteRoot:this.woord.config.siteRoot}),this.homeView=b,this.homeView.init({disqusShortname:this.woord.config.disqusShortname,templates:this.woord.config.templates,slogan:d.slogan}),this.bindEventHandlers()},bindEventHandlers:function(){this.page.on({"nochange:path":function(){this.getPageType()==="article"&&(this.homeView.commentsView.resetRenderState(),this.displayArticleTitle())},"change:html":function(a){this.woord.emit("loadend"),this.getPageType()==="article"&&(this.homeView.renderArticle(a),this.displayArticleTitle()),this.getPageType()==="start"&&this.homeView.renderStart(a)},error:function(a){a===404&&(this.woord.emit("loadend"),this.woord.error404NotFound())},loadstart:function(){this.woord.emit("loadstart")}},this),this.homeView.on({"activate:back":function(){this.woord.goHome()},"activate:url":function(a){this.woord.router.navigate(a)},"activate:search":function(a){this.woord.openSearch()}},this)},displayArticleTitle:function(){var a=this.homeView.getArticleTitle();this.woord.setTitle(a)},displayArticle:function(a){this.woord.setTitle("bezig met laden"),this.pageType="article",this.page.set("path",a)},displayStart:function(a){this.woord.setTitle("Start"),this.pageType="start",this.page.set("path",a)},getPageType:function(){return this.pageType}})}),define("vpro/util/search/query/builder",["vpro/purno/purno"],function(a){var b={suggestionSize:5},c=function(a){this.setConfig(a)};c.prototype=a.clone(a.EventEmitter.prototype),a.extend(c.prototype,{setConfig:function(c){this._config=a.extend({},b,c||{})},getConfig:function(a,b){var c=this._config;return a?typeof c[a]=="undefined"?typeof b=="undefined"?null:b:c[a]:c||{}},build:function(a){return a.getData()}});return c}),define("vpro/util/search/query/configuration",["vpro/purno/purno"],function(a){var b=function(a){a=a||{},this._highlights=[],this._facets=[],this._dateHistogramsFacets=[],this._queryFacetsTime={},this._queryFacets={},this._numericRangeTime={},this._numericRanges={},this._queryTime=0,this._query="",this._from=null,this._size=null,this._sort=[],this._suggestion=a.suggestion||null,a.from&&this.setFrom(a.from),a.size&&this.setSize(a.size),a.facets&&a.facets.forEach(function(a){this.addFacet(a)},this)};b.prototype={setSuggestion:function(a){this._suggestion=a},getSuggestion:function(){return this._suggestion},hasSuggestion:function(){return!!this._suggestion},addSort:function(a,b){b=b.toLowerCase()||"asc";var c={};c[a]={order:b},this._sort.push(c)},getSort:function(){return this._sort},hasSort:function(){return this.getSort().length>0},getData:function(){return{from:this.getFrom(),size:this.getSize(),facets:this.getFacets,queryFacets:this.getQueryFacets(),query:this.getQuery()}},setFrom:function(a){this._from=a},getFrom:function(){return this._from},setSize:function(a){this._size=a},getSize:function(){return this._size},addHighlight:function(a){var b=this._highlights;b.indexOf(a)===-1&&b.push(a)},getHighlights:function(){return this._highlights},addFacet:function(a){var b=!1;this._facets.forEach(function(c){a.getFacetName()==c.getFacetName()&&(b=!0)}),b||this._facets.push(a)},getFacets:function(){return this._facets},getFacetByName:function(a){var b;this._facets.forEach(function(c){a==c.getFacetName()&&(b=c)});return b},addDateHistogramFacet:function(a,b){this._dateHistogramsFacets.push({facetName:a,interval:b||"year"})},getDateHistogramFacets:function(){return this._dateHistogramsFacets},addQueryFacet:function(b){var c=b.getFacetName(),d=b.getValue(),e=typeof b.getValueTimeStamp=="function"?b.getValueTimeStamp():0,f=a.typeOf(d)=="array"?d:[d],g=this._queryFacetsTime[c];if(!g||g<e)this._queryFacetsTime[c]=e,this._queryFacets[c]=f;this.addFacet(b)},getQueryFacet:function(a){var b=this.getQueryFacets()[a];return b?b:null},getQueryFacets:function(){return this._queryFacets},addNumericRange:function(a,b,c,d){d=d?d:0;var e=this._numericRangeTime[a];if(!e||e<d)this._numericRangeTime[a]=d,this._numericRanges[a]={from:b,to:c}},getNumericRanges:function(){return this._numericRanges},getNumericRange:function(a){var b=this.getNumericRanges()[a];return b?b:null},setQueryText:function(a,b){b=b?b:0;var c=this._queryTextTime;if(!c||c<b)this._queryTextTime=b,this._queryText=a},getQueryText:function(){return this._queryText}};return b}),define("vpro/util/search/client/abstract",["vpro/util/search/query/builder","vpro/util/search/query/configuration","vpro/purno/purno"],function(a,b,c){var d={queryBuilder:null},e=function(a){a=c.extend({},d,a||{}),this.setQueryBuilder(a.queryBuilder),delete a.queryBuilder,this.setConfig(a)};e.prototype=c.clone(c.EventEmitter.prototype),c.extend(e.prototype,{setConfig:function(a){this._config=c.extend({},d,a||{})},getConfig:function(a,b){var c=this._config;return a?typeof c[a]=="undefined"?typeof b=="undefined"?null:b:c[a]:c||{}},setQueryBuilder:function(b){b instanceof a||(b=this._generateQueryBuilder(b)),this._queryBuilder=b},getQueryBuilder:function(){return this._queryBuilder||null},_generateQueryBuilder:function(b){return new a(b)},search:function(a){a=c.extend({from:0,size:10},a||{});var d=new b(a),e={queryType:"search"};this.dispatchEvent("initsearch",d),this._query(d,e)},suggest:function(a){var c=new b(a),d={queryType:"suggest"};this.dispatchEvent("initsuggest",c),this._query(c,d)},_query:function(a,b){this.dispatchEvent("initquery",a),this.dispatchEvent("beforequery",a)}});return e}),define("vpro/util/search/result",["vpro/purno/purno"],function(a){var b={},c=function(c){this._data={},this._config=a.extend({},b),this.setConfig(c)};c.prototype={setConfig:function(b,c){c?this._config[b]=c:this._config=a.extend({},this._config)},getConfig:function(a){var b=this._config;!a||!b[a]},setData:function(a,b){b?this._data[a]=b:this._data=a},getData:function(a,b){var c=this._data;return a?c[a]?c[a]:typeof b=="undefined"?null:b:c},getSuggestions:function(){return this.getData("suggestions",[])},setSuggestions:function(a){this.setData("suggestions",a)},addSuggestion:function(a){var b=this.getSuggestions();b.push(a),this.setSuggestions(b)},setRawData:function(){this.setData.apply(this,arguments)},addFacet:function(a,b,c){var d=this.getData("facets",[]);b=b||[],c=c||b.length,d[a]={terms:b,total:c},this.setData("facets",d)},getFacet:function(a){var b=this.getData("facets",[]);return b[a]?b[a]:null},setHits:function(a){this.setData("hits",a)},getHits:function(){return this.getData("hits",[])},setTotalHits:function(a){this.setData("totalHits",a)},getTotalHits:function(){return this.getData("totalHits",0)}};return c}),define("vpro/util/elasticsearch/querybuilder",["vpro/util/search/query/builder","vpro/purno/purno"],function(a,b){var c={textBoostFactors:[],valueBoostFactors:{},suggestionFacets:[]},d=function(){a.apply(this,arguments)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{setConfig:function(d){d=b.extend({},c,d||{}),a.prototype.setConfig.call(this,d)},build:function(a){var b={},c=a.getFrom(),d=a.getSize();if(d||d===0)b.size=d,c||(c=0);if(c||c===0)b.from=c;var e=a.getSort();e.length>0&&(b.sort=e);var f=a.getFacets();f.length>0&&(b.facets=b.facets||{},f.forEach(function(a){b.facets[a.getFacetName()]={terms:{field:a.getFacetFieldName(),size:15}}}));var g=a.getDateHistogramFacets();g.length>0&&(b.facets=b.facets||{},g.forEach(function(a){b.facets[a.facetName]={date_histogram:{field:a.facetName,interval:a.interval}}}));var h=a.getSuggestion();h&&(b.size=0,b.facets=b.facets||{},b.facets.suggestion={terms:{fields:this.getConfig("suggestionFacets"),regex:h+".*",regex_flags:"CASE_INSENSITIVE",size:this.getConfig("suggestionSize")}});var i=[],j=[],k=a.getQueryText();if(k){var l=this.getConfig("textBoostFactors");l.length>0?l.forEach(function(a){var b={query:{},boost_factor:a.boost_factor||1},c=a.type=="facet"?"term":"match";b.query[c]={};switch(c){case"term":b.query[c][a.fieldName]=k;break;case"match":b.query[c][a.fieldName]={query:k,operator:"and"}}i.push(b)}):(b.query=b.query||{},b.query.filtered=b.query.filtered||{},b.query.filtered.query=b.query.filtered.query||{},b.query.filtered.query.text={_all:k})}else b.query=b.query||{},b.query.filtered=b.query.filtered||{},b.query.filtered.query=b.query.filtered.query||{},b.query.filtered.query.match_all={};var m=a.getQueryFacets();for(var n in m){var o=a.getFacetByName(n).getFacetFieldName(),p=m[n];p.forEach(function(a){var b={};b[o]=a,j.push({term:b})})}var q=a.getNumericRanges();for(var r in q){var s=q[r],t={};t[r]={from:s.from,to:s.to,include_lower:!0,include_upper:!1},j.push({numeric_range:t})}j.length>0&&(b.query||(b.query={}),b.query.filtered||(b.query.filtered={}),b.query.filtered.filter={bool:{must:j}}),i.length>0&&(b.query||(b.query={}),b.query.filtered||(b.query.filtered={}),b.query.filtered.query||(b.query.filtered.query={}),b.query.filtered.query.bool||(b.query.filtered.query.bool={}),b.query.filtered.query.bool.should=[],i.forEach(function(a){var c={};c.custom_boost_factor=a,b.query.filtered.query.bool.should.push(c)}));if(b.query){var u=[],v=[],w=this.getConfig("valueBoostFactors");if(w&&JSON.stringify(w)!="{}")for(var x in w){var y=w[x],z=[];for(var A in y)z.push("'"+A+"': "+y[A]);var B="v_"+x,C=x+" = ["+z.join(",")+"]",D=B+" = doc['"+x+"'].value";u.push(C),u.push(D);var E="("+x+" contains "+B+" ? "+x+"["+B+"] : 1.0)";v.push(E)}v.length&&(u.push("_score * "+v.join(" * ")),u=u.join("; "),b.query={custom_score:{query:b.query,script:u}})}var F=a.getHighlights();if(F.length>0){var G={};F.forEach(function(a){G[a]={fragment_size:50,number_of_fragments:3}}),b.highlight={tags_schema:"styled",fields:G}}return b}});return d}),define("vpro/util/elasticsearch/client",["vpro/util/search/client/abstract","vpro/util/search/result","vpro/util/elasticsearch/querybuilder","jquery","vpro/purno/purno","ext/jquery-xdomainrequest/jquery-xdomainrequest"],function(a,b,c,d,e){var f={server:"",searchIndex:"",documentTypes:"",queryParameters:null},g=function(){a.apply(this,arguments)};g.prototype=e.clone(a.prototype),e.extend(g.prototype,{_query:function(b,c){a.prototype._query.apply(this,arguments),c=e.extend({queryType:""},this.getConfig(),c),c.url=this._getRequestUrl(c),c.dsl=this.getQueryBuilder().build(b);var f={query:JSON.stringify(c.dsl)};c.documentTypes&&(f.documentTypes=c.documentTypes);return d.ajax({dataType:"json",type:"POST",jsonp:!1,crossDomain:!0,isLocal:!1,url:c.url,data:f,success:function(a){var d=this._responseToResult(a,b);this.dispatchEvent("result",d,b,c);var e=c.queryType;typeof e=="string"&&e.length>0&&this.dispatchEvent(e+"result",d,b,c)}.bind(this)})},_responseToResult:function(a,c){var d=new b;a=a||{};if(a.hits&&a.hits.hits){var e=[],f=c.getHighlights(),g=(c.getQueryText()||"").split(" "),h=c.getQueryFacets();g.length&&g[0]===""&&(g=[]);for(var i in h)g=g.concat(h[i]);a.hits.hits.forEach(function(a){var b=a._source;b._type=a._type;if(a.highlight)b.highlight=a.highlight;else if(g.length){var c={};f.forEach(function(a){var d=b[a],e=[];if(!!d){d=d.toString();if(d.length<3)return;g.forEach(function(a){var b=0,c=a.length;if(c!==0){a=" "+a+" ",c+=2;while(d.indexOf(a,b)!=-1&&e.length<=3){b=d.indexOf(a,b)+c;var f=d.substring(Math.max(0,b-20),Math.min(d.length,b+20));f&&f.trim().length>1&&(f=f.replace(new RegExp(a,"g"),"<em>"+a+"</em>"),e.push(f))}}}),c[a]=e}}),JSON.stringify(c)!="{}"&&(b.highlight=c)}e.push(b)}),d.setHits(e),d.setTotalHits(a.hits.total||e.length)}if(a.facets){var j=a.facets;c.hasSuggestion()&&j.suggestion&&(d.setSuggestions(j.suggestion.terms),delete j.suggestion);for(var k in j){var l=j[k];switch(l._type){case"terms":d.addFacet(k,l.terms,l.total);break;case"date_histogram":var m=[];l.entries.forEach(function(a){m.push({count:a.count,term:a.time})}),d.addFacet(k,m,l.total)}}}return d},_getRequestUrl:function(a){var b=this.getConfig("server"),c=[];a.searchIndex&&(b+="/"+a.searchIndex),b+=".json";var d=a.queryParameters;if(d&&typeof d=="object")for(var e in d)c.push(e+"="+d[e]);var f=new Date,g=f.getFullYear().toString()+f.getMonth().toString()+f.getDate().toString()+f.getHours().toString();c.push("_cb="+g),b+="?"+c.join("&");return b},_generateQueryBuilder:function(a){return new c(a)}});return g}),define("vpro/util/search/client/observable",["vpro/purno/purno"],function(a){var b={apiClient:null,apiClientEventMap:null},c=function(c){c=a.extend({},b,c),this._apiClientEventMap={},c.apiClientEventMap&&this.setApiClientEventMap(c.apiClientEventMap),this._apiClient=null,c.apiClient&&this.setApiClient(c.apiClient)};c.prototype=a.clone(a.EventEmitter.prototype),a.extend(c.prototype,{getApiClient:function(){return this._apiClient},setApiClient:function(a){var b=null;if(this.hasApiClient()){b=this.getApiClient();if(b==a)return;this._unsubscribeApiClientEvents()}this._apiClient=a,this._subscribeApiClientEvents(),this.dispatchEvent("apiclientchange",a,b)},removeApiClient:function(){!this.hasApiClient()||(this._unsubscribeApiClientEvents(),this._apiClient=null)},hasApiClient:function(){return!!this._apiClient},setApiClientEventMap:function(a){this.hasApiClient()&&this._unsubscribeApiClientEvents();for(var b in a)a[b]=this[a[b]].bind(this);this._apiClientEventMap=a,this.hasApiClient()&&this._subscribeApiClientEvents()},_unsubscribeApiClientEvents:function(){var a=this._apiClientEventMap,b=this.getApiClient();for(var c in a)b.removeEventListener(c,a[c])},_subscribeApiClientEvents:function(){var a=this._apiClientEventMap,b=this.getApiClient();for(var c in a)b.addEventListener(c,a[c])}});return c}),define("vpro/gui/search/component",["vpro/util/search/client/observable","vpro/purno/purno"],function(a,b){var c={generatedNodeClass:"",template:"",elementMap:{}},d=function(b){this.addEventListener("parentnodechange",this._onParentNodeChange.bind(this)),this.addEventListener("nodechange",this._onNodeChange.bind(this)),this.addEventListener("configchange",this._onConfigChange.bind(this)),this.setConfig(b),a.apply(this,arguments)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{_onConfigChange:function(a){a.node?this.setNode(a.node):this.generateNode(),a.parentNode&&this.setParentNode(a.parentNode)},_onParentNodeChange:function(a,b){var c=this.getNode();b&&b!==a&&b.removeChild(c),c.parentNode!==a&&a.appendChild(c)},_onNodeChange:function(a,b){b&&b.parentNode.removeChild(b),this.initTemplate(),this.hasParentNode()&&this.setParentNode(this.getParentNode())},initTemplate:function(){if(!!this.hasNode()){var a=this.getNode(),c=this.getConfig("template")||"";a.innerHTML=c;var d=this.getConfig("elementMap"),e={};for(var f in d)e[f]=a.querySelector(d[f]);b.extend(this,e),this.dispatchEvent("templateinit",e,a)}},setConfig:function(a){a=b.extend({},c,a||{}),this._config=a,this.dispatchEvent("configchange",a)},getConfig:function(a){var b=this._config;return a&&b[a]?b[a]:a?null:b||{}},getNode:function(){return this._node||null},setNode:function(a){var b=this.getNode();this._node=a,this.dispatchEvent("nodechange",a,b)},hasNode:function(){return!!this._node},generateNode:function(){var a=document.createElement("div");a.className=this.getConfig("generatedNodeClass"),this.setNode(a)},setParentNode:function(a){var b=this.getParentNode();this._parentNode=a,this.dispatchEvent("parentnodechange",a,b)},getParentNode:function(){return this._parentNode||null},hasParentNode:function(){return!!this._parentNode}});return d}),define("vpro/gui/search/mustachecomponent",["vpro/purno/purno","vpro/util/search/client/observable","ext/mustache/0.7.3/mustache"],function(a,b,c){var d={autorenderTemplate:!0,template:"",parentNode:null,appendTemplate:!1},e=function(c){c=a.extend({},d,c),this._autorenderTemplate=c.autorenderTemplate,b.call(this,c),c.parentNode&&this.setParentNode(c.parentNode),c.template&&this.setTemplate(c.template),this.appendTemplate=c.appendTemplate,this.setData(a.extend({},this._data||{},c.data||{}))};e.prototype=a.clone(b.prototype),a.extend(e.prototype,{setParentNode:function(a){if(a instanceof Element)this._parentNode=a,this.renderTemplate();else return},getParentNode:function(){return this._parentNode},hasParentNode:function(){return!!this._parentNode},setData:function(a,b,c){if(typeof a!="string")c=b,b=a,this._data=b;else{var d=this.getData()||{};d[a]=b,this._data=d}(this._autorenderTemplate&&c!==!1||c)&&this.renderTemplate()},getData:function(){return this._data||{}},hasData:function(){var a=this.getData();return!!a&&typeof a=="object"},setTemplate:function(a,b){this._template=a,(this._autorenderTemplate||b)&&this.renderTemplate()},getTemplate:function(){return this._template},renderTemplate:function(){var a=this.getParentNode(),b=this.getData(),d=this.getTemplate();!a||!b||!d||(this.appendTemplate?a.innerHTML+=c.render(d,b):a.innerHTML=c.render(d,b),this.dispatchEvent("rendered",a))}});return e}),define("vpro/gui/search/resultlist",["vpro/gui/search/mustachecomponent","vpro/purno/purno"],function(a,b){var c={processHits:function(a){return a},appendResults:!1},d=function(d){d=b.extend({},c,d),d.apiClientEventMap={searchresult:"_onSearchResult"},this.processHits=d.processHits,delete d.processHits,this.appendResults=d.appendResults,a.call(this,d)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{_onSearchResult:function(a,c,d){var e=[],f=a.getHits();f&&f.forEach(function(a){e.push(b.extend({},a))}),e=this.processHits(e),this.appendResults&&(this.appendTemplate=!!c.getFrom());var g=a.getTotalHits();this.setData("totalHits",g,!1),this.setData("hasHits",g!==0,!1),this.setData("oneHit",g===1,!1),this.setData("hits",e)}});return d}),define("vpro/gui/search/pagenav",["vpro/gui/search/mustachecomponent","vpro/purno/purno"],function(a,b){var c={surroundingPages:3},d=function(d){d=b.extend({},c,d),this._surroundingPages=d.surroundingPages,d.apiClientEventMap={result:"_onResult"},a.call(this,d)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{_onResult:function(a,b,c){if(c.queryType==="search"){var d={index:1*b.getFrom(),pageSize:1*b.getSize(),hits:1*a.getTotalHits()};d.pageCountHuman=d.hits===0?1:Math.ceil(d.hits/d.pageSize),d.pageCount=d.pageCountHuman-1,d.currentPage=d.index===0?0:Math.ceil(d.index/d.pageSize),d.currentPageHuman=d.currentPage+1,d.firstPage=d.currentPage===0,d.lastPage=d.index>=d.hits-d.pageSize,d.lastPageIndex=d.pageCount*d.pageSize,d.prevIndex=d.firstPage?!1:d.index-d.pageSize,d.nextIndex=d.lastPage?!1:d.index+d.pageSize,d.nextHitsCount=d.nextIndex===!1?0:Math.min(d.pageSize,d.hits-d.nextIndex),d.hasPages=d.pageCountHuman>1;var e=d.surrounding=[],f=this._surroundingPages;surroundingStart=Math.max(1,d.currentPageHuman-f),surroundingEnd=Math.min(d.pageCountHuman,d.currentPageHuman+f);if(surroundingStart<surroundingEnd){surroundingStart!==1&&(e.push({index:0,pageNr:1,current:d.firstPage,gap:!1}),surroundingStart!==2&&e.push({gap:!0}));for(var g=surroundingStart;g<=surroundingEnd;g++)e.push({index:g*d.pageSize-d.pageSize,pageNr:g,current:g==d.currentPageHuman,gap:!1});surroundingEnd!==d.pageCountHuman&&(surroundingEnd!==d.pageCountHuman-1&&e.push({gap:!0}),e.push({index:d.lastPageIndex,pageNr:d.pageCountHuman,current:d.lastPage,gap:!1}))}this.setData(d)}}});return d}),define("vpro/gui/search/filtermanager",["vpro/util/search/client/observable","vpro/purno/purno"],function(a,b){var c={filters:[]},d=function(d){d=b.extend({},c,d),this._onFilterUserChangeHandler=this._onFilterUserChange.bind(this),this._filters=[],this.addFilter.apply(this,d.filters),a.apply(this,arguments)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{addFilter:function(){var a=b.makeArray(arguments),c=this._filters,d=this.hasApiClient(),e=this.getApiClient();a.forEach(function(a){c.indexOf(a)===-1&&(c.push(a),a.setFilterManager(this),d&&a.setApiClient(e),a.addEventListener("userchange",this._onFilterUserChangeHandler))},this)},removeFilter:function(){var a=b.makeArray(arguments),c=this._filters;a.forEach(function(a){var b=this.getFilter(a);if(!!b){var d=c.indexOf(b);d!==-1&&c.splice(d,1),b.removeEventListener("userchange",this._onFilterUserChangeHandler)}},this)},hasValue:function(){var a=!1;this._eachFilter(function(b){!a&&b.hasValue()&&(a=!0)});return a},getValue:function(){var a={};value={},this._eachFilter(function(b){var c=b.getName(),d=a[c],e=b.getValueTimestamp();if(!d||e>d)a[c]=e,value[c]=b.getValue()});return value},getStringValue:function(){var a={};value={},this._eachFilter(function(b){var c=b.getName(),d=a[c],e=b.getValueTimestamp();if(!d||e>d)a[c]=e,value[c]=b.getStringValue()});return value},setValue:function(a){this._eachFilter(function(b){var c=b.getName(),d=a[c]||null;b.setValue(d)})},setStringValue:function(a){this._eachFilter(function(b){var c=b.getName(),d=a[c]||"";b.setStringValue(d)})},_onFilterUserChange:function(a){this.dispatchEvent("userchange",this,a)},_eachFilter:function(a,b){b=b||this;return this._filters.forEach(a,b)},setApiClient:function(b){a.prototype.setApiClient.apply(this,arguments),this._eachFilter(function(a){a.setApiClient(b)})},getFilter:function(a){var b=null;switch(typeof a){case"number":this._filters.length>a&&(b=this._filters[a]);break;case"string":this._eachFilter(function(c){a==c.getName()&&(b=c)});break;case"object":this._eachFilter(function(c){a==c&&(b=c)})}return b}});return d}),define("vpro/gui/search/filter",["vpro/purno/purno"],function(a){var b={filterManager:null,value:null,stringvalue:null,name:null},c=function(c){c=a.extend({},b,c||{}),c.value?this.setValue(c.value):c.stringvalue&&this.setStringValue(c.stringvalue),c.name&&this.setName(c.name),c.filterManager&&this.setFilterManager(c.filterManager)};c.prototype={getName:function(){return this._name||""},setName:function(a){this._name=a},hasValue:function(){return!!this.getValue()},getValue:function(){return this._value},setValue:function(a){this.setRawValue(a)},setRawValue:function(a){this._valueTimestamp=(new Date).getTime(),this._value=a},getValueTimestamp:function(){return this._valueTimestamp||0},getStringValue:function(){var a=this.getValue();return(a||"").toString()},setStringValue:function(a){this.setValue(a)},setFilterManager:function(a){this.removeFilterManager(),this._filterManager=a,a.addFilter(this)},getFilterManager:function(){return this._filterManager},hasFilterManager:function(){return!!this._filterManager},removeFilterManager:function(){if(!!this.hasFilterManager()){var a=this.getFilterManager();this._filterManager=null,a.removeFilter(this)}}};return c}),define("vpro/gui/search/filter/textfield",["vpro/purno/purno","vpro/gui/search/mustachecomponent","vpro/gui/search/filter"],function(a,b,c){var d={template:['<label for="{{id}}">{{title}}</label>','<input type="search" id="{{id}}" name="{{name}}" value="{{query}}" autocorrect="off" autocapitalize="off" />',"{{#clearButton}}",'<button class="clear"></button>',"{{/clearButton}}"].join(""),inputSelector:"input",clearButton:!1,clearButtonSelector:".clear",checkOnEnter:!0,checkOnBlur:!1,name:"queryfield",id:null,title:""},e=function(e){e=a.extend({},d,e||{}),e.apiClientEventMap=a.extend({initsearch:"_onInitSearch"},e.apiClientEventMap||{}),this._checkOnEnter=e.checkOnEnter,this._checkOnBlur=e.checkOnBlur,this._inputSelector=e.inputSelector,this._hasClearButton=e.clearButton,this._clearButtonSelector=e.clearButtonSelector,e.id=e.id||e.name,e.data=a.extend({},e.data||{},{name:e.name,id:e.id}),e.clearButton&&(e.data.clearButton=!0),e.title&&(e.data.title=e.title),b.call(this,e),c.call(this,e)};e.prototype=a.clone(b.prototype),a.extend(e.prototype,c.prototype,{_onInitSearch:function(a){this.hasValue()&&a.setQueryText(this.getValue(),this.getValueTimestamp())},renderTemplate:function(){b.prototype.renderTemplate.apply(this,arguments);var c=this._getInputNode();c&&(this._checkOnBlur&&a.addEventListener(c,"blur",this._onInputNodeBlur.bind(this)),this._checkOnEnter&&a.addEventListener(c,"keypress",this._onInputNodeKeypress.bind(this)));if(this._hasClearButton){var d=this._getClearNode();d&&a.addEventListener(d,"click",this._onClearButtonClick.bind(this))}this._syncValue()},_onClearButtonClick:function(){this.clearValue()},_onInputNodeBlur:function(a){a.target.tagName=="INPUT"&&this._checkUserChange()},_onInputNodeKeypress:function(a){var b=a.keyCode?a.keyCode:a.which;a.target.tagName=="INPUT"&&b==13&&(setTimeout(this._checkUserChange.bind(this),20),this.blur())},_checkUserChange:function(){var a=this.getStringValue();this._syncValue();var b=this.getStringValue();if(a!=b){this.dispatchEvent("userchange",this);return!0}return!1},_getClearNode:function(){var a=this.getParentNode(),b;a&&(b=a.querySelector(this._clearButtonSelector));return b},_getInputNode:function(){var a=this.getParentNode(),b;a&&(b=a.querySelector(this._inputSelector));return b},_getInputValue:function(){var a=this._getInputNode(),b="";a&&(b=a.value);return b},_setInputValue:function(a){var b=this._getInputNode();b&&(b.value=a||"")},setValue:function(a){this._setInputValue(a),c.prototype.setValue.apply(this,arguments)},clearValue:function(){this.setStringValue(""),this.focus(),this.dispatchEvent("clearvalue",this)},focus:function(){var a=this._getInputNode();a&&a.focus()},blur:function(){var a=this._getInputNode();a&&a.blur()},_syncValue:function(){this.setRawValue(this._getInputValue())}});return e}),define("vpro/gui/search/filter/autocomplete",["vpro/gui/search/filter/textfield","ext/mustache/0.7.3/mustache","vpro/purno/purno"],function(a,b,c){var d={inputBuffer:220,minCharsForSuggestion:2,suggestionsNodeSelector:".suggestions",suggestionNodeSelector:".suggestion",template:['<div class="autocomplete">','<label for="{{id}}">{{title}}</label>','<input type="text" id="{{id}}" name="{{name}}" value="{{query}}" autocomplete="off" autocorrect="off" autocapitalize="off" />',"{{#clearButton}}",'<button class="clear"></button>',"{{/clearButton}}",'<div class="suggestions"></div>',"</div>"].join(""),clearButton:!0,suggestionsTemplate:["{{#suggestions}}",'<a class="suggestion">{{term}} <span class="count">({{count}})</span></a>',"{{/suggestions}}"].join("")},e=function(b){b=c.extend({},d,b||{}),b.apiClientEventMap=c.extend({initsuggest:"_onInitSuggest",suggestresult:"_onSuggestResult"},b.apiClientEventMap||{}),this._suggestionsNodeSelector=b.suggestionsNodeSelector,this._suggestionNodeSelector=b.suggestionNodeSelector,this._minCharsForSuggestion=b.minCharsForSuggestion,this._suggestionsTemplate=b.suggestionsTemplate,this.setInputBuffer(b.inputBuffer),a.call(this,b)};e.prototype=c.clone(a.prototype),c.extend(e.prototype,{_onInitSearch:function(){this.hideSuggestions(),a.prototype._onInitSearch.apply(this,arguments)},_onInitSuggest:function(a){var b=this._getInputValue();!b||a.setSuggestion(b)},_onSuggestResult:function(a){this.setSuggestions(a.getSuggestions())},_onSuggestionsMouseMove:function(){this._hoverSuggestions=!0},_onSuggestionMouseOut:function(a){c.parents(a.relatedTarget||a.toElement,this._suggestionsNodeSelector).length===0&&(this._hoverSuggestions=!1,this._initSuggestionCheckTimeout(200))},_onInputFocus:function(){this._inputFocused=!0},_onInputBlur:function(){this._inputFocused=!1,this._initSuggestionCheckTimeout(50)},_initSuggestionCheckTimeout:function(a){this._suggestionCheckTimeout&&clearTimeout(this._suggestionCheckTimeout),this._suggestionCheckTimeout=setTimeout(this._suggestionsAutohideCheck.bind(this),a)},_suggestionsAllowed:function(){return this._hoverSuggestions||this._inputFocused},_suggestionsAutohideCheck:function(){this._suggestionsAllowed()||this.hideSuggestions()},hideSuggestions:function(){this._hoverSuggestions=!1;var a=this._getSuggestionsNode();a&&(a.style.display="none")},showSuggestions:function(){var a=this._getSuggestionsNode();a&&(a.style.display="block")},renderTemplate:function(){a.prototype.renderTemplate.apply(this,arguments);var b=this._getInputNode();b&&(c.addEventListener(b,"keyup",this._onSearchInput.bind(this)),c.addEventListener(b,"focus",this._onInputFocus.bind(this)),c.addEventListener(b,"blur",this._onInputBlur.bind(this)));var d=this._getSuggestionsNode();d&&(c.addEventListener(d,"click",this._onSuggestionClick.bind(this)),c.addEventListener(d,"mousemove",this._onSuggestionsMouseMove.bind(this)),c.addEventListener(d,"mouseout",this._onSuggestionMouseOut.bind(this)),this.hideSuggestions())},_getSuggestionsNode:function(){var a=this.getParentNode(),b;a&&(b=a.querySelector(this._suggestionsNodeSelector));return b},_getSuggestionNodes:function(){var a=this._getSuggestionsNode();return a?c.query(this._suggestionNodeSelector,a):[]},_onSuggestionClick:function(a){var b=this._getSuggestionNodeIndex(a.target);if(b!==-1){var c=this._getSuggestionByIndex(b);if(!c)return;this._setInputValue(c.term),this._checkUserChange(),this.clearSuggestions()}},_getSuggestionNodeIndex:function(a){if(a.parentNode!=this._getSuggestionsNode()){var b=c.parents(a,this._suggestionNodeSelector);if(b.length)a=b[0];else return-1}var d=this._getSuggestionNodes(),e=d.indexOf(a);return e},_getSuggestionByIndex:function(a){var b=this.getSuggestions(),c=b[a];return c?c:null},setInputBuffer:function(a){this._inputBuffer=a},getInputBuffer:function(){return this._inputBuffer},_onSearchInput:function(){this.queueSuggestion()},queueSuggestion:function(){this._searchInputTimeout&&clearTimeout(this._searchInputTimeout);var a=this._getInputValue(),b=this.getInputBuffer();a.length>=this._minCharsForSuggestion&&b?this._searchInputTimeout=setTimeout(this.makeSuggestions.bind(this),b):this.clearSuggestions()},getSuggestions:function(){return this._suggestions},setSuggestions:function(a){this._suggestions=a,this.renderSuggestions(),a.length>0&&this._suggestionsAllowed()?this.showSuggestions():this.hideSuggestions()},renderSuggestions:function(){var a=this._getSuggestionsNode();if(!!a){var c=this._suggestionsTemplate,d=this.getSuggestions(),e={suggestions:d},f=b.render(c,e);a.innerHTML=f}},makeSuggestions:function(){var a=this._getInputValue();if(a.length<this._minCharsForSuggestion)this.clearSuggestions();else{var b=this.getApiClient();b&&b.suggest()}},clearSuggestions:function(){this.setSuggestions([])}});return e}),define("vpro/gui/search/facet",["vpro/gui/search/mustachecomponent","vpro/purno/purno"],function(a,b){var c={facetName:"",sortFacetsByName:!0},d=function(d){this.config=this.config||{},d=b.extend(this.config,c,d),d.apiClientEventMap=b.extend({initsearch:"_onInitSearch",searchresult:"_onSearchResult"},d.apiClientEventMap||{}),this.setFacetName(d.facetName),this.setFacetFieldName(d.facetFieldName),a.call(this,d)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{_onSearchResult:function(a,b,c){var d=a.getFacet(this.getFacetName());try{this.config.sortFacetsByName&&this._sortFacetsByName(d)}catch(e){}this.setData("facet",d||{})},_sortFacetsByName:function(a){!!a&&!!a.term&&a.terms.sort(function(a,b){var c=a.term.toLowerCase(),d=b.term.toLowerCase();return c<d?-1:c>d?1:0})},_onInitSearch:function(a){a.addFacet(this)},setFacetName:function(a){this.setData("facetName",a,!1),this._facetName=a},getFacetName:function(){return this._facetName},setFacetFieldName:function(a){a&&(this._facetFieldName=a)},getFacetFieldName:function(){return this._facetFieldName?this._facetFieldName:this._facetName}});return d}),define("vpro/gui/search/filter/checkbox",["vpro/gui/search/facet","vpro/gui/search/filter","vpro/purno/purno"],function(a,b,c){var d={template:["{{#title}}",'<span class="title">{{title}}{{checkedClass}}</span>',"{{/title}}","{{#facet}}","{{#terms}}",'<span class="term{{#checked}} {{checkedClass}}{{/checked}}">','<input id="facet_{{facetName}}_{{term}}" class="term-checkbox" type="checkbox" value="{{term}}"',"{{#checked}}",' checked="checked"',"{{/checked}}"," />",'<label for="facet_{{facetName}}_{{term}}" class="term-label">',"{{label}}","</label>","</span>","{{/terms}}","{{/facet}}","{{^facet.terms}}","{{#noTermsMessage}}",'<span class="no-terms">{{noTermsMessage}}</span>',"{{/noTermsMessage}}","{{/facet.terms}}"].join(""),termClass:"term",checkedClass:"checked",dataFilter:function(a){return a}},e=function(e){e=c.extend({},d,e||{}),e.apiClientEventMap=c.extend({initsearch:"_onInitSearch"},e.apiClientEventMap||{}),this._termClass=e.termClass,this._checkedClass=e.checkedClass,this._dataFilter=e.dataFilter,a.apply(this,arguments),b.apply(this,arguments)};e.prototype=c.clone(a.prototype),c.extend(e.prototype,b.prototype,{_onInitSearch:function(a){this.hasValue()?a.addQueryFacet(this):a.addFacet(this)},_onInitSuggest:function(a){this.hasValue()&&a.addQueryFacet(this)},_onSearchResult:function(a,b,d){var e=this.getFacetName(),f=c.extend({},a.getFacet(e)||{}),g=f.terms?f.terms:[],h=b.getQueryFacet(e)||[];this.setValue(h),h.forEach(function(a){var b=g.every(function(b){return b.term!=a});b&&g.push({term:a,count:0})}),f.terms=g;try{this.config.sortFacetsByName&&this._sortFacetsByName(f)}catch(i){}this.setData("facet",f||{})},setParentNode:function(b){c.addEventListener(b,"click",this._onParentNodeClick.bind(this)),a.prototype.setParentNode.apply(this,arguments)},getName:function(){return this.getFacetName()},_syncValue:function(){var a=[],b=c.query("input",this.getParentNode());b.forEach(function(b){b.checked&&a.push(b.value)}),this.setRawValue(a)},getData:function(){var b=a.prototype.getData.apply(this,arguments),d=b.value=this.getValue(),e=b.facet,f=this._checkedClass;c.typeOf(d)=="array"&&e&&e.terms&&c.typeOf(e.terms)=="array"&&e.terms.forEach(function(a){var b=d.indexOf(a.term)!=-1;a.label=a.term+" ("+(a.count||0)+")",a.checked=b,a.checkedClass=b?f:""});return this._dataFilter(b)},setValue:function(a){c.typeOf(a)!="array"&&(a=[undefined,null,""].indexOf(a)!=-1?[]:[a]);var d=c.query("input",this.getParentNode());d.forEach(function(b){var c=a.indexOf(b.name)!=-1;b.checked=c}),b.prototype.setValue.apply(this,arguments)},getStringValue:function(){var a=this.getValue();return c.typeOf(a)=="array"?a.join(","):""},setStringValue:function(a){a=typeof a=="string"&&!!a?a.split(","):[];return this.setValue(a)},hasValue:function(){var a=this.getValue();return a&&a.length>0?!0:!1},_onParentNodeClick:function(a){var b=a.target;if(["INPUT","LABEL"].indexOf(b.tagName)!=-1){var d=this.getStringValue();this._syncValue();var e=this.getStringValue();d!=e&&this.dispatchEvent("userchange",this);var f=function(){var a=c.parents(b,this._termClass);return a.length?a[0]:!1}();parent&&f.classList[b.checked?"add":"remove"](this._checkedClass)}}});return e}),define("vpro/gui/search/filter/checkbox.histogram",["vpro/gui/search/filter/checkbox","vpro/purno/purno"],function(a,b){var c={dataFilter:function(a){if(a.facet&&a.facet.terms){var b=new Date;a.facet.terms.forEach(function(a){b.setTime(a.term),a.label=b.getFullYear()+" ("+a.count+")",a.fullYear=b.getFullYear()})}return a}},d=function(d){d=b.extend({},c,d||{}),a.call(this,d)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{_onInitSearch:function(a){a.addDateHistogramFacet(this.getFacetName());var b=this.getValue()||[];b.forEach(function(b){var c=new Date,d=new Date;c.setTime(b),d.setTime(b),d.setFullYear(d.getFullYear()+1),a.addNumericRange(this.getFacetName(),c.getTime(),d.getTime())}.bind(this))},_onInitSuggest:function(a){if(this.hasValue()){var b=this.getValue();b.forEach(function(b){var c=new Date,d=new Date;c.setTime(b),d.setTime(b),d.setFullYear(d.getFullYear()+1),a.addNumericRange(this.getFacetName(),c.getTime(),d.getTime())}.bind(this))}},_onSearchResult:function(a,c,d){var e=this.getFacetName(),f=b.extend({},a.getFacet(e)||{}),g=f.terms?f.terms:[],h=c.getNumericRange(e)||null;if(!h)this.setValue([]);else{var i=h.from;this.setValue([i]);var j=g.every(function(a){return a.term!=i});j&&g.push({term:i,count:0})}f.terms=g;try{this.config.sortFacetsByName&&this._sortFacetsByName(f)}catch(k){}this.setData("facet",f||{})}});return d}),define("vpro/gui/search/sorter",["vpro/gui/search/filter","vpro/gui/search/mustachecomponent","vpro/purno/purno"],function(a,b,c){var d={defaultFieldName:"",defaultSortDirection:"asc"},e=function(e){e=c.extend({},d,e||{}),e.apiClientEventMap=c.extend({initsearch:"_onInitSearch"},e.apiClientEventMap||{}),this._defaultFieldName=e.defaultFieldname,this._defaultSortDirection=e.defaultSortDirection,a.call(this,e),b.call(this,e)};e.prototype=c.clone(a.prototype),c.extend(e.prototype,b.prototype,{_onInitSearch:function(a){this.hasValue()?this.getValue().forEach(function(b){a.addSort(b.fieldName,b.direction)}):this._defaultFieldName&&a.addSort(this._defaultFieldName,this._defaultSortDirection)},setValue:function(b){var d=[];b&&(c.typeOf(b)!="array"&&(b=[b]),b.forEach(function(a){!!a&&c.typeOf(a.fieldName)==="string"&&d.push({fieldName:a.fieldName,direction:a.direction||this._defaultSortDirection})})),a.prototype.setValue.call(this,d)},getValue:function(){return this._value||[]},hasValue:function(){return this.getValue().length>0},getStringValue:function(){if(!this.hasValue())return"";var a=[];this.getValue().forEach(function(b){a.push(b.fieldName+":"+b.direction)});return a.join("|")},setStringValue:function(a){if(!a||c.typeOf(a)!=="string")a="";var b=[],d=this._defaultSortDirection;a.split("|").forEach(function(a){var c=a.split(":");!c[0]||b.push({fieldName:c[0],direction:c[1]||d})}),this.setValue(b)}});return e}),define("vpro/gui/selectbox",["vpro/purno/purno"],function(a){var b=!1;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){var c=document.documentElement,d=c.clientWidth||c.offsetWidth,e=c.clientHeight||c.offsetHeight;d>768||e>768||(b=!0)}var f={generateSelectNode:!0,selectNode:null,parentNode:null,simulateSelect:!b,simulatedSelectClass:"select",simulatedSelectedClass:"selected",simulatedOptionlistClass:"optionlist",simulatedOptionClass:"option",simulatedSelectedOptionClass:"selectedoption"},g=function(b){this._onWindowClickHandler=this._onWindowClick.bind(this),b=a.extend({},f,b),this.applyConfig(b),b.generateSelectNode&&!this.hasSelectNode()&&this._generateSelectNode()};g.prototype=a.clone(a.EventEmitter.prototype),a.extend(g.prototype,{applyConfig:function(b){this._config=a.extend(this._config||{},b);var c=["selectNode","parentNode"];for(var d in b)if(c.indexOf(d)!=-1&&b[d]){var e="set"+d.charAt(0).toUpperCase()+d.slice(1);this[e](b[d]),delete this._config[d]}},setParentNode:function(a){this._parentNode=a;if(this.hasSelectNode()){var b=this.getSelectNode();b.parentNode!==a&&a.appendChild(b),this._insertSimulatedSelect()}},getParentNode:function(){return this._parentNode||null},hasParentNode:function(){return this.getParentNode()!==null},generateSelectNode:function(){var a=document.createElement("select");this.setSelectNode(a)},setSelectNode:function(b){this._selectNode=b,a.addEventListener(b,"change",this._onSelectChange.bind(this));var c=b.parentNode;c&&this.setParentNode(c),this.createSimulatedSelect()},getSelectNode:function(){var a=this._selectNode;return a?a:null},hasSelectNode:function(){return this.getSelectNode()!==null},getOptionNodes:function(){if(!this.hasSelectNode())return[];var b=this.getSelectNode(),c=a.query("option",b);return c},isSimulated:function(){return!!this._config.simulateSelect},createSimulatedSelect:function(){if(!!this.isSimulated()){this._simulatedListHidden===!1?this.hideSimulatedOptionlistNode():this._simulatedListHidden=!0;var b=this._config,c=document.createElement("div");c.className=b.simulatedSelectClass,c.innerHTML=['<div class="'+b.simulatedSelectedClass+'"></div>','<div class="'+b.simulatedOptionlistClass+'" style="display: none;"></div>'].join(""),this._simulatedSelectNode=c,this._simulatedSelectedNode=c.querySelector("."+b.simulatedSelectedClass),this._simulatedOptionlistNode=c.querySelector("."+b.simulatedOptionlistClass),a.addEventListener(c,"click",this._onSimilatedSelectClick.bind(this)),a.addEventListener(this._simulatedOptionlistNode,"click",this._onSimilatedOptionlistClick.bind(this)),this.syncOptions(),this._hideOriginalSelect(),this._insertSimulatedSelect(),this.clearValue(),this.syncValue()}},_insertSimulatedSelect:function(){if(!(!this.hasParentNode()||!this.hasSelectNode()||!this.hasSimulatedSelectNode())){var a=this.getSimulatedSelectNode(),b=this.getParentNode(),c=this.getSelectNode();c.nextSibling?b.insertBefore(a,c.nextSibling):b.appendChild(a)}},_hideOriginalSelect:function(){if(!!this.hasSelectNode()){var b=this.getSelectNode();a.extend(b.style,{width:0,height:0,position:"absolute",left:"-99999px"})}},getSimulatedOptionlistNode:function(){return this._simulatedOptionlistNode||null},hideSimulatedOptionlistNode:function(){var b=this.getSimulatedOptionlistNode();!b||(b.style.display="none",this._simulatedListHidden=!0,a.removeEventListener(window,"click",this._onWindowClickHandler))},showSimulatedOptionlistNode:function(){var b=this.getSimulatedOptionlistNode();!b||(b.style.display="block",this._simulatedListHidden=!1,setTimeout(function(){a.addEventListener(window,"click",this._onWindowClickHandler)}.bind(this),1))},toggleSimulatedOptionlistNode:function(){this._simulatedListHidden?this.showSimulatedOptionlistNode():this.hideSimulatedOptionlistNode()},getSimulatedSelectNode:function(){var a=this._simulatedSelectNode;return a?a:null},hasSimulatedSelectNode:function(){var a=this.getSimulatedSelectNode();return!!a},syncOptions:function(){if(!!this.hasSimulatedSelectNode()){var a=this._simulatedOptionlistNode;a.innerHTML="";var b=this._config,c=[],d=document.createElement("div");d.className=b.simulatedOptionClass,this.getOptionNodes().forEach(function(b){var e=d.cloneNode(!1);e.innerHTML=b.innerHTML,c.push(e),a.appendChild(e)}.bind(this)),this._simulatedOptionNodes=c}},_getSelectValueIndex:function(a){a||(a=this.getSelectValue());var b=this.getOptionNodes(),c=b.length,d=-1;for(var e=0;e<c;e++)if(b[e].value==a){d=e;break}return d},getSimulatedOptionNodes:function(){return this._simulatedOptionNodes||[]},_getSimulatedOptionByIndex:function(a){var b=this.getSimulatedOptionNodes(),c=b[a];return typeof b[a]=="undefined"?null:c},_getSimulatedOptionIndexByNode:function(a){return this.getSimulatedOptionNodes().indexOf(a)},getSelectValue:function(){if(!this.hasSelectNode())return"";var a=this.getSelectNode();return a.value||""},syncValue:function(){this.setRawValue(this.getSelectValue())},getValue:function(){var a=this._value;return a?a:""},setValue:function(a){this.hasSelectNode()&&(this.getSelectNode().value=a),this.setRawValue(a)},setRawValue:function(a){var b=this.getValue(),c=b!=a;this._value=a,c&&(this._onValueChange(),this.dispatchEvent("valuechange",a,b))},clearValue:function(){this._value=null,this._onValueChange(),this.dispatchEvent("valuereset")},_setValueBySimulatedOptionNode:function(a){var b=this._getSimulatedOptionIndexByNode(a);if(b===-1)this.setValue("");else{var c=this.getOptionNodes(),d=c[b];d?this.setValue(d.value):this.setValue("")}},_setSimulatedSelectedOption:function(a){var b=this._config.simulatedSelectedOptionClass;this.getSimulatedOptionNodes().forEach(function(a){a.classList.remove(b)}),a.classList.add(b),this._simulatedSelectedNode.innerHTML=a.innerHTML},_onSimilatedOptionlistClick:function(b){var c=b.target,d;this._getSimulatedOptionIndexByNode(c)!=-1?d=c:a.parents(c,"."+this._config.simulatedOptionClass).forEach(function(a){this._getSimulatedOptionIndexByNode(a)!=-1&&(d=a)}.bind(this)),d&&this._setValueBySimulatedOptionNode(d),this.hideSimulatedOptionlistNode()},_onSimilatedSelectClick:function(b){var c=this.getSimulatedOptionlistNode(),d=b.target;d!=c&&a.parents(d).indexOf(c)==-1&&this.toggleSimulatedOptionlistNode()},_onWindowClick:function(b){var c=b.target,d=this.getSimulatedSelectNode();c!=d&&a.parents(c).indexOf(d)==-1&&this.hideSimulatedOptionlistNode()},_onValueChange:function(){if(!!this.isSimulated()){var a=this._getSelectValueIndex(),b=this._getSimulatedOptionByIndex(a);b||(b=document.createElement("div")),this._setSimulatedSelectedOption(b)}},_onSelectChange:function(){this.syncValue()}});return g}),define("vpro/gui/search/sorter/selectbox",["vpro/gui/search/sorter","vpro/gui/selectbox","vpro/purno/purno"],function(a,b,c){var d={template:["<select>","{{#sortOptions}}",'<option value="{{sortConfigHash}}">',"{{title}}","</option>","{{/sortOptions}}","</select>"].join("")},e=function(b){b=c.extend({},d,b||{}),this.addEventListener("rendered",this._onRendered.bind(this)),a.call(this,b),b.sortOptions&&this.setSortOptions(b.sortOptions)};e.prototype=c.clone(a.prototype),c.extend(e.prototype,a.prototype,{_onRendered:function(a){var c=a.querySelector("select"),d=new b({selectNode:c});d.addEventListener("valuechange",this._onSelectChange.bind(this)),this._selectCmp=d,this._selectNode=c},_onSelectChange:function(){if(this._changeLock!==!0){var a=this._selectNode.value;(this._sortOptions||[]).forEach(function(b){if(b.sortConfigHash==a){var c=this.getValue();JSON.stringify(c)!=a&&(this.setValue(b.sortConfig),this.dispatchEvent("userchange",this))}}.bind(this))}},setValue:function(){a.prototype.setValue.apply(this,arguments),this._selectNode&&(this._changeLock=!0,this._selectNode.value=JSON.stringify(this.getValue()),this._changeLock=!1)},getSortOption:function(){return this._sortOptions||[]},setSortOptions:function(a){var b=[],d=this._defaultSortDirection;(a||[]).forEach(function(a){if(c.typeOf(a)==="object"){var e=[],f=a.sortConfig;f&&(c.typeOf(f)!="array"&&(f=[f]),f.forEach(function(a){switch(c.typeOf(a)){case"object":e.push({fieldName:a.fieldName||"",direction:a.direction||d});break;case"string":e.push({fieldName:a,direction:d})}})),b.push({title:a.title?a.title:"",sortConfig:e,sortConfigHash:JSON.stringify(e)})}}),this._sortOptions=b,this.setData("sortOptions",b)}});return e}),define("vpro/woord/js/view/searchform",["vpro/util/date","vpro/gui/search/component","vpro/gui/search/resultlist","vpro/gui/search/pagenav","vpro/gui/search/filtermanager","vpro/gui/search/filter/autocomplete","vpro/gui/search/filter/checkbox","vpro/gui/search/filter/checkbox.histogram","vpro/gui/search/sorter/selectbox"],function(a,b,c,d,e,f,g,h,i){var j={generatedNodeClass:"searchForm",searchClass:"searching",searchPageClass:"searching-page",hitsPerPage:8,template:['<div class="query">','<div class="favorites-wrapper">','<div class="icon"></div>',"<span>mijn favorieten</span>","</div>",'<div class="queryfield"></div>','<div class="advanced-options">','<div class="facets active">','<div class="facet-toggle">verfijnen</div>','<div class="facet genre"></div>','<div class="facet tag"></div>','<div class="facet broadcaster"></div>','<div class="facet program"></div>','<div class="facet publishyear"></div>',"</div>","</div>","</div>",'<div class="query-info">','<span class="found">gevonden</span>','<div class="query-info-inner">','<span class="result-count"></span>','<span class="query-description"></span>','<div class="sort-outer">','<div class="sort-wrapper">','<span class="sort-description">sorteer op: </span>','<div class="sort-selectbox"></div>',"</div>","</div>","</div>","</div>",'<div class="loader-wrapper"><div class="loader"></div></div>','<div class="results hidden"></div>','<div class="pagenav hidden"></div>'].join(""),resultTemplate:["{{^totalHits}}",'<span class="noresult">',"Er zijn geen resultaten gevonden met deze zoekopdracht","</span>","{{/totalHits}}","{{#hits}}","{{^segmentId}}",'<div class="result program{{^highlight}} dummy{{/highlight}}" data-urn="{{programId}}">','<div class="visualisation"></div>','<span class="title">',"{{title}}","{{#publishDate}}",' <span class="publishDate">{{publishDate}}</span>',"{{/publishDate}}","</span>","{{#subTitle}}",'<span class="subTitle">{{subTitle}}</span>',"{{/subTitle}}","{{#highlight}}",'<div class="highlights">',"{{#description}}",'<span class="highlight">{{{.}}}</span>',"{{/description}}","</div>","{{/highlight}}",'<div class="meta">',"{{#durationHuman}}",'<span class="duration">',"{{durationHuman}}","</span>","{{/durationHuman}}","{{#genres}}",'<span class="genres">{{genres}}</span>',"{{/genres}}",'<span class="broadcasters">',"{{#broadcasters}}",'<span class="broadcaster">{{.}}</span>',"{{/broadcasters}}","</span>","</div>","</div>","{{/segmentId}}","{{#segmentId}}",'<div class="result segment" data-urn="{{program.id}}"{{#start}} data-start="{{start}}"{{/start}}{{#stop}} data-stop="{{stop}}"{{/stop}}>','<div class="meta">',"{{#startHMS}}",'<span class="duration">',"{{startHMS}} - {{stopHMS}}","</span>","{{/startHMS}}","{{#genres}}",'<span class="genres">{{genres}}</span>',"{{/genres}}",'<span class="broadcasters">',"{{#broadcasters}}",'<span class="broadcaster">{{.}}</span>',"{{/broadcasters}}","</span>","</div>",'<span class="title">{{title}}</span>',"{{#highlight}}",'<div class="highlights">',"{{#description}}",'<span class="highlight">{{{.}}}</span>',"{{/description}}","</div>","{{/highlight}}","</div>","{{/segmentId}}","{{/hits}}"].join(""),resultCountTemplate:["{{#totalHits}}","{{totalHits}}","{{/totalHits}}","{{^totalHits}}","geen","{{/totalHits}}","{{#oneHit}}"," resultaat","{{/oneHit}}","{{^oneHit}}"," resultaten","{{/oneHit}}"].join(""),facetCheckboxTemplate:["{{#title}}",'<div class="title facet-title {{facetName}} {{termsVisibility}}">{{title}}:{{checkedClass}}</div>',"{{/title}}",'<div class="facet-term-wrapper {{termsVisibility}} ">','<span class="facet-terms">',"{{#facet}}","{{#terms}}",'<span class="term{{#checked}} {{checkedClass}}{{/checked}}">','<input id="facet_{{facetName}}_{{term}}" class="term-checkbox" type="checkbox" value="{{term}}"',"{{#checked}}",' checked="checked"',"{{/checked}}"," />",'<label for="facet_{{facetName}}_{{term}}" class="term-label">','{{^fullYear}}{{term}}{{/fullYear}}{{#fullYear}}{{fullYear}}{{/fullYear}} <span class="term-count">({{count}})</span>',"</label>","</span>","{{/terms}}","{{/facet}}","</span>","{{#facet}}{{#terms.length}}",'<span class="total-terms {{facetName}}">',"{{#allTermsMessage}}{{allTermsMessage}}{{/allTermsMessage}} ({{terms.length}})","</span>{{/terms.length}}{{/facet}}","</div>","{{^facet.terms}}","{{#noTermsMessage}}",'<span class="no-terms">{{noTermsMessage}}</span>',"{{/noTermsMessage}}","{{/facet.terms}}"].join(""),pageNavTemplate:["{{#hasPages}}","{{#nextIndex}}",'<span class="more" data-index="{{nextIndex}}" title="laat meer zoekresultaten zien">volgende {{nextHitsCount}} resultaten</span> ',"{{/nextIndex}}","{{/hasPages}}"].join(""),autocompleteTemplate:['<div class="autocomplete">','<input type="text" id="{{id}}" name="{{name}}" value="{{query}}" autocomplete="off" autocorrect="off" autocapitalize="off" />',"{{#clearButton}}",'<button class="clear" type="button"></button>',"{{/clearButton}}",'<label for="{{id}}" class="inactive-label">{{title}}</label>','<label for="{{id}}" class="active-label">{{title}}</label>','<div class="suggestions"></div>',"</div>"].join(""),elementMap:{_queryEl:".query",_queryFieldEl:".queryfield",_queryInputField:".queryinput",_facetsEl:".facets",_facetTogleEl:".facet-toggle",_genreCheckboxEl:".facet.genre",_tagCheckboxEl:".facet.tag",_broadcasterCheckboxEl:".facet.broadcaster",_programCheckboxEl:".facet.program",_publishYearCheckboxEl:".facet.publishyear",_queryInfoEl:".query-info",_queryDescriptionEl:".query-description",_clearQueryEl:".clear-query",_sorterSelectboxEl:".sort-selectbox",_resultCountEl:".result-count",_resultEl:".results",_pageNavEl:".pagenav",_favoritesIconEl:".favorites-wrapper .icon",_favoritesTextEl:".favorites-wrapper span"}},k=function(a){this._initComponents(purno.extend({},j,a||{})),this.addEventListener("apiclientchange",this._onApiClientChange.bind(this)),this.addEventListener("templateinit",this._bindComponentNodes.bind(this)),b.call(this,a)};k.prototype=purno.clone(b.prototype),purno.extend(k.prototype,{_initComponents:function(a){this._resultCmp=new c({template:a.resultTemplate,appendResults:!0,processHits:this._processHits.bind(this)}),this._resultCountCmp=new c({template:a.resultCountTemplate}),this._pageNavCmp=new d({template:a.pageNavTemplate}),this._filterManager=new e({filters:[this._textqueryCmp=new f({name:"q",template:a.autocompleteTemplate}),this._genreCheckboxCmp=new g({data:{title:"genre",noTermsMessage:"geen genres gevonden",allTermsMessage:"toon alle genres",termsVisibility:"opened"},facetName:"genres",facetFieldName:"genres.untouched",template:a.facetCheckboxTemplate}),this._tagCheckboxCmp=new g({data:{title:"trefwoord",noTermsMessage:"geen trefwoorden gevonden",allTermsMessage:"toon alle trefwoorden ",termsVisibility:""},facetName:"tags",facetFieldName:"tags.untouched",template:a.facetCheckboxTemplate}),this._broadcasterCheckboxCmp=new g({data:{title:"omroep",noTermsMessage:"geen omroepen gevonden",allTermsMessage:"toon alle omroepen ",termsVisibility:""},facetName:"broadcasters",facetFieldName:"broadcasters.untouched",template:a.facetCheckboxTemplate}),this._programCheckboxCmp=new g({data:{title:"programma",noTermsMessage:"geen programmas gevonden",allTermsMessage:"toon alle programmas ",termsVisibility:""},facetName:"programTitles",template:a.facetCheckboxTemplate}),this._publishYearCheckboxCmp=new h({data:{title:"jaar",noTermsMessage:"geen jaartallen gevonden",allTermsMessage:"toon alle jaartallen ",termsVisibility:""},facetName:"publishDate",template:a.facetCheckboxTemplate}),this._sorterSelectboxCmp=new i({name:"sortering",sortOptions:[{title:"relevantie"},{title:"oud > nieuw",sortConfig:[{fieldName:"publishDate",direction:"asc"},{fieldName:"_type",direction:"desc"},{fieldName:"start",direction:"asc"}]},{title:"nieuw > oud",sortConfig:[{fieldName:"publishDate",direction:"desc"},{fieldName:"_type",direction:"desc"},{fieldName:"start",direction:"asc"}]}]})]}),this._filterManager.addEventListener("userchange",this._onFilterChange.bind(this))},getFilterManager:function(){return this._filterManager||null},_processHits:function(b){var c=[],d;b.forEach(function(b){var e=b.programId||(b.program?b.program.id||0:0);b.subTitle==b.title&&delete b.subTitle;if(b._type==="segment"){if(e!==d){var f=purno.extend({},b,b.program);f.highlight&&delete f.highlight,delete f.description,delete f.segmentId,f.subTitle==f.title&&delete f.subTitle,f.programId=f.id,f.publishDate&&(f.publishDate=a.format("j M Y",f.publishDate/1e3)),f.durationHuman="";if(f.duration){var g=Math.ceil(f.duration/6e4);g=g<1||isNaN(g)?1:g,f.durationHuman=g+" "+(g===1?"minuut":"minuten")}c.push(f)}b.stop=b.duration+b.start,b.startHMS=a.millisecondsToHms(b.start),b.stopHMS=a.millisecondsToHms(b.stop)}else if(b._type==="program"){b.durationHuman="";if(b.duration){var g=Math.ceil(b.duration/6e4);g=g<1||isNaN(g)?1:g,b.durationHuman=g+" "+(g===1?"minuut":"minuten")}b.publishDate&&(b.publishDate=a.format("j M Y",b.publishDate/1e3))}d=e,c.push(purno.extend({},b))});return c},_onFilterChange:function(){var a=this.getFilterManager();this.dispatchEvent("filterchange",this,a)},_onApiClientChange:function(a){a.addEventListener("initsearch",this._onSearchInit.bind(this)),a.addEventListener("searchresult",this._onSearchResult.bind(this)),this._resultCmp.setApiClient(a),this._resultCountCmp.setApiClient(a),this._pageNavCmp.setApiClient(a),this._filterManager.setApiClient(a)},_onSearchInit:function(a){a.addHighlight("description"),a.setSize(this.getConfig("hitsPerPage")),this.hasParentNode()&&(a.getFrom()?this.getParentNode().classList.add(this.getConfig("searchPageClass")):this.getParentNode().classList.add(this.getConfig("searchClass")))},_onFavoritesClick:function(){this.dispatchEvent("favoriteclick")},_onSearchResult:function(a,b){this._generateQueryDescription(b);if(this.hasParentNode()){var c=this.getParentNode().classList;c.remove(this.getConfig("searchClass")),c.remove(this.getConfig("searchPageClass"))}},_onResultsClick:function(a){var b,c=a.target;c.classList.contains("result")?b=c:purno.parents(a.target,".result").forEach(function(a){b=a});if(!!b){var d={},e=b.getAttribute("data-urn"),f=b.getAttribute("data-start"),g=b.getAttribute("data-stop");e&&(d.urn=e),f&&(d.start=f),g&&(d.stop=g),this.dispatchEvent("resultclick",a,d,b)}},_onPageNavClick:function(a){var b=a.target;!b.classList.contains("more")||this.getApiClient().search({from:Number(b.getAttribute("data-index"))})},_bindComponentNodes:function(){purno.addEventListener(this._facetTogleEl,"click",this.toggleFacets.bind(this)),this._resultCountCmp.setParentNode(this._resultCountEl),this._resultCmp.setParentNode(this._resultEl),purno.addEventListener(this._resultEl,"click",this._onResultsClick.bind(this)),this._pageNavCmp.setParentNode(this._pageNavEl),purno.addEventListener(this._pageNavEl,"click",this._onPageNavClick.bind(this)),this._textqueryCmp.setParentNode(this._queryFieldEl),this._genreCheckboxCmp.setParentNode(this._genreCheckboxEl),this._tagCheckboxCmp.setParentNode(this._tagCheckboxEl),this._broadcasterCheckboxCmp.setParentNode(this._broadcasterCheckboxEl),this._programCheckboxCmp.setParentNode(this._programCheckboxEl),this._publishYearCheckboxCmp.setParentNode(this._publishYearCheckboxEl),this._sorterSelectboxCmp.setParentNode(this._sorterSelectboxEl),purno.addEventListener(this._queryDescriptionEl,"click",this._onQueryDescriptionClick.bind(this)),purno.addEventListener(this._favoritesIconEl,"click",this._onFavoritesClick.bind(this)),purno.addEventListener(this._favoritesTextEl,"click",this._onFavoritesClick.bind(this)),purno.addEventListener(this._genreCheckboxEl,"click",this._onFacetTitleClick.bind(this)),purno.addEventListener(this._tagCheckboxEl,"click",this._onFacetTitleClick.bind(this)),purno.addEventListener(this._broadcasterCheckboxEl,"click",this._onFacetTitleClick.bind(this)),purno.addEventListener(this._programCheckboxEl,"click",this._onFacetTitleClick.bind(this)),purno.addEventListener(this._publishYearCheckboxEl,"click",this._onFacetTitleClick.bind(this))},_generateQueryDescription:function(a){var b="",c=a.getQueryText()||"",d=a.getQueryFacets(),e=[],f=document.createElement("div");c.length&&(f.innerHTML=c,b+=[", gezocht naar ",'<span class="query-description-text">',f.innerHTML,"</span>"].join(""));for(var g in d)d[g].forEach(function(a){f.innerText=a,e.push(['<label for="facet_'+g+"_"+f.innerHTML+'" class="query-description-term">',a,"</label>"].join(""))});e.length&&(b+=" in "+e.join(", "));if(c.length||e.length)b+='<span class="clear-query">wis zoekopdracht'+(e.length>1?"en":"")+"</span>";this._queryDescriptionEl.innerHTML=b},_onQueryDescriptionClick:function(a){var b=a.target.classList;b.contains("query-description-text")?this._textqueryCmp.focus():b.contains("clear-query")&&(this.clearForm(),this._onFilterChange())},toggleFacets:function(){this._facetTogleEl.parentNode.classList.toggle("active")},_onFacetTitleClick:function(a){var b;a.target.classList.contains("facet-title")&&(b=$(a.target).parent()),a.target.classList.contains("total-terms")&&(b=$(a.target).parent().parent()),b&&($(".facet-term-wrapper",b).toggleClass("opened"),$(".facet-title",b).toggleClass("opened"),this.getFilterManager()._eachFilter(function(b){a.target.classList.contains(b.getName())&&(b._data.termsVisibility=="opened"?b._data.termsVisibility="":b._data.termsVisibility="opened")}))},setConfig:function(a){a=purno.extend({},j,a||{}),b.prototype.setConfig.call(this,a)},clearFilters:function(){this.getFilterManager()._eachFilter(function(a){a instanceof g&&a.setValue([])})},clearForm:function(){this.getFilterManager().setValue({})},search:function(){var a=!1,b=this._sorterSelectboxCmp.getName();this.getFilterManager()._eachFilter(function(c){!a&&c.hasValue()&&c.getName()!=b&&(a=!0),c.hasValue()&&(c._data.termsVisibility="opened")});var c=a?"remove":"add";this._resultEl.classList[c]("hidden"),this._pageNavEl.classList[c]("hidden"),this._queryInfoEl.classList[c]("hidden"),this.getApiClient().search()}});return k}),define("vpro/woord/js/controller/Search",["vpro/woord/js/util","vpro/util/elasticsearch/client","vpro/woord/js/view/searchform"],function(a,b,c){return a.Stapes.create().extend({init:function(a,b){this.config=b,this.woord=a,this.parentNode=document.querySelector(b.containers.search),this.searchApiRoot=b.searchApiRoot,this.siteRoot=b.siteRoot,this.searchClient=this.getSearchClient(),this.searchForm=this.getSearchForm(),this.favoriteMediaStore=b.favoriteMediaStore,this.openFavoriteList=b.openFavoriteListHandler.bind(this),this.bindEventHandlers()},bindEventHandlers:function(){this.searchForm.addEventListener("filterchange",function(a,b){this.woord.goSearch(b.getStringValue())}.bind(this)),this.searchForm.addEventListener("resultclick",function(a,b){var c=!1;if(b.start&&b.stop||b.stop)c={end:Math.round(b.stop/1e3),visualizer:"annotation"},c.start=b.start?Math.round(b.start/1e3):0;this.woord.goPlay(b.urn,c)}.bind(this)),this.searchForm.addEventListener("favoriteclick",function(){this.openFavoriteList({list:""})}.bind(this))},getSearchClient:function(){return new b({documentTypes:"segment program",server:this.searchApiRoot,searchIndex:"woord",queryBuilder:{textBoostFactors:[{fieldName:"title",boost_factor:3,type:"text"},{fieldName:"subTitle",boost_factor:2,type:"text"},{fieldName:"programTitles",boost_factor:2,type:"text"},{fieldName:"description",boost_factor:1,type:"text"},{fieldName:"tags",boost_factor:2,type:"facet"},{fieldName:"broadcasters",boost_factor:2,type:"facet"},{fieldName:"genres",boost_factor:1,type:"facet"}],suggestionSize:6,suggestionFacets:["title","description","subTitle","tags","broadcasters","genres"]}})},getSearchForm:function(){return new c({apiClient:this.searchClient,parentNode:this.parentNode})},setQuery:function(a){a=a||{};var b="Zoek";a.q&&(b+=": "+a.q),this.woord.setTitle(b);var c=JSON.stringify(a);if(this._lastQueryString!=c){this._lastQueryString=c;var d=this.searchForm;d.getFilterManager().setStringValue(a),d.search()}}})}),define("vpro/woord/js/view/PlayAbstract",["jquery","vpro/woord/js/view/Comments"],function(a,b){var c=function(){};return{init:function(){this.initView.apply(this,arguments)},initView:function(b){b=b||{},this.templates=b.templates,this.relatedTemplate=b.relatedTemplate||this.templates["media-related-list"],this.$el=a(b.container),this.disqusShortname=b.disqusShortname,this.el=this.$el.get(0),this.error=b.errorHandler,this.itemData=null,this.player=b.player,this.bindEventHandlers(),this.initCommentsView()},initCommentsView:function(){this.commentsView=new b({disqusShortname:this.disqusShortname})},setFavoriteActive:function(a){a?this.$el.find(".favoritepage").addClass("active"):this.$el.find(".favoritepage").removeClass("active")},bindEventHandlers:function(){this.$el.on("click",".sharepage",function(a){this.emit("activate:share")}.bind(this)),this.$el.on("click",".favoritepage",function(a){this.emit("activate:favorite")}.bind(this)),this.$el.on("click",".media-related-container-toggle",function(a){this.toggleRelated()}.bind(this)),this.$el.on("click",".tags .showmore",function(){this.$el.find(".tags > a").show(),this.$el.find(".showmore").hide()}.bind(this)),this.$el.on("click",".broadcasters .broadcaster",function(b){var c=a(b.target).text();this.emit("activate:broadcaster",c)}.bind(this)),this.$el.on("click",".series .serie",function(b){var c=a(b.target).text();this.emit("activate:serie",c)}.bind(this)),this.$el.on("click",".genres .genre",function(b){var c=a(b.target).text();this.emit("activate:genre",c)}.bind(this)),this.$el.on("click",".tags .tag",function(b){var c=a(b.target).text();this.emit("activate:tag",c)}.bind(this)),this.$el.on("click",".teaserlink",function(b){var c=a(b.target).closest(".teaserlink").data("urn");c&&this.emit("activate:urn",c)}.bind(this))},toggleRelated:function(){var a=this._getRelatedContainerEl();a.hasClass("open")?this.hideRelated():this.showRelated()},_getRelatedContainerEl:function(){return this.$el.find(".media-related-container")},scrollToRelated:function(){var a=this._getRelatedContainerEl();a.each(function(){this.scrollIntoView()})},showRelated:function(){var a=this._getRelatedContainerEl();a.addClass("open"),this.emit("related:show")},hideRelated:function(){var a=this._getRelatedContainerEl();a.removeClass("open"),this.emit("related:hide")},renderRelated:function(a){var b=this.relatedTemplate({relatedItems:a});this.$el.find(".media-related-container-content-placeholder").html(b)},getVisualizerState:function(){return null},hideInfoScreen:c,showInfoScreen:c,activateAnnotations:c,activateMovingBars:c,activateSlideshow:c}}),define("vpro/woord/js/view/InfoScreen",[],function(){function a(a){this.el=a.el,this.template=a.template,this.activeVisualizer=null}purno.extend(a.prototype,purno.EventEmitter.prototype),purno.extend(a.prototype,{bindEventHandlers:function(){purno.addEventListener(this.el,"click",function(a){a.target.matchesSelector("#infoscreen .readmore")&&this.dispatchEvent("activate:readmore")}.bind(this)),purno.addEventListener(this.el.querySelector(".visualizer-list"),"click",function(a){var b=purno.parents(a.target,".visualizer-list > li");if(b.length){var c=b[0].getAttribute("data-type");this.activeVisualizer=c,this.dispatchEvent("activate:visualizer")}}.bind(this))},getActiveVisualizer:function(){return this.activeVisualizer},hide:function(){this.wrapper.classList.add("invisible")},hideBroadcaster:function(){this.el.querySelector(".broadcasters").style.display="none"},render:function(a){a.broadcasterClassName=a.firstBroadcaster.toLowerCase(),this.el.innerHTML=this.template(a),this.wrapper=this.el.querySelector("#infoscreen"),this.showBroadcaster(),this.bindEventHandlers()},show:function(){this.wrapper.classList.remove("invisible")},showBroadcaster:function(){this.el.querySelector(".broadcasters").style.display="inline-block"},showLongDescription:function(){this.el.querySelector(".readmore").style.display="none",this.el.querySelector(".longdescription").classList.remove("hidden")}});return a}),define("vpro/util/dragger",["jquery"],function(a){function b(b,c,d){this.scope=a(c||document.documentElement),this.draggable=this.scope.find(b),this.draggableSelector=b,d=d||{},this.constrain=d.constrain===!1?!1:!0,this.allowX=d.allowX===!1?!1:!0,this.allowY=d.allowY===!1?!1:!0,"ontouchstart"in window?this.scope.bind("touchstart",this.handleTouchStart.bind(this)):this.scope.bind("mousedown",this.handleMouseDown.bind(this)),this.x=0,this.y=0,this.dragging=!1}b.prototype={grab:function(){this.draggable.trigger("dragstart"),this.dragging=!0},release:function(){this.draggable.trigger("dragend"),this.dragging=!1},drag:function(a){var b,c,d,e;b=a.pageX-this.scope.offset().left,c=a.pageY-this.scope.offset().top,d=this.scope.outerWidth?this.scope.outerWidth():this.scope.width(),e=this.scope.outerHeight?this.scope.outerHeight():this.scope.height(),b=parseFloat(100*b/d),c=parseFloat(100*c/e),this.move(b,c),this.draggable.trigger("dragmove"),this.dragging=!0},move:function(a,b){this.constrain&&(a=a>100?100:a<0?0:a,b=b>100?100:b<0?0:b),this.x=a,this.y=b;var c={};this.allowX&&(c.left=a+"%"),this.allowY&&(c.top=b+"%"),this.draggable.css(c)},handleMouseDown:function(b){b.preventDefault(),a(b.target).closest(this.draggableSelector).length?(a(document).bind("mouseup.dragger mouseleave.dragger",this.handleMouseUp.bind(this)),a(document).bind("mousemove.dragger",this.handleMouseMove.bind(this)),this.grab()):(this.grab(),this.drag(b),this.release())},handleMouseMove:function(a){a.preventDefault(),this.drag(a)},handleMouseUp:function(b){b.preventDefault(),a(document).unbind("mousemove.dragger mouseup.dragger mouseleave.dragger"),this.release()},handleTouchStart:function(b){b.preventDefault(),b=b.originalEvent.targetTouches[0],a(b.target).closest(this.draggableSelector).length?(this.scope.bind("touchmove.dragger",this.handleTouchMove.bind(this)),this.scope.bind("touchend.dragger touchcancel.dragger touchleave.dragger gestureend.dragger gesturechange.dragger",this.handleTouchEnd.bind(this)),this.grab()):(this.grab(),this.drag(b),this.release())},handleTouchMove:function(a){a.preventDefault(),a=a.originalEvent.targetTouches[0],this.drag(a)},handleTouchEnd:function(a){a.preventDefault(),this.scope.unbind("touchemove.dragger touchend.dragger touchcancel.dragger touchleave.dragger gestureend.dragger gesturechange.dragger"),this.release()},on:function(a,b){this.draggable.bind(a,b)},addEventListener:function(a,b){this.draggable.bind(a,b)}};return b}),define("vpro/mediaplayer/js/Controls",["jquery","ext/stapes/0.8.1/stapes","vpro/util/dragger"],function(a,b,c){var d="ontouchend"in window?"touchend":"click",e=/ipad/i.test(navigator.platform||""),f=!/ipad|iphone|ipod/i.test(navigator.platform||""),g=!/iphone|ipod/i.test(navigator.platform||""),h=b.subclass({constructor:function(a){this.html='<div class="player-controls">'+(a||h.HTML)+"</div>"},show:function(){this.node.fadeIn()},hide:function(){this.node.fadeOut()},createNode:function(){var b=a(this.html);this.setNode(b);return b},setNode:function(a){this.initializeNode(a),this.node=a},initializeNode:function(a){this.playpause=a.find(".player-playpause"),this.elapsed=a.find(".player-time-elapsed"),this.duration=a.find(".player-time-duration"),this.remaining=a.find(".player-time-remaining"),this.elapsedBar=a.find(".player-scrubber-elapsed"),this.progressBar=a.find(".player-scrubber-progress"),this.volumeBar=a.find(".player-volume-bar"),this.volumeDragger=a.find(".player-volume-dragger"),this.playpause.length&&this.playpause.bind(d,function(){this.playpause.is(".paused")?this.emit("request:play"):this.emit("request:pause")}.bind(this)),this.fullscreen=a.find(".player-fullscreen"),this.fullscreen.length&&(g?this.fullscreen.bind(d,function(){this.emit("request:togglefullscreen")}.bind(this)):this.fullscreen.addClass("player-control-disabled")),this.mute=a.find(".player-mute"),this.mute.length&&(f?this.mute.bind(d,function(){this.mute.is(".muted")?this.emit("request:unmute"):this.emit("request:mute")}.bind(this)):this.mute.addClass("player-control-disabled")),this.volumeDragger.length&&!f&&this.volumeDragger.addClass("player-control-disabled"),a.find(".player-volume-head").length&&(this.volume=new c(".player-volume-head",a.find(".player-volume"),{allowY:!1}),this.volume.on("dragmove",function(){this.emit("request:volumechange",this.volume.x/100)}.bind(this))),a.find(".player-scrubber-head").length&&(this.scrubberHead=a.find(".player-scrubber-head"),this.time=new c(".player-scrubber-head",a.find(".player-scrubber"),{allowY:!1}),this.time.on("dragend",function(){this.emit("request:timeupdate",parseFloat(this.time.x/100)),this.updateElapsedBar()}.bind(this))),a.on("mouseleave ",function(){this.handleMouseLeave()}.bind(this)),a.on("mouseenter ",function(){this.handleMouseEnter(),this.isTouchDevice()&&this.handleMouseLeave()}.bind(this))},isHovered:function(){return this.hovered||!1},handleMouseLeave:function(){this.hovered=!1,this.node.removeClass("controls-hover")},handleMouseEnter:function(){this.hovered=!0,this.node.addClass("controls-hover")},reset:function(b){if(!!this.node){var c=!!b&&!!b.controllable;a(this.node)[c?"removeClass":"addClass"]("player-controls-disabled"),e&&this.fullscreen&&this.fullscreen.length&&this.fullscreen[b&&b.name==="video"?"removeClass":"addClass"]("player-control-disabled")}},destroyNode:function(){!this.node||this.node.remove()},getNode:function(){return this.node},updatePause:function(a){this.playpause&&(a?this.playpause.addClass("paused"):this.playpause.removeClass("paused"))},updateMute:function(a){this.mute&&(a?this.mute.addClass("muted"):this.mute.removeClass("muted"))},updateVolume:function(a){this.volume&&!this.volume.dragging&&this.volume.move(a*100,0),this.volumeBar&&this.volumeBar.length&&this.volumeBar.css("width",a*100+"%")},updateTime:function(a){this.time&&!this.time.dragging&&this.time.move(a*100,0),this.updateElapsedBar()},updateRemaining:function(a){!this.remaining||this.remaining.html("-"+this.formatTime(a))},updateElapsed:function(a){!this.elapsed||this.elapsed.html(this.formatTime(a))},updateElapsedBar:function(){if(!!this.elapsedBar&&!!this.elapsedBar.length){var a;if(this.scrubberHead&&this.scrubberHead.length)try{a=this.scrubberHead[0].style.left}catch(b){a=this.scrubberHead.css("left")}this.elapsedBar.css("width",a?a:0)}},updateDuration:function(a){!this.duration||this.duration.html(this.formatTime(a))},updateBuffered:function(a,b,c){if(!!this.progressBar){if(!a||!b||!c)return;var d=a.length,e=0,f=0;while(d--)e=Math.max(e,a.end(d));e>f&&(e=e/c*100,this.progressBar.css({left:f,width:e+"%"}))}},updateSegments:function(b,c){if(!!this.node){this.node.find(".player-scrubber-segment").remove();var d;for(var e=b.length-1;e>=0;e--){d=b[e];var f=a('<div class="player-scrubber-segment '+(b.length>1?"player-scrubber-segment-multiple":"")+'"></div>');this.node.find(".player-scrubber").append(f),f.css({left:parseFloat(d.start/c*100)+"%",right:parseFloat(100-d.end/c*100)+"%"})}}},formatTime:function(a){var b=Math.round(parseFloat(a));if(isNaN(b)||b<=0)return"00:00";var c=Math.floor(b/3600);c=c>0?c+":":"";var d=Math.floor(b%3600/60);d=(d<10?"0":"")+d+":";var e=Math.floor(b%3600%60);e=(e<10?"0":"")+e;return c+d+e},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},addEventListener:function(a,b){return this.on.apply(this,arguments)}});h.HTML=['<div class="player-controlbar">','<div class="player-playpause player-button paused"></div>','<time class="player-time-elapsed">0:00</time>','<div class="player-scrubber-dragger">','<div class="player-scrubber">','<div class="player-scrubber-head"></div>','<div class="player-scrubber-elapsed"></div>','<div class="player-scrubber-progress"></div>',"</div>","</div>",'<div class="player-fullscreen player-button"></div>','<div class="player-mute player-button"></div>','<div class="player-volume-dragger">','<div class="player-volume">','<div class="player-volume-head"></div>','<div class="player-volume-bar"></div>',"</div>","</div>",'<time class="player-time-duration">0:00</time>','<time class="player-time-remaining">0:00</time>',"</div>"].join("");return h}),define("vpro/woord/js/view/PlayerControls",["vpro/mediaplayer/js/Controls","vpro/purno/purno","jquery"],function(a,b,c){var d={generateControls:!0,template:"",controlsEventMap:{"request:play":"_onControlsRequestPlay","request:pause":"_onControlsRequestPause","request:mute":"_onControlsRequestMute","request:unmute":"_onControlsRequestUnmute","request:timeupdate":"_onControlsRequestTimeUpdate","request:volumechange":"_onControlsRequestVolumeChange","request:togglefullscreen":"_onControlsRequestToggleFullScreen"},playerEventMap:{loadedmetadata:"_onPlayerLoadedMetaData",play:"_onPlayerPlay",pause:"_onPlayerPause",durationchange:"_onPlayerDurationChange",timeupdate:"_onPlayerTimeUpdate",volumechange:"_onPlayerVolumeChange",progress:"_onPlayerProgress",seeked:"_onPlayerSeeked"}},e=function(a){a=b.extend({},d,a||{}),this._config=a,this._createControlsEventHandlers(),this._createPlayerEventHandlers(),this.applyConfig(a),a.generateControls&&!this.hasControls()&&this.generateControls()};e.prototype=b.clone(b.EventEmitter.prototype),b.extend(e.prototype,{applyConfig:function(a){if(!!a){this._config=b.extend(this._config||{},a||{});for(var c in a){if(c.length<3)continue;var d="set"+c.substring(0,1).toUpperCase()+c.substring(1);b.typeOf(this[d])=="function"&&(this[d](a[c]),delete this._config[c])}}},getTemplate:function(){return this._template||""},setTemplate:function(a){this._template=a,this.dispatchEvent("templateset")},hasTemplate:function(){return!!this.getTemplate()},getControls:function(){return this._controls||null},setControls:function(a){this._onBeforeControlsSet(),this.dispatchEvent("beforecontrolsset"),this._controls=a,this._onControlsSet(),this.dispatchEvent("controlsset")},hasControls:function(){return!!this.getControls()},generateControls:function(){var b=this.getTemplate(),c=new a(b);this.setControls(c)},_onBeforeControlsSet:function(){this.hasControls()&&this.unbindControlsEvents()},_onControlsSet:function(){this._positionControlsNode(),this.bindControlsEvents(),this.syncAll()},_positionControlsNode:function(){if(!!this.hasControls()&&!!this.hasParentNode()){var a=this.getParentNode(),b=this.getControls(),c=b.getNode(),d=c?c.get(0):null;if(!d||!d.parentNode)d=b.createNode().get(0);a!=d&&a.appendChild(d)}},_createControlsEventHandlers:function(){var a=this._config.controlsEventMap;for(var b in a){var c=a[b];this[c+"Handler"]=this[c].bind(this)}},bindControlsEvents:function(){if(!!this.hasControls()){var a=this.getControls(),b=this._config.controlsEventMap;for(var c in b){var d=b[c]+"Handler";a.on(c,this[d])}}},unbindControlsEvents:function(){if(!!this.hasControls()){var a=this.getControls(),b=this._config.controlsEventMap;for(var c in b){var d=b[c]+"Handler";a.off(c,this[d])}}},setPlayer:function(a){this._onBeforePlayerSet(),this.dispatchEvent("beforeplayerset",a),this._player=a,this._onPlayerSet(),this.dispatchEvent("playerset",a)},getPlayer:function(){return this._player||null},hasPlayer:function(){return!!this.getPlayer()},_onBeforePlayerSet:function(){this.hasPlayer()&&this.unbindPlayerEvents()},_onPlayerSet:function(){this.bindPlayerEvents()},_createPlayerEventHandlers:function(){var a=this._config.playerEventMap;for(var b in a){var c=a[b];this[c+"Handler"]=this[c].bind(this)}},bindPlayerEvents:function(){if(!!this.hasPlayer()){var a=this.getPlayer(),b=this._config.playerEventMap;for(var c in b){var d=b[c]+"Handler";a.addEventListener(c,this[d])}}},unbindPlayerEvents:function(){if(!!this.hasControls()){var a=this.getPlayer(),b=this._config.playerEventMap;for(var c in b){var d=b[c]+"Handler";a.removeEventListener(c,this[d])}}},setParentNode:function(a){this._parentNode=a,this._onParentNodeSet(),this.dispatchEvent("parentnodeset",a)},_onParentNodeSet:function(){this._positionControlsNode()},getParentNode:function(){return this._parentNode||null},hasParentNode:function(){return!!this.getParentNode()},syncAll:function(){this.syncTiming(),this.syncPaused(),this.syncVolume(),this.syncProgress()},syncTiming:function(){if(!!this.hasControls()){var a=this.getControls(),b=0,c=0,d=0,e=0;if(this.hasPlayer()){var f=this.getPlayer();c=f.getDuration(),c=c&&c>0&&isFinite(c)?c:0,d=f.getCurrentTime(),d=d&&d>0&&isFinite(d)?d:0,b=c-d,e=!d&&!c?0:d/c}a.updateRemaining(b),a.updateDuration(c),a.updateElapsed(d),a.updateTime(e)}},syncPaused:function(){if(!!this.hasControls()){var a=this.hasPlayer()?this.getPlayer().getPaused():!0;a=a===!1?!1:!0,this.getControls().updatePause(a)}},syncVolume:function(){if(!!this.hasPlayer()&&!!this.hasControls()){var a=this.getControls();if(this.hasPlayer()){var b=this.getPlayer(),c=b.getMuted();c||a.updateVolume(b.getVolume()),a.updateMute(c)}else a.updateVolume(0),a.updateMute(!0)}},syncProgress:function(){if(!!this.hasControls()){var a=this.getControls();if(this.hasPlayer()){var b=this.getPlayer();a.updateBuffered(b.getBuffered(),b.getCurrentTime(),b.getDuration())}else a.updateBuffered(0,0,0)}},_onControlsRequestPlay:function(){if(!!this.hasPlayer()){var a=this.getPlayer();a.play()}},_onControlsRequestPause:function(){if(!!this.hasPlayer()){var a=this.getPlayer();a.pause()}},_onControlsRequestMute:function(){if(!!this.hasPlayer()){var a=this.getPlayer();a.setMuted(!0)}},_onControlsRequestUnmute:function(){if(!!this.hasPlayer()){var a=this.getPlayer();a.setMuted(!1)}},_onControlsRequestTimeUpdate:function(a){if(!!this.hasPlayer()){var b=this.getPlayer();b.setCurrentTime(a*b.getDuration())}},_onControlsRequestVolumeChange:function(a){if(!!this.hasPlayer()){var b=this.getPlayer();b.muted()&&b.muted(!1),b.setVolume(a)}},_onControlsRequestToggleFullScreen:function(){document.isFullScreen||document.mozFullScreen||document.webkitIsFullScreen?player.exitFullScreen():player.enterFullScreen()},_onPlayerLoadedMetaData:function(){this.syncTiming()},_onPlayerPlay:function(){this.syncPaused()},_onPlayerPause:function(){this.syncPaused()},_onPlayerDurationChange:function(){this.syncTiming()},_onPlayerTimeUpdate:function(){this.syncTiming()},_onPlayerVolumeChange:function(){this.syncVolume()},_onPlayerProgress:function(){this.syncProgress()},_onPlayerSeeked:function(){this.syncTiming()}});return e}),define("vpro/enrichedplayer/visualizerContainer",["vpro/purno/purno"],function(a){var b={initialVisualizer:0},c=function(c){c=a.extend({},b,c),this.visualizers=[],this._onVisualizerActivateHandler=this._onVisualizerActivate.bind(this),this._onVisualizerDeactivateHandler=this._onVisualizerDeactivate.bind(this),c.player&&(this.setPlayer(c.player),delete c.player),c.visualizerContainer&&(this.setVisualizerContainer(c.visualizerContainer),delete c.visualizerContainer),c.visualizers&&(c.visualizers.forEach(function(a){this.addVisualizer(a)},this),delete c.visualizers);if(c.initialVisualizer!==!1){var d=this.getVisualizer(c.initialVisualizer);d&&this.activateVisualizer(d)}this.config=c};c.prototype=a.clone(a.EventEmitter.prototype),a.extend(c.prototype,{setVisualizerContainer:function(a){this.visualizerContainer=a,this.visualizers.forEach(function(b){b.setParentNode(a),b.isActive()?this._onVisualizerActivate(b):this._onVisualizerDeactivate(b)})},getVisualizerContainer:function(){return this.visualizerContainer},getVisualizer:function(a){var b,c=this.visualizers;switch(typeof a){case"string":this.visualizers.forEach(function(c){c.name===a&&(b=c)},this);break;case"number":var d=c[a];typeof d!="undefined"&&(b=d);break;case"object":this.visualizers.forEach(function(c){c===a&&(b=c)},this)}return b},activateVisualizer:function(a){var b=this.getVisualizer(a);!b||b.activate()},addVisualizer:function(a){this.visualizers.push(a),this.visualizerContainer&&a.setParentNode(this.visualizerContainer),a.addEventListener("activate",this._onVisualizerActivateHandler),a.addEventListener("deactivate",this._onVisualizerDeactivateHandler),a.deactivate(),this.hasPlayer()&&a.setPlayer(this.getPlayer())},removeVisualizer:function(a){var b=this.getVisualizer(a);if(!b)return!1;b.removeEventListener("activate",this._onVisualizerActivateHandler),b.removeEventListener("deactivate",this._onVisualizerDeactivateHandler);var c=this.visualizers;c.splice(c.indexOf(b),1);return!0},getActiveVisualizers:function(){var a=[];this.visualizers.forEach(function(b){b.isActive()&&a.push(b)});return a},_onVisualizerActivate:function(a){a.show(),this.visualizers.forEach(function(b){b!=a&&b.isActive()&&b.deactivate()})},_onVisualizerDeactivate:function(a){a.hide()},countVisualizers:function(){return this.visualizers.length},setPlayer:function(a){this.player=a,this.visualizers.forEach(function(b){b.setPlayer(a)})},getPlayer:function(){return this.player},hasPlayer:function(){return!!this.player},removePlayer:function(){this.player=null,this.visualizers.forEach(function(a){a.removePlayer()})}});return c}),define("vpro/mediaplayer/js/util/StapesObservable",{addEventListener:function(){this.on.apply(this,arguments)},removeEventListener:function(){this.off.apply(this,arguments)},dispatchEvent:function(a){this.emit(a.type,a)}}),define("vpro/mediaplayer/js/util/EventIntent",["jquery","vpro/purno/shims"],function(a){var b=function(a){this.element=a,this.timing=this.isTouchDevice()?5e3:1500,this.enableFns=[],this.disableFns=[],this.state=!1,this.bindEventHandlers()};b.prototype={add:function(a,b){this.enableFns.push(a),this.disableFns.push(b)},bindEventHandlers:function(){a(this.element).on("mousemove mouseenter mouseover "+(this.isTouchDevice()?"touchend":"click"),function(a){if(!a.pageX||!a.pageY||a.pageX!=this.currentX||a.pageY!=this.currentY)this.currentX=a.pageX,this.currentY=a.pageY,this.state&&(this.state=!1,this.disableFns.forEach(function(a){a()})),clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.state=!0,this.enableFns.forEach(function(a){a()})}.bind(this),this.timing)}.bind(this))},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},remove:function(a,b){var c=this.enableFns.indexOf(a);c!=-1&&this.enableFns.splice(c,1);var d=this.disableFns.indexOf(b);d!=-1&&this.disableFns.splice(d,1)},resetState:function(){this.state=!0}};return b}),define("vpro/mediaplayer/js/engines/Engine",["ext/stapes/0.8.1/stapes"],function(a){var b=a.subclass({constructor:function(a){this.options=a||{},this.controllable=!0},dispatchEvent:function(a){return this.emit(a.type,a)},addEventListener:function(a,b){return this.on(a,b)},removeEventListener:function(a,b){return this.off(a,b)},handleCanvasEvent:function(a){b.isStandardEvent(a.type)&&this.emit(a.type,a)},createCanvas:function(){throw new Error("Implementation is required")},destroyCanvas:function(){return!1},grabImageData:function(){return!1},play:function(){},pause:function(){},stop:function(){},setSrc:function(a){},getSrc:function(){},setVolume:function(a){},getVolume:function(){},setCurrentTime:function(a){},getCurrentTime:function(){},setMuted:function(a){},getMuted:function(){},setAutoplay:function(a){},getAutoplay:function(){},setLoop:function(a){},getLoop:function(){},setPoster:function(){},getDuration:function(){},getVideoWidth:function(){},getVideoHeight:function(){},getBuffered:function(){},getCurrentSrc:function(){},getPaused:function(){},getPlayed:function(){},getSeeking:function(){},getEnded:function(){},getNetworkState:function(){},getReadyState:function(){},getError:function(){},_checkSegmentStart:function(){if(!this._segmentSeeked&&!!this._segmentStart){if(this._customStart)return;this._segmentSeeked=!0,this.setCurrentTime(this._segmentStart)}},_checkSegmentEnd:function(){if(!this._segmentEnded&&!!this._segmentEnd){if(this._customStart&&this._customStart>=this._segmentEnd)return;this.getCurrentTime()>=this._segmentEnd&&(this._segmentEnded=!0,this.pause())}},_seekToCustomStart:function(){this._customStart&&this.setCurrentTime(this._customStart)},_restart:function(){this._customStart=NaN,this._segmentSeeked=!1,this._segmentEnded=!1,this.setCurrentTime(0)},_getSaveSrc:function(a){this._segmentStart=undefined,this._segmentEnd=undefined,this._segmentSeeked=!1,this._segmentEnded=!1;if(!a)return"";var b=a.lastIndexOf("#");if(b===-1)return a;var c=a.slice(b).split("=")[1];this._segmentStart=parseFloat(c.split(",")[0])||undefined,this._segmentEnd=parseFloat(c.split(",")[1])||undefined,a=a.split("#")[0];return a}});b.NAME=undefined,b.PLUGIN=undefined,b.PLUGIN_DOWNLOAD=undefined,b.MEDIA_ERR_ABORTED=1,b.MEDIA_ERR_NETWORK=2,b.MEDIA_ERR_DECODE=3,b.MEDIA_ERR_SRC_NOT_SUPPORTED=4,b.STANDARD_EVENTS=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange","adstart","adcomplete"],b.isStandardEvent=function(a){return b.STANDARD_EVENTS.indexOf(a)!==-1},b.isAvailable=function(){return!1},b.canPlayType=function(a){return!1};return b}),define("vpro/mediaplayer/js/engines/HTML5Engine",["vpro/mediaplayer/js/engines/Engine"],function(a){var b=a.subclass({constructor:a.prototype.constructor,createCanvas:function(a){return a.appendChild(document.createElement("div"))},destroyCanvas:function(){this.canvas.parentNode.removeChild(this.canvas)},setSrc:function(a){/radiobox\d?\.omroep\.nl/.test(a)&&(a=a+"?count=0"),this._getSaveSrc(a),this.canvas.src=a,this._seekToCustomStart()},getSrc:function(){return this.canvas.src},setCurrentTime:function(a){clearTimeout(this.__seeking__),a=parseInt(a,10);var b=this.isSeekable(a);b?this.canvas.currentTime=a:this.__seeking__=setTimeout(function(){this.setCurrentTime(a)}.bind(this),250)},getCurrentTime:function(){return this.canvas.currentTime},setVolume:function(a){this.setMuted(!1),this.canvas.volume=a},getVolume:function(){return this.canvas.volume},setMuted:function(a){this.canvas.muted=a},getMuted:function(){return this.canvas.muted},setAutoplay:function(a){this.canvas.autoplay=a},getAutoplay:function(){return this.canvas.autoplay},setLoop:function(a){this.canvas.loop=a},getLoop:function(){return this.canvas.loop},getDuration:function(){return this.canvas.duration},getVideoWidth:function(){return this.canvas.videoWidth},getVideoHeight:function(){return this.canvas.videoHeight},getBuffered:function(){return this.canvas.buffered},getCurrentSrc:function(){return this.canvas.currentSrc},getPaused:function(){return this.canvas.paused},getPlayed:function(){return this.canvas.played},getSeeking:function(){return this.canvas.seeking},getEnded:function(){return this.canvas.ended},getNetworkState:function(){return this.canvas.networkState},getReadyState:function(){return this.canvas.readyState},getError:function(){return this.canvas.error},play:function(){this.canvas.play()},pause:function(){this.canvas.pause()},grabImageData:function(){return!1},isSeekable:function(a){var b=this.canvas.seekable;return!b||!b.length?!1:a>=b.start(0)&&a<b.end(0)}});b.extend(a);return b}),define("vpro/mediaplayer/js/engines/AudioHTML5Engine",["vpro/mediaplayer/js/engines/HTML5Engine"],function(a){var b=a.subclass({constructor:function(c){a.prototype.constructor.apply(this,arguments),this.name=b.NAME},createCanvas:function(b){this.id=this.name+(new Date).getTime();var c=document.createElement("audio");c.setAttribute("id",this.id),c.setAttribute("class","player-canvas"),c.muted=this.options.muted,c.volume=this.options.volume,c.preload="auto",c.controls=!1;var d=a.STANDARD_EVENTS;for(var e=d.length-1;e>=0;e--)c.addEventListener(d[e],this.handleCanvasEvent.bind(this),!1);this.canvas=c,this.options.src&&this.setSrc(this.options.src),this.setAutoplay(this.options.autoplay),this.setVolume(this.options.volume),this.setMuted(this.options.muted),this.setLoop(this.options.loop),b&&b.appendChild(c);return c},reload:function(a){var b=this.reload.attempts;this.reload.attempts=b=b===undefined?0:b+1;if(b<5)this.setSrc(a);else throw Error("Could not load metadata for file: "+a)},handleCanvasEvent:function(a){switch(a.type){case"loadedmetadata":isNaN(this.getDuration())?this.reload(this.getSrc()):(delete this.reload.attempts,this.dispatchEvent(a));break;case"canplaythrough":this.dispatchEvent(a),this._checkSegmentStart(a);break;case"timeupdate":this.dispatchEvent({type:"timeupdate"}),this._checkSegmentEnd(a),!isNaN(this.canvas.duration)&&this.canvas.duration===this.canvas.currentTime&&this.canvas.duration>0&&this.dispatchEvent({type:"ended"});break;default:this.dispatchEvent(a)}}});b.NAME="audio",b.PLUGIN_DOWNLOAD="https://www.google.com/intl/en/chrome/browser/",b.isAvailable=function(){var a=window.ActiveXObject?document.documentMode||7:10;return a>9&&!!document.createElement("audio").canPlayType},b.canPlayType=function(a){var b=document.createElement("audio");return!b.canPlayType||/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv)/.test(a)?!1:/audio/.test(a)&&!!b.canPlayType(a)};return b}),define("vpro/mediaplayer/js/engines/VideoHTML5Engine",["vpro/mediaplayer/js/engines/HTML5Engine"],function(a){var b=0,c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.controllable=!/iphone|ipod/i.test(navigator.platform||"")},createCanvas:function(a){this.id=this.name+b++;var d=document.createElement("video");d.setAttribute("id",this.id),d.setAttribute("class","player-canvas"),d.preload="auto",d.controls=!1;var e=c.STANDARD_EVENTS;for(var f=e.length-1;f>=0;f--)d.addEventListener(e[f],this.handleCanvasEvent.bind(this),!1);this.canvas=d,this.options.src&&this.setSrc(this.options.src),this.setAutoplay(this.options.autoplay),this.setVolume(this.options.volume),this.setMuted(this.options.muted),this.setLoop(this.options.loop),a.appendChild(d);return d},handleCanvasEvent:function(a){this.dispatchEvent(a);switch(a.type){case"canplaythrough":this._checkSegmentStart(a);break;case"timeupdate":this._checkSegmentEnd(a)}},grabImageData:function(){var a=document.createElement("canvas"),b=a.getContext("2d"),c=this.getVideoWidth(),d=this.getVideoHeight();a.width=c,a.height=d,b.drawImage(this.canvas,0,0,c,d);return a.toDataURL("image/jpg")}});c.extend(a,{NAME:"video",PLUGIN_DOWNLOAD:"https://www.google.com/intl/en/chrome/browser/"}),c.isAvailable=function(){var a=window.ActiveXObject?document.documentMode||7:10;return a>9&&!!document.createElement("video").canPlayType},c.canPlayType=function(a){var b=document.createElement("video");return!b.canPlayType||/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv)/.test(a)?!1:!!b.canPlayType(a)};return c}),define("vpro/mediaplayer/js/lib/swfobject",[],function(){var a=function(){function W(a){var c=/[\\\"<>\.;]/,d=c.exec(a)!=null;return d&&typeof encodeURIComponent!=b?encodeURIComponent(a):a}function V(a,b){if(!!y){var c=b?"visible":"hidden";u&&Q(a)?Q(a).style.visibility=c:U("#"+a,"visibility:"+c)}}function U(a,d,e,f){if(!z.ie||!z.mac){var g=j.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(w=null,x=null);if(!w||x!=h){var i=R("style");i.setAttribute("type","text/css"),i.setAttribute("media",h),w=g.appendChild(i),z.ie&&z.win&&typeof j.styleSheets!=b&&j.styleSheets.length>0&&(w=j.styleSheets[j.styleSheets.length-1]),x=h}z.ie&&z.win?w&&typeof w.addRule==c&&w.addRule(a,d):w&&typeof j.createTextNode!=b&&w.appendChild(j.createTextNode(a+" {"+d+"}"))}}function T(a){var b=z.pv,c=a.split(".");c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0;return b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function S(a,b,c){a.attachEvent(b,c),p[p.length]=[a,b,c]}function R(a){return j.createElement(a)}function Q(a){var b=null;try{b=j.getElementById(a)}catch(c){}return b}function P(a){var b=Q(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function O(a){var b=Q(a);b&&b.nodeName=="OBJECT"&&(z.ie&&z.win?(b.style.display="none",function(){b.readyState==4?P(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function N(a,b,c){var d=R("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function M(a,d,e){var g,h=Q(e);if(z.wk&&z.wk<312)return g;if(h){typeof a.id==b&&(a.id=e);if(z.ie&&z.win){var i="";for(var j in a)a[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=a[j]:j.toLowerCase()=="styleclass"?i+=' class="'+a[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+a[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",o[o.length]=a.id,g=Q(a.id)}else{var m=R(c);m.setAttribute("type",f);for(var n in a)a[n]!=Object.prototype[n]&&(n.toLowerCase()=="styleclass"?m.setAttribute("class",a[n]):n.toLowerCase()!="classid"&&m.setAttribute(n,a[n]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&N(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function L(a){var b=R("div");if(z.win&&z.ie)b.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(c)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&b.appendChild(e[g].cloneNode(!0))}}}return b}function K(a){if(z.ie&&z.win&&a.readyState!=4){var b=R("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(L(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(L(a),a)}function J(a,c,d,e){v=!0,s=e||null,t={success:!1,id:d};var f=Q(d);if(f){f.nodeName=="OBJECT"?(q=L(f),r=null):(q=f,r=d),a.id=g;if(typeof a.width==b||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==b||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";j.title=j.title.slice(0,47)+" - Flash Player Installation";var h=z.ie&&z.win?"ActiveX":"PlugIn",k="MMredirectURL="+i.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+j.title;typeof c.flashvars!=b?c.flashvars+="&"+k:c.flashvars=k;if(z.ie&&z.win&&f.readyState!=4){var l=R("div");d+="SWFObjectNew",l.setAttribute("id",d),f.parentNode.insertBefore(l,f),f.style.display="none",function(){f.readyState==4?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}()}M(a,c,d)}}function I(){return!v&&T("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function H(a){var d=null,e=Q(a);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=b)d=e;else{var f=e.getElementsByTagName(c)[0];f&&(d=f)}return d}function G(){var a=n.length;if(a>0)for(var c=0;c<a;c++){var d=n[c].id,e=n[c].callbackFn,f={success:!1,id:d};if(z.pv[0]>0){var g=Q(d);if(g)if(T(n[c].swfVersion)&&!(z.wk&&z.wk<312))V(d,!0),e&&(f.success=!0,f.ref=H(d),e(f));else if(n[c].expressInstall&&I()){var h={};h.data=n[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));J(h,i,d,e)}else K(g),e&&e(f)}else{V(d,!0);if(e){var m=H(d);m&&typeof m.SetVariable!=b&&(f.success=!0,f.ref=m),e(f)}}}}function F(){var a=j.getElementsByTagName("body")[0],d=R(c);d.setAttribute("type",f);var e=a.appendChild(d);if(e){var g=0;(function(){if(typeof e.GetVariable!=b){var c=e.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),z.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}a.removeChild(d),e=null,G()})()}else G()}function E(){l?F():G()}function D(a){if(typeof i.addEventListener!=b)i.addEventListener("load",a,!1);else if(typeof j.addEventListener!=b)j.addEventListener("load",a,!1);else if(typeof i.attachEvent!=b)S(i,"onload",a);else if(typeof i.onload=="function"){var c=i.onload;i.onload=function(){c(),a()}}else i.onload=a}function C(a){u?a():m[m.length]=a}function B(){if(!u){try{var a=j.getElementsByTagName("body")[0].appendChild(R("span"));a.parentNode.removeChild(a)}catch(b){return}u=!0;var c=m.length;for(var d=0;d<c;d++)m[d]()}}var b="undefined",c="object",d="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",f="application/x-shockwave-flash",g="SWFObjectExprInst",h="onreadystatechange",i=window,j=document,k=navigator,l=!1,m=[E],n=[],o=[],p=[],q,r,s,t,u=!1,v=!1,w,x,y=!0,z=function(){var a=typeof j.getElementById!=b&&typeof j.getElementsByTagName!=b&&typeof j.createElement!=b,g=k.userAgent.toLowerCase(),h=k.platform.toLowerCase(),m=h?/win/.test(h):/win/.test(g),n=h?/mac/.test(h):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof k.plugins!=b&&typeof k.plugins[d]==c)r=k.plugins[d].description,r&&(typeof k.mimeTypes==b||!k.mimeTypes[f]||!!k.mimeTypes[f].enabledPlugin)&&(l=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof i.ActiveXObject!=b)try{var s=new ActiveXObject(e);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:a,pv:q,wk:o,ie:p,win:m,mac:n}}(),A=function(){!z.w3||((typeof j.readyState!=b&&j.readyState=="complete"||typeof j.readyState==b&&(j.getElementsByTagName("body")[0]||j.body))&&B(),u||(typeof j.addEventListener!=b&&j.addEventListener("DOMContentLoaded",B,!1),z.ie&&z.win&&(j.attachEvent(h,function(){j.readyState=="complete"&&(j.detachEvent(h,arguments.callee),B())}),i==top&&function(){if(!u){try{j.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}B()}}()),z.wk&&function(){if(!u){if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}B()}}(),D(B)))}(),X=function(){z.ie&&z.win&&window.attachEvent("onunload",function(){var b=p.length;for(var c=0;c<b;c++)p[c][0].detachEvent(p[c][1],p[c][2]);var d=o.length;for(var e=0;e<d;e++)O(o[e]);for(var f in z)z[f]=null;z=null;for(var g in a)a[g]=null;a=null})}();return{registerObject:function(a,b,c,d){if(z.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,n[n.length]=e,V(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(z.w3)return H(a)},embedSWF:function(a,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};z.w3&&!(z.wk&&z.wk<312)&&a&&d&&e&&f&&g?(V(d,!1),C(function(){e+="",f+="";var n={};if(k&&typeof k===c)for(var o in k)n[o]=k[o];n.data=a,n.width=e,n.height=f;var p={};if(j&&typeof j===c)for(var q in j)p[q]=j[q];if(i&&typeof i===c)for(var r in i)typeof p.flashvars!=b?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(T(g)){var s=M(n,p,d);n.id==d&&V(d,!0),m.success=!0,m.ref=s}else{if(h&&I()){n.data=h,J(n,p,d,l);return}V(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){y=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(a,b,c){return z.w3?M(a,b,c):undefined},showExpressInstall:function(a,b,c,d){z.w3&&I()&&J(a,b,c,d)},removeSWF:function(a){z.w3&&O(a)},createCSS:function(a,b,c,d){z.w3&&U(a,b,c,d)},addDomLoadEvent:C,addLoadEvent:D,getQueryParamValue:function(a){var b=j.location.search||j.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return W(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return W(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(v){var a=Q(g);a&&q&&(a.parentNode.replaceChild(q,a),r&&(V(r,!0),z.ie&&z.win&&(q.style.display="block")),s&&s(t)),v=!1}}}}();return a}),define("vpro/mediaplayer/js/engines/JWFlashEngine",["jquery","vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/swfobject"],function(a,b,c){var d={},e=1,f={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},g=b.subclass({constructor:function(a){b.prototype.constructor.apply(this,arguments),this._customStart=this.options.currenttime?Number(this.options.currenttime):NaN,this.name=g.NAME,this.playerSWF=g.PLAYER_SWF_LOCATION},createCanvas:function(a){this.host=a,this._seeking=!1,this._seekTime=0,this._currentTime=null,this._isReady=!1,this._playState="",this._segmentStart=undefined,this._segmentEnd=undefined,this._segmentSeeked=!1,this._segmentEnded=!1,this._readyState=f.HAVE_NOTHING,this.played=[];var b=this.id="__jwflashplayer__"+e++,h=document.createElement("div");h.setAttribute("class","player-canvas");var i=document.createElement("div");i.setAttribute("id",b),h.appendChild(i),a.appendChild(h),this.node=h;var j=0,k=0;window[b]=function(a){var b=g.EVENT_MAP[a.type];if(b){if(b==="__state__"){this._playState=a.newstate;switch(a.newstate){case"BUFFERING":b="waiting";break;case"IDLE":b="idle";break;case"PLAYING":b="play";break;case"PAUSED":b="pause"}}if(b==="__time__"){!isNaN(a.position)&&j!==a.position&&(j=a.position,this._handleTranslatedJWEvent("timeupdate",a.type));var c=Math.round(a.duration);!isNaN(c)&&c!==k&&(k=c,this._handleTranslatedJWEvent("durationchange",a.type))}else this._handleTranslatedJWEvent(b,a.type)}}.bind(this),d[b]=this,window[b+"_ready"]=function(a){a&&a.id&&d[a.id]&&d[a.id].handlePlayerReady(a)};var l={controlbar:"none",icons:!1,muted:this.options.muted,volume:parseInt(this.options.volume*100),id:this.id,playerready:this.id+"_ready"};c.embedSWF(this.playerSWF,b,"100%","100%","10.0.0","",l,{wmode:"transparent",seamlesstabbing:!0,allownetworking:"all",allowfullscreen:!0,allowscriptaccess:"always"},{id:b,name:b},this.handleEnable.bind(this))},destroyCanvas:function(){this.node.parentNode.removeChild(this.node),this.id&&this.canvas&&(c.removeSWF(this.id),window[this.id]=undefined,a(this.id).remove())},_handleTranslatedJWEvent:function(a,b){this.handleCanvasEvent({type:a,target:this.canvas}),a==="durationchange"&&this._checkSegmentStart();if(a==="loadedmetadata"&&this._readyState===f.HAVE_NOTHING)this._readyState=f.HAVE_METADATA;else if(a==="durationchange"&&this._readyState<=f.HAVE_METADATA)this.getBuffered().end()>this._seekTime&&(this._readyState=f.HAVE_CURRENT_DATA,this.dispatchEvent({type:"loadeddata"}));else if(a==="durationchange"&&this._readyState<=f.HAVE_CURRENT_DATA){if(this.getBuffered().end()>this._seekTime){this._readyState=f.HAVE_FUTURE_DATA,this.dispatchEvent({type:"canplay"});try{this._currentTime=this._customStart||0,this._seekToCustomStart()}catch(c){}}}else b==="jwplayerMediaBufferFull"&&this._readyState!==f.HAVE_ENOUGH_DATA&&(this._readyState=f.HAVE_ENOUGH_DATA,this.dispatchEvent({type:"canplaythrough"}))},handleEnable:function(a){a.success&&(this.canvas=a.ref)},handlePlayerReady:function(a){var b=g.EVENT_MAP;this._isReady=!0;for(var c in b)this.canvas.jwAddEventListener(c,"function( e ) { "+this.id+"( e ); }");this.options.src&&this.setSrc(this.options.src)},isAdaptive:function(a){return/\.f4m/.test(a)},play:function(){try{this._playState!=="PLAYING"&&(this.canvas.jwPlay(),a(this.node).css("width",a(this.node).width()-1+"px"),setTimeout(function(){a(this.node).css("width","100%")}.bind(this),1e3))}catch(b){}},pause:function(){try{this._playState!=="PAUSED"&&this.canvas.jwPause()}catch(a){}},stop:function(){try{this.canvas.jwStop()}catch(a){}},setSrc:function(a){var b=this._getSaveSrc(a);this._isReady?(this.canvas.jwLoad&&this.canvas.jwLoad({bufferlength:this._segmentStart||"",file:b,provider:this.isAdaptive(b)?"hds":""}),this.play()):this.options.src=b},getSrc:function(){if(!this._isReady)return this.options.src;try{return this.canvas.jwGetPlaylist()[0].file}catch(a){return null}},setVolume:function(a){try{this.canvas.jwSetVolume(parseInt(a*100))}catch(b){}},getVolume:function(){try{return parseFloat(this.canvas.jwGetVolume()/100)}catch(a){}},setCurrentTime:function(a){try{var b=this.getPaused();this.canvas.jwSeek(a),this._seekTime=a,b&&this.pause()}catch(c){}},getCurrentTime:function(){try{return this.canvas.jwGetPosition()||this._currentTime||0}catch(a){return this._currentTime||0}},setMuted:function(a){try{this.canvas.jwSetMute(!!a)}catch(b){}},getMuted:function(){try{return this.canvas.jwGetMute()}catch(a){}},setAutoplay:function(a){this.options.autoplay=a},getAutoplay:function(){return this.options.autoplay},setLoop:function(a){this.options.loop=a},getLoop:function(){return this.options.loop},grabImageData:function(){},getDuration:function(){try{return this.canvas.jwGetDuration()||0}catch(a){return 0}},getPaused:function(){try{return this.canvas.jwGetState()==="PAUSED"}catch(a){}},getPlayed:function(){return this.played},getVideoWidth:function(){try{return this.canvas.jwGetWidth()||0}catch(a){return 0}},getVideoHeight:function(){try{return this.canvas.jwGetHeight()||0}catch(a){return 0}},getBuffered:function(){var a=this.getDuration()/100*this.canvas.jwGetBuffer();return{length:1,start:function(a){a=a||0;if(a!==0)throw IndexSizeError?new IndexSizeError:"Index out of bounds.";return 0},end:function(b){b=b||0;if(b!==0)throw IndexSizeError?new IndexSizeError:"Index out of bounds.";return a}}},trackSeeking:function(){return;var a=this._seekTime,b=this.getBuffered()},getCurrentSrc:function(){return this.getSrc()},getSeeking:function(){return this._seeking},getEnded:function(){return this.getCurrentTime()===this.getDuration()},getNetworkState:function(){},getReadyState:function(){},getError:function(){},handleCanvasEvent:function(a){a.type==="loadedmetadata"&&!this.options.autoplay&&this._readyState===f.HAVE_NOTHING&&(this.isAdaptive(this.getSrc())||this.pause()),a.type==="waiting"&&this.isAdaptive(this.getSrc())&&!this.options.autoplay&&!this._readyState!==f.HAVE_NOTHING&&this.pause(),a.type==="ended"&&this.options.loop&&(this._restart(),this.getPaused()&&this.play()),a.type==="durationchange"&&this.dispatchEvent({type:"progress"}),b.isStandardEvent(a.type)&&this.dispatchEvent(a),a.type==="play"&&(this.played=[{start:0,end:0}],this.dispatchEvent({type:"playing",target:this.canvas})),a.type==="timeupdate"&&(this._currentTime=null),a.type==="timeupdate"&&this._checkSegmentEnd()},_checkSegmentStart:function(){if(!(this._customStart||this._segmentSeeked||!this._segmentStart)){var a=this.getBuffered();a.end()>=this._segmentStart&&(this._segmentSeeked=!0,this.setCurrentTime(this._segmentStart),this._currentTime=this._segmentStart,this.dispatchEvent({type:"timeupdate"}))}}});g.NAME="jwflash",g.PLUGIN="Flash",g.PLUGIN_DOWNLOAD="http://get.adobe.com/flashplayer/",g.PLAYER_SWF_LOCATION="http://files.vpro.nl/flash/jwplayer/player-5.0.swf",g.EVENT_MAP={jwplayerError:"error",jwplayerMediaError:"error",jwplayerMediaBuffer:"progress",jwplayerMediaBufferFull:"durationchange",jwplayerMediaComplete:"ended",jwplayerMediaSeek:"seeking",jwplayerMediaTime:"__time__",jwplayerMediaVolume:"volumechange",jwplayerMediaMute:"mute",jwplayerMediaMeta:"loadedmetadata",jwplayerMediaLoaded:"loadedmetadata",jwplayerPlayerState:"__state__"},g.isAvailable=function(){return!!c.hasFlashPlayerVersion("10.0.0")},g.canPlayType=function(a){return/(video\/x\-flv|video\/mp4|audio\/mpeg|application\/f4m\+xml)/.test(a)};return g}),define("vpro/mediaplayer/js/lib/Silverlight",[],function(){var a={};a._silverlightCount=0,a.__onSilverlightInstalledCalled=!1,a.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=",a.__installationEventFired=!1,a.onGetSilverlight=null,a.onSilverlightInstalled=function(){window.location.reload(!1)},a.isInstalled=function(a){a==undefined&&(a=null);var b=!1,c=null;try{var d=null,e=!1;if(window.ActiveXObject)try{d=new ActiveXObject("AgControl.AgControl"),a===null?b=!0:d.IsVersionSupported(a)&&(b=!0),d=null}catch(f){e=!0}else e=!0;if(e){var g=navigator.plugins["Silverlight Plug-In"];if(g)if(a===null)b=!0;else{var h=g.description;h==="1.0.30226.2"&&(h="2.0.30226.2");var i=h.split(".");while(i.length>3)i.pop();while(i.length<4)i.push(0);var j=a.split(".");while(j.length>4)j.pop();var k,l,m=0;do k=parseInt(j[m]),l=parseInt(i[m]),m++;while(m<j.length&&k===l);k<=l&&!isNaN(k)&&(b=!0)}}}catch(f){b=!1}return b},a.WaitForInstallCompletion=function(){if(!a.isBrowserRestartRequired&&a.onSilverlightInstalled){try{navigator.plugins.refresh()}catch(b){}a.isInstalled(null)&&!a.__onSilverlightInstalledCalled?(a.onSilverlightInstalled(),a.__onSilverlightInstalledCalled=!0):setTimeout(a.WaitForInstallCompletion,3e3)}},a.__startup=function(){navigator.plugins.refresh(),a.isBrowserRestartRequired=a.isInstalled(null);if(!a.isBrowserRestartRequired)a.WaitForInstallCompletion(),a.__installationEventFired||(a.onInstallRequired(),a.__installationEventFired=!0);else if(window.navigator.mimeTypes){var b=navigator.mimeTypes["application/x-silverlight-2"],c=navigator.mimeTypes["application/x-silverlight-2-b2"],d=navigator.mimeTypes["application/x-silverlight-2-b1"],e=d;c&&(e=c),!b&&(d||c)?a.__installationEventFired||(a.onUpgradeRequired(),a.__installationEventFired=!0):b&&e&&b.enabledPlugin&&e.enabledPlugin&&b.enabledPlugin.description!=e.enabledPlugin.description&&(a.__installationEventFired||(a.onRestartRequired(),a.__installationEventFired=!0))}a.disableAutoStartup||(window.removeEventListener?window.removeEventListener("load",a.__startup,!1):window.detachEvent("onload",a.__startup))},a.disableAutoStartup||(window.addEventListener?window.addEventListener("load",a.__startup,!1):window.attachEvent("onload",a.__startup)),a.createObject=function(b,c,d,e,f,g,h){var i={},j=e,k=f;i.version=j.version,j.source=b,i.alt=j.alt,g&&(j.initParams=g),j.isWindowless&&!j.windowless&&(j.windowless=j.isWindowless),j.framerate&&!j.maxFramerate&&(j.maxFramerate=j.framerate),d&&!j.id&&(j.id=d),delete j.ignoreBrowserVer,delete j.inplaceInstallPrompt,delete j.version,delete j.isWindowless,delete j.framerate,delete j.data,delete j.src,delete j.alt;if(a.isInstalled(i.version)){for(var l in k)if(k[l]){if(l=="onLoad"&&typeof k[l]=="function"&&k[l].length!=1){var m=k[l];k[l]=function(a){return m(document.getElementById(d),h,a)}}var n=a.__getHandlerName(k[l]);if(n!=null)j[l]=n,k[l]=null;else throw"typeof events."+l+" must be 'function' or 'string'"}slPluginHTML=a.buildHTML(j)}else slPluginHTML=a.buildPromptHTML(i);if(c)c.innerHTML=slPluginHTML;else return slPluginHTML},a.buildHTML=function(b){var c=[];c.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"'),b.id!=null&&c.push(' id="'+a.HtmlAttributeEncode(b.id)+'"'),b.width!=null&&c.push(' width="'+b.width+'"'),b.height!=null&&c.push(' height="'+b.height+'"'),c.push(" >"),delete b.id,delete b.width,delete b.height;for(var d in b)b[d]&&c.push('<param name="'+a.HtmlAttributeEncode(d)+'" value="'+a.HtmlAttributeEncode(b[d])+'" />');c.push("</object>");return c.join("")},a.createObjectEx=function(b){var c=b,d=a.createObject(c.source,c.parentElement,c.id,c.properties,c.events,c.initParams,c.context);if(c.parentElement==null)return d},a.buildPromptHTML=function(b){var c="",d=a.fwlinkRoot,e=b.version;b.alt?c=b.alt:(e||(e=""),c="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>",c=c.replace("{1}",e),c=c.replace("{2}",d+"161376"));return c},a.getSilverlight=function(b){a.onGetSilverlight&&a.onGetSilverlight();var c="",d=String(b).split(".");if(d.length>1){var e=parseInt(d[0]);isNaN(e)||e<2?c="1.0":c=d[0]+"."+d[1]}var f="";c.match(/^\d+\056\d+$/)&&(f="&v="+c),a.followFWLink("149156"+f)},a.followFWLink=function(b){top.location=a.fwlinkRoot+String(b)},a.HtmlAttributeEncode=function(a){var b,c="";if(a==null)return null;for(var d=0;d<a.length;d++)b=a.charCodeAt(d),b>96&&b<123||b>64&&b<91||b>43&&b<58&&b!=47||b==95?c=c+String.fromCharCode(b):c=c+"&#"+b+";";return c},a.default_error_handler=function(a,b){var c,d=b.ErrorType;c=b.ErrorCode;var e="\nSilverlight error message     \n";e+="ErrorCode: "+c+"\n",e+="ErrorType: "+d+"       \n",e+="Message: "+b.ErrorMessage+"     \n",d=="ParserError"?(e+="XamlFile: "+b.xamlFile+"     \n",e+="Line: "+b.lineNumber+"     \n",e+="Position: "+b.charPosition+"     \n"):d=="RuntimeError"&&(b.lineNumber!=0&&(e+="Line: "+b.lineNumber+"     \n",e+="Position: "+b.charPosition+"     \n"),e+="MethodName: "+b.methodName+"     \n"),alert(e)},a.__cleanup=function(){for(var b=a._silverlightCount-1;b>=0;b--)window["__slEvent"+b]=null;a._silverlightCount=0,window.removeEventListener?window.removeEventListener("unload",a.__cleanup,!1):window.detachEvent("onunload",a.__cleanup)},a.__getHandlerName=function(b){var c="";if(typeof b=="string")c=b;else if(typeof b=="function"){a._silverlightCount==0&&(window.addEventListener?window.addEventListener("unload",a.__cleanup,!1):window.attachEvent("onunload",a.__cleanup));var d=a._silverlightCount++;c="__slEvent"+d,window[c]=b}else c=null;return c},a.onRequiredVersionAvailable=function(){},a.onRestartRequired=function(){},a.onUpgradeRequired=function(){},a.onInstallRequired=function(){},a.IsVersionAvailableOnError=function(b,c){var d=!1;try{c.ErrorCode==8001&&!a.__installationEventFired?(a.onUpgradeRequired(),a.__installationEventFired=!0):c.ErrorCode==8002&&!a.__installationEventFired?(a.onRestartRequired(),a.__installationEventFired=!0):c.ErrorCode==5014||c.ErrorCode==2106?a.__verifySilverlight2UpgradeSuccess(c.getHost())&&(d=!0):d=!0}catch(e){}return d},a.IsVersionAvailableOnLoad=function(b){var c=!1;try{a.__verifySilverlight2UpgradeSuccess(b.getHost())&&(c=!0)}catch(d){}return c},a.__verifySilverlight2UpgradeSuccess=function(b){var c=!1,d="4.0.50401",e=null;try{b.IsVersionSupported(d+".99")?(e=a.onRequiredVersionAvailable,c=!0):b.IsVersionSupported(d+".0")?e=a.onRestartRequired:e=a.onUpgradeRequired,e&&!a.__installationEventFired&&(e(),a.__installationEventFired=!0)}catch(f){}return c};return a}),define("vpro/mediaplayer/js/engines/SilverlightEngine",["vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/Silverlight"],function(a,b){var c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.canvasCount=0},createCanvas:function(a,c){this.canvasCount++,this.id="__silverlightcanvas__"+(new Date).getTime(),window["__silverlight__"+this.id]=function(a,b){a==="timeupdate"&&(this.__currentTime__=b,this.handleTimeUpdate({type:a})),this.handleCanvasEvent({type:a,target:document.getElementById(this.id)})}.bind(this);var d=c||this.options,e=this._getSaveSrc(d.src);this._customStart=d.currenttime?Number(d.currenttime):NaN,this.__currentTime__=0,this.hasPlayed=!1,this.isPlayable=!1,this.played=[],this.host=a;var f=document.createElement("div");f.setAttribute("class","player-canvas"),this.node=f,a.appendChild(f),b.createObjectEx({source:"http://files.vpro.nl/silverlight/slplayer/slplayer-1.0.0.3.xap",parentElement:f,id:this.id,properties:{width:"100%",height:"100%",allowHtmlPopupWindow:"false",autoUpgrade:"false",background:"#000",enableGPUAcceleration:"true",enableHtmlAccess:"true",enableNavigation:"none",minRuntimeVersion:"4.0.60310.0",windowless:"true"},events:{onError:this.error.bind(this),onLoad:this.enable.bind(this)},initParams:["id="+this.id,"autoplay="+d.autoplay,"muted="+d.muted,"controls=false","debug=false","smoothing=true","timerrate=500","width=100%","height=100%","startvolume="+d.volume,"preload=metadata","src="+e,"CallBackFunction=__silverlight__"+this.id].join(","),userContext:""})},destroyCanvas:function(){delete this.__currentTime__,this.node.parentNode.removeChild(this.node)},enable:function(){this.canvas=document.getElementById(this.id).content.slPlayer},play:function(){this.canvas&&this.isPlayable&&this.canvas.play()},pause:function(){this.canvas&&this.isPlayable&&this.canvas.pause()},error:function(){this.dispatchEvent({type:"error"})},setSrc:function(a){if(a){var b={src:a,muted:this.getMuted(),volume:this.getVolume(),autoplay:!!this.getAutoplay(),currenttime:this.canvasCount===0?this.options.currenttime:NaN};this.destroyCanvas(),this.createCanvas(this.host,b)}},getSrc:function(){try{return this.canvas.getProperty("src")}catch(a){}},getPaused:function(){try{return this.canvas.getProperty("paused")}catch(a){}},setCurrentTime:function(a){try{this.canvas.setProperty("currentTime",parseInt(a))}catch(b){}},getCurrentTime:function(){return this.__currentTime__||0},getVideoWidth:function(){try{return this.canvas.getProperty("width")}catch(a){}},getVideoHeight:function(){try{return this.canvas.getProperty("height")}catch(a){}},getDuration:function(){try{return this.canvas.getProperty("duration")}catch(a){}},setVolume:function(a){try{this.canvas.setProperty("muted",!1),this.canvas.setProperty("volume",a)}catch(b){}},getVolume:function(){try{return this.canvas.getProperty("volume")}catch(a){}},setMuted:function(a){try{this.canvas.setProperty("muted",a)}catch(b){}},getMuted:function(){try{return this.canvas.getProperty("muted")}catch(a){}},setLoop:function(a){try{this.canvas.setProperty("loop",a)}catch(b){}},getLoop:function(a){try{this.canvas.getProperty("loop")}catch(b){}},getBuffered:function(){return!1},getPlayed:function(){return this.played},handleCanvasEvent:function(b){if(b.type==="timeupdate"){var c=this.getDuration(),d=this.getCurrentTime();c===d&&this.dispatchEvent({type:"ended"})}b.type==="ended"&&this.options.loop&&(this._restart(),this.play());if(a.isStandardEvent(b.type))switch(b.type){case"playing":this.played=[{start:0,end:0}],this.dispatchEvent({type:"play"}),this.hasPlayed=!0;break;case"loadeddata":this.isPlayable=!0,this.handleLoadedData(b),this.dispatchEvent({type:"loadedmetadata"}),this.dispatchEvent({type:"durationchange"});break;case"pause":this.hasPlayed&&this.dispatchEvent({type:"pause"});break;default:this.dispatchEvent({type:b.type})}},handleTimeUpdate:function(a){this._checkSegmentEnd()},handleLoadedData:function(a){this._seekToCustomStart(),this._checkSegmentStart()}});c.NAME="silverlight",c.PLUGIN="Silverlight",c.PLUGIN_DOWNLOAD="http://www.microsoft.com/getsilverlight/",c.isAvailable=function(){return!!b.isInstalled()},c.canPlayType=function(a){return/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv|video\/mp4)/.test(a)};return c}),define("vpro/mediaplayer/js/engines/YouTubeIFrameEngine",["vpro/mediaplayer/js/engines/Engine","jquery"],function(a,b){function h(a){var b=g(a,d);if(b){if(isNaN(+b)){var c=/(\d+)m/.exec(b),e=/(\d+)s/.exec(b);c=c&&c.length>1?+c[1]:0,e=e&&e.length>1?+e[1]:0;return c*60+e}return+b}return 0}function g(a,b){var c=null;for(var d=0;d<b.length;d++){c=b[d].exec(a);if(c&&c.length>1)return c[1]}return null}var c=[/^youtube:(.{11})/,/youtu\.be\/(.{11})/,/youtube\.com\/watch.*v=(.{11})/],d=[/youtu\.be\/.*\?t=([^&]+)/,/youtube\.com\/watch.*#t=([^&]+)/],e=0,f=!1,i=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=i.NAME,this.youtubeId=g(this.options.src,c),this.playerTime=0,this.timer=0,this.state=-1;if(!window.onYouTubeIframeAPIReady){window.onYouTubeIframeAPIReady=function(){f=!0};var d=document.createElement("script");d.src="//www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)}},createCanvas:function(a){this.attributes={};if(!f)setTimeout(function(){this.createCanvas(a)}.bind(this),200);else{this.id="__youtubeiframeengine__"+e++,this.canvas=document.createElement("div"),this.canvas.setAttribute("class","player-canvas youtube");var b=document.createElement("div");b.setAttribute("id",this.id),this.canvas.appendChild(b),a.appendChild(this.canvas),this.youtubeplayer=new window.YT.Player(this.id,{playerVars:{wmode:"transparent",controls:this.options.controls?0:1,showinfo:0,modestbranding:1,rel:0,version:3,enablejsapi:1,loop:this.options.loop?1:0,start:h(this.options.src)||0},videoId:this.youtubeId,events:{onError:this.handleOnError.bind(this),onReady:this.handleOnPlayerReady.bind(this),onStateChange:this.handleOnStateChange.bind(this)}}),window.youtubeplayer=this.youtubeplayer}},getSrc:function(){return this.options.src},enable:function(){},play:function(){this.youtubeplayer?this.youtubeplayer.playVideo():this.options.autoplay=!0},pause:function(){this.youtubeplayer.pauseVideo(),this.dispatchEvent({type:"suspend",target:this.canvas})},togglePlay:function(){this.getPlayed()?this.pause():this.play()},getDuration:function(){return this.youtubeplayer.getDuration()},getCurrentTime:function(){return this.youtubeplayer.getCurrentTime()},setCurrentTime:function(a){this.youtubeplayer?(this.youtubeplayer.seekTo(a,!0),this.dispatchEvent({type:"timeupdate",target:this.canvas})):this.attributes.seekToAfterReady=a},getPaused:function(){return!this.getPlayed()},getPlayed:function(){var a=this.youtubeplayer.getPlayerState();return a===1||a===3},setVolume:function(a){this.attributes.volume=a,this.youtubeplayer.unMute(),this.attributes.muted=!1,this.youtubeplayer.setVolume(Math.round(a*100)),this.dispatchEvent({type:"volumechange",target:this.canvas})},getVolume:function(){return this.attributes.volume},setMuted:function(a){a?this.youtubeplayer.mute():this.youtubeplayer.unMute(),this.attributes.muted=a,this.dispatchEvent({type:"volumechange",target:this.canvas})},getMuted:function(){return this.attributes.muted},handleOnError:function(a){var b="De opgevraagde uitzending kan niet worden afgespeeld. ";switch(a.data){case 2:b+="De opgegeven bron bevat geen geldig Youtube ID.";break;case 5:b+="De content wordt niet ondersteund door de HTML5 speler.";break;case 100:b+="De video is niet langer beschikbaar.";break;case 101:case 105:b+="De eigenaar staat niet toe om deze video te embbedden.";break;default:b+="Er is een onbekende fout opgetreden."}this.dispatchEvent({type:"error",msg:b})},handleOnPlayerReady:function(){this.attributes.volume=this.youtubeplayer.getVolume()/100,this.attributes.muted=this.youtubeplayer.isMuted(),this.resizeIFrame(),b(window).bind("resize",this.resizeIFrame.bind(this)),b(document).bind("fullscreenchange mozfullscreenchange webkitfullscreenchange resize",this.resizeIFrame.bind(this)),this.options.autoplay?this.play():this.dispatchEvent({type:"suspend",target:this.canvas}),this.attributes.seekToAfterReady&&(this.setCurrentTime(this.attributes.seekToAfterReady),delete this.attributes.seekToAfterReady),this.options.volume&&this.setVolume(this.options.volume),this.options.muted&&this.setMuted(!0),this.dispatchEvent({type:"loadedmetadata",target:this.canvas})},resizeIFrame:function(){var a=b(this.youtubeplayer.getIframe()).parent();this.youtubeplayer.setSize(a.innerWidth(),a.innerHeight())},handleOnStateChange:function(a){this.state=a;switch(a.data){case-1:break;case 0:clearInterval(this.timer),this.dispatchEvent({type:"ended",target:this.canvas}),this.options.loop&&this.play();break;case 1:this.timer=setInterval(this.updateTime.bind(this),500),this.dispatchEvent({type:"durationchange",target:this.canvas}),this.dispatchEvent({type:"play",target:this.canvas});break;case 2:clearInterval(this.timer),this.dispatchEvent({type:"pause",target:this.canvas})}},updateTime:function(){this.playerTime!==this.getCurrentTime()&&(this.playerTime=this.getCurrentTime(),this.dispatchEvent({type:"timeupdate",target:this.canvas}))}});i.NAME="youtubeiframe",i.isAvailable=function(){return!0},i.canPlayType=function(a){return(a||"").indexOf("video/x-youtube")===0};return i}),define("vpro/mediaplayer/js/engines/VimeoEngine",["vpro/mediaplayer/js/engines/Engine"],function(a){var b=0,c=a.subclass({constructor:function(d){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.vimeoId=this.options.src.substring("vimeo:".length),this.playerTime=0,this.timer=0,this.playing=!1,this.id="__vimeoengine__"+b++,this.muted=this.options.muted||!1,this.volume=this.options.volume||.5,this.unmutedVolume=this.volume},createCanvas:function(a){this.vimeoFrame=document.createElement("iframe"),this.vimeoFrame.id=this.id,this.vimeoFrame.width="100%",this.vimeoFrame.height="100%",this.vimeoFrame.style.position="absolute",this.vimeoFrame.src="http://player.vimeo.com/video/"+this.vimeoId+"?api=1&player_id="+this.id,this.vimeoPlayer=this.vimeoFrame,window.addEventListener?window.addEventListener("message",this.onMessageReceived.bind(this),!1):window.attachEvent("onmessage",this.onMessageReceived.bind(this)),a.appendChild(this.vimeoFrame),this.canvas=this.vimeoFrame},onMessageReceived:function(a){if(!!a.origin&&a.origin.indexOf("vimeo")!==-1){var b=JSON.parse(a.data);if(b.player_id!==this.id)return;switch(b.event){case"ready":this.handleOnPlayerReady();break;case"play":this.handlePlay();break;case"pause":this.handlePause();break;case"finish":this.handleFinish();break;case"loadProgress":this.handleLoadProgress();break;case"playProgress":this.handlePlayProgress()}switch(b.method){case"getDuration":this.handleDurationChange(b.value);break;case"getCurrentTime":var c=b.value;this.playerTime!==c&&(this.playerTime=c,this.handleTimeUpdate())}}},post:function(a,b){var c={method:a};b&&(c.value=b),this.canvas.contentWindow.postMessage(JSON.stringify(c),"*")},play:function(){this.vimeoPlayer?this.post("play"):this.options.autoplay=!0},pause:function(){this.post("pause"),this.dispatchEvent({type:"suspend",target:this.canvas})},getDuration:function(){return this.duration},getPaused:function(){return!this.playing},setVolume:function(a){this.post("setVolume",a+""),this.volume=a,this.updateUnmutedVolume(a),this.dispatchEvent({type:"volumechange",target:this.canvas})},getVolume:function(){return this.volume},setMuted:function(a){this.muted=a,a?this.setVolume(0):this.setVolume(this.unmutedVolume)},getMuted:function(){return this.muted},updateUnmutedVolume:function(a){this.getMuted()||(this.unmutedVolume=a)},handleOnPlayerReady:function(){this.post("getDuration"),this.post("addEventListener","playProgress"),this.post("addEventListener","play"),this.post("addEventListener","pause"),this.post("addEventListener","finish"),this.options.autoplay?this.play():this.dispatchEvent({type:"suspend",target:this.canvas}),this.dispatchEvent({type:"loadedmetadata",target:this.canvas})},handlePlay:function(){this.playing=!0,this.dispatchEvent({type:"play",target:this.canvas})},handlePause:function(){this.playing=!1,this.dispatchEvent({type:"pause",target:this.canvas})},handleFinish:function(){this.playing=!1,this.dispatchEvent({type:"ended",target:this.canvas})},handleLoadProgress:function(){},handlePlayProgress:function(){this.post("getCurrentTime")},setCurrentTime:function(a){this.post("seekTo",a)},getCurrentTime:function(){return this.playerTime},handleTimeUpdate:function(){this.dispatchEvent({type:"timeupdate",target:this.canvas})},handleDurationChange:function(a){this.duration=a,this.dispatchEvent({type:"durationchange",target:this.canvas})}});c.NAME="vimeoengine",c.isAvailable=function(){return!0},c.canPlayType=function(a){return/video\/x-vimeo/.test(a)};return c}),define("vpro/mediaplayer/js/engines/FlashEngine",["vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/swfobject"],function(a,b){var c=a.subclass({constructor:a.prototype.constructor,embedSWF:function(){this.options.src=this.options.src.replace(/\+/g,"%2B");var a={flashvars:["externalCallback="+this.id,this.options.src?"src="+this.options.src:"",this.options.muted?"muted=muted":""].join("&"),wmode:"transparent",allownetworking:"all",allowscriptaccess:"always"};b.embedSWF(this.playerSWF,this.id,"100%","100%","9.0.0","",{},a,{},function(a){a.success&&(this.canvas=a.ref)}.bind(this))},createCanvas:function(){return document.createElement("marquee")},destroyCanvas:function(){b.removeSWF(this.id)},getCurrentTime:function(){try{return this.canvas.getCurrentTime()||0}catch(a){}},setCurrentTime:function(a){try{this.canvas.setCurrentTime(a)}catch(b){}},getDuration:function(){try{return this.canvas.getDuration()||0}catch(a){}},getMuted:function(){try{return this.canvas.getVolume()===0}catch(a){}},setMuted:function(a){try{this.canvas.setMuted(a)}catch(b){}},getVolume:function(){try{return this.canvas.getVolume()}catch(a){}},setVolume:function(a){try{this.canvas.setVolume(a)}catch(b){}},getPaused:function(){try{return this.canvas.getPaused()}catch(a){}},getSrc:function(){try{return this.canvas.getSrc()}catch(a){}},setSrc:function(a){try{this.canvas.setSrc(a,"true")}catch(b){}},getVersion:function(){try{return this.canvas.getVersion()}catch(a){}}});c.extend(a);return c}),define("vpro/mediaplayer/js/engines/VideoFlashEngine",["vpro/mediaplayer/js/engines/FlashEngine","vpro/mediaplayer/js/lib/swfobject"],function(a,b){var c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.playerSWF=c.LOCATION_SWF_CANVAS},createCanvas:function(a){var b="__"+this.name+"engine__"+Math.floor(Math.random()*999999999);this.id=b;var c=document.createElement("div");c.setAttribute("class","player-canvas");var d=document.createElement("div");d.setAttribute("id",this.id),c.appendChild(d),a.appendChild(c),window[b]=function(a,b){this.handleCanvasEvent({target:c,type:a})}.bind(this),this.embedSWF()},play:function(){try{this.canvas.playVideo()}catch(a){}},pause:function(){try{this.canvas.pauseVideo()}catch(a){}},grabImageData:function(){try{return this.canvas.grabImageData()}catch(a){}},getVideoWidth:function(){try{return this.canvas.getWidth()}catch(a){}},getVideoHeight:function(){try{return this.canvas.getHeight()}catch(a){}},reload:function(a){var b=this.reload.attempts;this.reload.attempts=b=b===undefined?0:b+1;if(b<5)this.engine.setSrc(a);else throw Error("Could not load metadata for file: "+a)},handleCanvasEvent:function(a){a.type==="loadstart"&&(this.play(),this.pause()),a.type==="loadeddata"&&this.options.autoplay&&this.play(),a.type==="ended"&&this.options.loop&&(this.setCurrentTime(0),this.play());if(c.isStandardEvent(a.type))switch(a.type){case"loadedmetadata":isNaN(this.getDuration())?this.reload(this.getSrc()):(delete this.reload.attempts,this.dispatchEvent(a));break;case"timeupdate":this.dispatchEvent(a),this.canvas.duration===this.canvas.currentTime&&this.dispatchEvent({type:"ended"});break;default:this.dispatchEvent(a)}}});c.extend(a,{NAME:"videoflash",PLUGIN:"Flash",PLUGIN_DOWNLOAD:"http://get.adobe.com/flashplayer/"}),c.LOCATION_SWF_CANVAS="http://files.vpro.nl/flash/videoplayer/player-1.2.swf?policydomains="+encodeURIComponent("http://files.vpro.nl/flash/videoplayer/policy-domains.txt"),c.isAvailable=function(){return!!b.hasFlashPlayerVersion("10.0.0")},c.canPlayType=function(a){return c.isAvailable()&&!!/(video\/mp4|video\/x\-flv)/.test(a)};return c}),define("vpro/mediaplayer/js/MimeTypes",[],function(){var a={resolveMimeType:function(b){var c=a.PATTERNS;for(var d in c)if(c[d](b))return d;return"application/octet-stream"},orderByPreference:function(b){var c=b.map(function(b){return{location:b,priority:a.ORDER.indexOf(a.resolveMimeType(b.url||b))}});c=c.sort(function(a,b){return a.priority-b.priority});return c.map(function(a){return a.location})}};a.ORDER=["application/x-poms-prid","application/x-poms-srid","application/x-poms-urn","audio/x-radiobox-mpeg","application/f4m+xml","application/x-mpegURL","video/mp4","video/x-youtube-iframe","video/x-youtube","video/x-vimeo","video/ogg","audio/mpeg","video/x-flv","audio/x-ms-wma","video/x-ms-wmv","audio/vnd.rn-realaudio","video/vnd.rn-realvideo","application/octet-stream"],a.PATTERNS={"application/x-poms-prid":function(a){return a&&a.indexOf("prid:")===0},"application/x-poms-srid":function(a){return a&&a.indexOf("srid:")===0},"application/x-poms-urn":function(a){return a&&a.indexOf("urn:vpro:media")===0},"audio/mpeg":function(a){return/\.mp3/.test(a)},"audio/x-ms-wma":function(a){return/\.wma/.test(a)},"audio/vnd.rn-realaudio":function(a){return/\.ra|\.ram/.test(a)},"application/f4m+xml":function(a){return/\.f4m/.test(a)},"application/x-mpegURL":function(a){return/\.m3u8/.test(a)},"video/vnd.rn-realvideo":function(a){return/\.rm|\.rv/.test(a)},"video/ogg":function(a){return/\.ogg|\.ogv/.test(a)},"video/mp4":function(a){return/\.mp4|\.m4v|h264_/.test(a)},"video/x-flv":function(a){return/\.flv/.test(a)},"video/x-ms-wmv":function(a){return/\.asf|\.wmv|wmv_|wvc1_/.test(a)},"video/x-youtube":function(a){return/youtu(\.be|be\.com)/.test(a)},"video/x-youtube-iframe":function(a){return a.indexOf("youtube:")===0},"video/x-vimeo":function(a){return a.indexOf("vimeo:")===0}};return a}),define("vpro/mediaplayer/js/engines/NpoPlayerEngine",["jquery","vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/MimeTypes","require"],function(a,b,c,d){function g(a){document.getElementById(h.SCRIPT_TAG_ID)?a():d([e],function(b){window.Mustache=b,d([h.JS_LOCATION],function(){a()})})}var e="ext/mustache/0.7.3/mustache",f=0,h=b.subclass({constructor:function(a){b.prototype.constructor.apply(this,arguments),this.name=h.NAME,this._customStart=this.options.currenttime?Number(this.options.currenttime):NaN,this._src=this._getSaveSrc(this.options.src),this._poster=this.options.poster,this._duration=this.options.duration||0,this._options={autoPlay:this.options.autoplay||!1,muteStart:this.options.muted||!1,loadingAnimation:""}},_bindEventHandlers:function(){this._canvas.onReady(function(a){this.handleCanvasEvent({type:"loadedmetadata"})}.bind(this)),this._canvas.onPlay(this.checkSegmentStart.bind(this)),this._canvas.onTime(this.checkSegmentEnd.bind(this)),this._canvas.onTime(function(a){this._setDuration(this._canvas.getDuration()),this.handleCanvasEvent({type:"timeupdate"})}.bind(this)),this._eventProxy("onPlay","play"),this._eventProxy("onPause","pause"),this._eventProxy("onComplete","ended"),this._eventProxy("onTime","timeupdate"),this._eventProxy("onSeek","seeking"),this._eventProxy("onBuffer","progress"),this._eventProxy("onMute","volumechange"),this._eventProxy("onVolume","volumechange"),this._canvas.onError(function(a){this.handleCanvasEvent({type:"error",msg:a})}.bind(this)),this._canvas.onMetadata(function(a){this._canvas.contentType=="wmv"&&!Silverlight.isInstalled()&&this.handleCanvasEvent({type:"error",msg:'De opgevraagde uitzending kan niet worden afgespeeld. U kunt deze uitzending afspelen met <a target="_blank" href="http://www.microsoft.com/getsilverlight/">Silverlight</a>'}),this._setDuration((a||{}).tijdsduurseconden)}.bind(this)),this._eventProxy("onMeta","loadedmetadata"),this._eventProxy("onMetadata","loadedmetadata"),this._eventProxy("onAdStart","play"),this._eventProxy("onAdStart","adstart"),this._eventProxy("onAdComplete","adcomplete")},checkSegmentEnd:function(a){this._segmentEnd!=undefined&&this.__stop__&&this._segmentEnd<this.getCurrentTime()&&(this.__stop__=!1,this.pause())},checkSegmentStart:function(a){this._segmentStart!=undefined&&this.__seeked__==undefined&&(this.__seeked__=0,this.__stop__=!0,this._canvas.seek(this._segmentStart))},createCanvas:function(b){this.id=this.name+f++;var c=a("<div></div>").addClass("player-canvas").get(0),d=a("<div></div>").attr("id",this.id).get(0);a(c).append(d),a(b).append(c),this.node=c,g(function(){this._initNpoPlayer(),this._bindEventHandlers()}.bind(this))},destroyCanvas:function(){a(this.node).remove(),delete this.node},_eventProxy:function(a,b){b=b.split(" "),this._canvas[a](function(){for(var a=0;a<b.length;a++)this.handleCanvasEvent({type:b[a]})}.bind(this))},_initNpoPlayer:function(){var b={width:"100%",height:"100%",image:this._poster,options:a.extend({},this._options,{wmode:"transparent",showTitlebar:!1,showControlbar:!1,showShareButton:!1,showShareButtonTop:!1})};switch(c.resolveMimeType(this._src)){case"application/x-poms-prid":b.prid=this._src.substr(5);break;case"application/x-poms-srid":b.srid=this._src.substr(5);break;case"application/x-poms-urn":b.urn=this._src;break;default:this.emit("error",{msg:"De opgevraagde uitzending kan niet worden afgespeeld. Onbekend media type "+c.resolveMimeType(this._src)})}this._canvas=npoplayer(this.id).setup(b)},getCurrentTime:function(){return this._canvas.getPosition()},getDuration:function(){return this._duration},getMuted:function(){var a=this._canvas.getMute();return typeof a=="function"?a():a},getPaused:function(){var a=this._canvas.getState();return a==="PAUSED"||a==="IDLE"},getSrc:function(){return this._src},getVolume:function(){return this._canvas.getVolume()/100},pause:function(){this.getPaused()||this._canvas.pause()},play:function(){this.getPaused()&&this._canvas.play()},setCurrentTime:function(a){return this._canvas.seek(a)},_setDuration:function(a){a&&this._duration!==a&&(this._duration=a,this.handleCanvasEvent({type:"durationchange"}))},setMuted:function(a){return this._canvas.setMute(a)},setPoster:function(a){this._poster=a},setSrc:function(b){this._src=this._getSaveSrc(b);var d={options:a.extend({},this._options)};this._poster&&(d.image=this._poster);switch(c.resolveMimeType(this._src)){case"application/x-poms-prid":this._canvas.loadByPrid(this._src.substr(5),d);break;case"application/x-poms-srid":this._canvas.loadBySrid(this._src.substr(5),d);break;case"application/x-poms-urn":this._canvas.loadByUrn(this._src,d)}},setVolume:function(a){typeof this._canvas.getMute()=="function"?this._canvas.setVolume(a):this._canvas.setVolume(Math.round(a*100))}}),i=["application/x-poms-prid","application/x-poms-srid","application/x-poms-urn"];h.extend(b,{NAME:"npoplayer",PLUGIN:undefined,PLUGIN_DOWNLOAD:undefined,JS_LOCATION:"http://npoplayer.omroep.nl/csjs/npoplayer-min.js",SCRIPT_TAG_ID:"__npo_player_script_tag__",isAvailable:function(){return!0},canPlayType:function(a){return i.indexOf(a)!==-1}});return h}),define("vpro/mediaplayer/js/engines/engines",["vpro/mediaplayer/js/engines/AudioHTML5Engine","vpro/mediaplayer/js/engines/VideoHTML5Engine","vpro/mediaplayer/js/engines/JWFlashEngine","vpro/mediaplayer/js/engines/SilverlightEngine","vpro/mediaplayer/js/engines/YouTubeIFrameEngine","vpro/mediaplayer/js/engines/VimeoEngine","vpro/mediaplayer/js/engines/VideoFlashEngine","vpro/mediaplayer/js/engines/NpoPlayerEngine"],function(a,b,c,d,e,f,g,h){var i,j={};j[h.NAME]=h,j[a.NAME]=a,j[b.NAME]=b,j[c.NAME]=c,j[d.NAME]=d,j[e.NAME]=e,j[f.NAME]=f,j[g.NAME]=g;return{engines:j,getAvailable:function(a){i=[];if(a)for(var b=0,c=a.length;b<c;b++)j[a[b]]&&j[a[b]].isAvailable()&&i.push(j[a[b]]);else for(var d in j)j[d].isAvailable()&&i.push(j[d]);return i}}}),define("vpro/mediaplayer/js/util/Source",["vpro/mediaplayer/js/MimeTypes"],function(a){var b=function(b){var c=typeof b=="string"?b:b.url;this.src=c,this.type=a.resolveMimeType(c)};return b}),define("vpro/mediaplayer/js/util/TimeRanges",[],function(){function d(a,b){if(b<a)throw Error("The end of a range must be greater than the start");this.start=a,this.end=b}function c(){this.ranges=[]}var a=Math.max,b=Math.min;c.prototype={size:function(){return this.ranges.length},start:function(a){if(this.ranges[a])return this.ranges[a].start},end:function(a){if(this.ranges[a])return this.ranges[a].end},add:function(a,b){this.ranges=this.__collapseRanges__(new d(a,b),this.ranges)},__collapseRanges__:function(c,e){var f=[c];for(var g=e.length-1;g>=0;g--)this.__hasOverlap__(e[g],f[0])&&f.push(e.splice(g,1)[0]);e.push(f.reduce(function(c,e){return new d(b(c.start,e.start),a(c.end,e.end))})),e.sort(function(a,b){return a.start-b.start});return e},__hasOverlap__:function(a,b){return!(a.end<=b.start)&&!(a.start>=b.end)}};return c}),define("vpro/mediaplayer/js/util/StapesObservable",{addEventListener:function(){this.on.apply(this,arguments)},removeEventListener:function(){this.off.apply(this,arguments)},dispatchEvent:function(a){this.emit(a.type,a)}}),function(a){typeof define=="function"&&define.amd?define("vpro/purno/shims",[],a):a()}(function(){var a=Element.prototype,b=/\s/;Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),Array.prototype.every||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++){var e=a.call(b||this,this[c],c,this);if(!e)return!1}return!0}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++){var f=this[d];a.call(b||this,f,d,this)&&c.push(f)}return c}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b||this,this[c],c,this)}),Array.prototype.map||(Array.prototype.map=function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++)c[d]=a.call(b||this,this[d],d,this);return c}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(this===null)return-1;for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1}),Array.prototype.some||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;c<d;c++){var e=a.call(b||this,this[c],c,this);if(e)return!0}return!1}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){if("function"!=typeof a)throw new TypeError(a+" is not a function");var c=0,d=this.length>>>0,e,f=!1;1<arguments.length&&(e=b,f=!0);for(;d>c;++c){if(!this.hasOwnProperty(c))continue;f?e=a(e,this[c],c,this):(e=this[c],f=!0)}if(!f)throw new TypeError("Reduce of empty array with no initial value");return e}),String.prototype.trim||(String.prototype.trim=function(){var a=this.replace(/^\s\s*/,""),c=a.length;while(b.test(a.charAt(--c)));return a.slice(0,c+1)}),"classList"in document.createElement("div")||Object.defineProperty(a,"classList",{get:function(){function b(b){return function(c){var d=a.className.split(/\s+/),e=d.indexOf(c);b(d,e,c),a.className=d.join(" ").trim()}}var a=this,c={add:b(function(a,b,c){~b||a.push(c)}),remove:b(function(a,b){~b&&a.splice(b,1)}),toggle:b(function(a,b,c){~b?a.splice(b,1):a.push(c)}),contains:function(b){return!!~a.className.split(/\s+/).indexOf(b)},item:function(b){return a.className.split(/\s+/)[b]||null}};return c}}),a.matchesSelector=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;while(c[++d]&&c[d]!=b);return!!c[d]}}),define("vpro/mediaplayer/js/util/EventIntent",["jquery","vpro/purno/shims"],function(a){var b=function(a){this.element=a,this.timing=this.isTouchDevice()?5e3:1500,this.enableFns=[],this.disableFns=[],this.state=!1,this.bindEventHandlers()};b.prototype={add:function(a,b){this.enableFns.push(a),this.disableFns.push(b)},bindEventHandlers:function(){a(this.element).on("mousemove mouseenter mouseover "+(this.isTouchDevice()?"touchend":"click"),function(a){if(!a.pageX||!a.pageY||a.pageX!=this.currentX||a.pageY!=this.currentY)this.currentX=a.pageX,this.currentY=a.pageY,this.state&&(this.state=!1,this.disableFns.forEach(function(a){a()})),clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.state=!0,this.enableFns.forEach(function(a){a()})}.bind(this),this.timing)}.bind(this))},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},remove:function(a,b){var c=this.enableFns.indexOf(a);c!=-1&&this.enableFns.splice(c,1);var d=this.disableFns.indexOf(b);d!=-1&&this.disableFns.splice(d,1)},resetState:function(){this.state=!0}};return b}),define("vpro/util/dragger",["jquery"],function(a){function b(b,c,d){this.scope=a(c||document.documentElement),this.draggable=this.scope.find(b),this.draggableSelector=b,d=d||{},this.constrain=d.constrain===!1?!1:!0,this.allowX=d.allowX===!1?!1:!0,this.allowY=d.allowY===!1?!1:!0,"ontouchstart"in window?this.scope.bind("touchstart",this.handleTouchStart.bind(this)):this.scope.bind("mousedown",this.handleMouseDown.bind(this)),this.x=0,this.y=0,this.dragging=!1}b.prototype={grab:function(){this.draggable.trigger("dragstart"),this.dragging=!0},release:function(){this.draggable.trigger("dragend"),this.dragging=!1},drag:function(a){var b,c,d,e;b=a.pageX-this.scope.offset().left,c=a.pageY-this.scope.offset().top,d=this.scope.outerWidth?this.scope.outerWidth():this.scope.width(),e=this.scope.outerHeight?this.scope.outerHeight():this.scope.height(),b=parseFloat(100*b/d),c=parseFloat(100*c/e),this.move(b,c),this.draggable.trigger("dragmove"),this.dragging=!0},move:function(a,b){this.constrain&&(a=a>100?100:a<0?0:a,b=b>100?100:b<0?0:b),this.x=a,this.y=b;var c={};this.allowX&&(c.left=a+"%"),this.allowY&&(c.top=b+"%"),this.draggable.css(c)},handleMouseDown:function(b){b.preventDefault(),a(b.target).closest(this.draggableSelector).length?(a(document).bind("mouseup.dragger mouseleave.dragger",this.handleMouseUp.bind(this)),a(document).bind("mousemove.dragger",this.handleMouseMove.bind(this)),this.grab()):(this.grab(),this.drag(b),this.release())},handleMouseMove:function(a){a.preventDefault(),this.drag(a)},handleMouseUp:function(b){b.preventDefault(),a(document).unbind("mousemove.dragger mouseup.dragger mouseleave.dragger"),this.release()},handleTouchStart:function(b){b.preventDefault(),b=b.originalEvent.targetTouches[0],a(b.target).closest(this.draggableSelector).length?(this.scope.bind("touchmove.dragger",this.handleTouchMove.bind(this)),this.scope.bind("touchend.dragger touchcancel.dragger touchleave.dragger gestureend.dragger gesturechange.dragger",this.handleTouchEnd.bind(this)),this.grab()):(this.grab(),this.drag(b),this.release())},handleTouchMove:function(a){a.preventDefault(),a=a.originalEvent.targetTouches[0],this.drag(a)},handleTouchEnd:function(a){a.preventDefault(),this.scope.unbind("touchemove.dragger touchend.dragger touchcancel.dragger touchleave.dragger gestureend.dragger gesturechange.dragger"),this.release()},on:function(a,b){this.draggable.bind(a,b)},addEventListener:function(a,b){this.draggable.bind(a,b)}};return b}),define("vpro/mediaplayer/js/Controls",["jquery","ext/stapes/0.8.1/stapes","vpro/util/dragger"],function(a,b,c){var d="ontouchend"in window?"touchend":"click",e=/ipad/i.test(navigator.platform||""),f=!/ipad|iphone|ipod/i.test(navigator.platform||""),g=!/iphone|ipod/i.test(navigator.platform||""),h=b.subclass({constructor:function(a){this.html='<div class="player-controls">'+(a||h.HTML)+"</div>"},show:function(){this.node.fadeIn()},hide:function(){this.node.fadeOut()},createNode:function(){var b=a(this.html);this.setNode(b);return b},setNode:function(a){this.initializeNode(a),this.node=a},initializeNode:function(a){this.playpause=a.find(".player-playpause"),this.elapsed=a.find(".player-time-elapsed"),this.duration=a.find(".player-time-duration"),this.remaining=a.find(".player-time-remaining"),this.elapsedBar=a.find(".player-scrubber-elapsed"),this.progressBar=a.find(".player-scrubber-progress"),this.volumeBar=a.find(".player-volume-bar"),this.volumeDragger=a.find(".player-volume-dragger"),this.playpause.length&&this.playpause.bind(d,function(){this.playpause.is(".paused")?this.emit("request:play"):this.emit("request:pause")}.bind(this)),this.fullscreen=a.find(".player-fullscreen"),this.fullscreen.length&&(g?this.fullscreen.bind(d,function(){this.emit("request:togglefullscreen")}.bind(this)):this.fullscreen.addClass("player-control-disabled")),this.mute=a.find(".player-mute"),this.mute.length&&(f?this.mute.bind(d,function(){this.mute.is(".muted")?this.emit("request:unmute"):this.emit("request:mute")}.bind(this)):this.mute.addClass("player-control-disabled")),this.volumeDragger.length&&!f&&this.volumeDragger.addClass("player-control-disabled"),a.find(".player-volume-head").length&&(this.volume=new c(".player-volume-head",a.find(".player-volume"),{allowY:!1}),this.volume.on("dragmove",function(){this.emit("request:volumechange",this.volume.x/100)}.bind(this))),a.find(".player-scrubber-head").length&&(this.scrubberHead=a.find(".player-scrubber-head"),this.time=new c(".player-scrubber-head",a.find(".player-scrubber"),{allowY:!1}),this.time.on("dragend",function(){this.emit("request:timeupdate",parseFloat(this.time.x/100)),this.updateElapsedBar()}.bind(this))),a.on("mouseleave ",function(){this.handleMouseLeave()}.bind(this)),a.on("mouseenter ",function(){this.handleMouseEnter(),this.isTouchDevice()&&this.handleMouseLeave()}.bind(this))},isHovered:function(){return this.hovered||!1},handleMouseLeave:function(){this.hovered=!1,this.node.removeClass("controls-hover")},handleMouseEnter:function(){this.hovered=!0,this.node.addClass("controls-hover")},reset:function(b){if(!!this.node){var c=!!b&&!!b.controllable;a(this.node)[c?"removeClass":"addClass"]("player-controls-disabled"),e&&this.fullscreen&&this.fullscreen.length&&this.fullscreen[b&&b.name==="video"?"removeClass":"addClass"]("player-control-disabled")}},destroyNode:function(){!this.node||this.node.remove()},getNode:function(){return this.node},updatePause:function(a){this.playpause&&(a?this.playpause.addClass("paused"):this.playpause.removeClass("paused"))},updateMute:function(a){this.mute&&(a?this.mute.addClass("muted"):this.mute.removeClass("muted"))},updateVolume:function(a){this.volume&&!this.volume.dragging&&this.volume.move(a*100,0),this.volumeBar&&this.volumeBar.length&&this.volumeBar.css("width",a*100+"%")},updateTime:function(a){this.time&&!this.time.dragging&&this.time.move(a*100,0),this.updateElapsedBar()},updateRemaining:function(a){!this.remaining||this.remaining.html("-"+this.formatTime(a))},updateElapsed:function(a){!this.elapsed||this.elapsed.html(this.formatTime(a))},updateElapsedBar:function(){if(!!this.elapsedBar&&!!this.elapsedBar.length){var a;if(this.scrubberHead&&this.scrubberHead.length)try{a=this.scrubberHead[0].style.left}catch(b){a=this.scrubberHead.css("left")}this.elapsedBar.css("width",a?a:0)}},updateDuration:function(a){!this.duration||this.duration.html(this.formatTime(a))},updateBuffered:function(a,b,c){if(!!this.progressBar){if(!a||!b||!c)return;var d=a.length,e=0,f=0;while(d--)e=Math.max(e,a.end(d));e>f&&(e=e/c*100,this.progressBar.css({left:f,width:e+"%"}))}},updateSegments:function(b,c){if(!!this.node){this.node.find(".player-scrubber-segment").remove();var d;for(var e=b.length-1;e>=0;e--){d=b[e];var f=a('<div class="player-scrubber-segment '+(b.length>1?"player-scrubber-segment-multiple":"")+'"></div>');this.node.find(".player-scrubber").append(f),f.css({left:parseFloat(d.start/c*100)+"%",right:parseFloat(100-d.end/c*100)+"%"})}}},formatTime:function(a){var b=Math.round(parseFloat(a));if(isNaN(b)||b<=0)return"00:00";var c=Math.floor(b/3600);c=c>0?c+":":"";var d=Math.floor(b%3600/60);d=(d<10?"0":"")+d+":";var e=Math.floor(b%3600%60);e=(e<10?"0":"")+e;return c+d+e},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},addEventListener:function(a,b){return this.on.apply(this,arguments)}});h.HTML=['<div class="player-controlbar">','<div class="player-playpause player-button paused"></div>','<time class="player-time-elapsed">0:00</time>','<div class="player-scrubber-dragger">','<div class="player-scrubber">','<div class="player-scrubber-head"></div>','<div class="player-scrubber-elapsed"></div>','<div class="player-scrubber-progress"></div>',"</div>","</div>",'<div class="player-fullscreen player-button"></div>','<div class="player-mute player-button"></div>','<div class="player-volume-dragger">','<div class="player-volume">','<div class="player-volume-head"></div>','<div class="player-volume-bar"></div>',"</div>","</div>",'<time class="player-time-duration">0:00</time>','<time class="player-time-remaining">0:00</time>',"</div>"].join("");return h}),define("vpro/mediaplayer/js/engines/Engine",["ext/stapes/0.8.1/stapes"],function(a){var b=a.subclass({constructor:function(a){this.options=a||{},this.controllable=!0},dispatchEvent:function(a){return this.emit(a.type,a)},addEventListener:function(a,b){return this.on(a,b)},removeEventListener:function(a,b){return this.off(a,b)},handleCanvasEvent:function(a){b.isStandardEvent(a.type)&&this.emit(a.type,a)},createCanvas:function(){throw new Error("Implementation is required")},destroyCanvas:function(){return!1},grabImageData:function(){return!1},play:function(){},pause:function(){},stop:function(){},setSrc:function(a){},getSrc:function(){},setVolume:function(a){},getVolume:function(){},setCurrentTime:function(a){},getCurrentTime:function(){},setMuted:function(a){},getMuted:function(){},setAutoplay:function(a){},getAutoplay:function(){},setLoop:function(a){},getLoop:function(){},setPoster:function(){},getDuration:function(){},getVideoWidth:function(){},getVideoHeight:function(){},getBuffered:function(){},getCurrentSrc:function(){},getPaused:function(){},getPlayed:function(){},getSeeking:function(){},getEnded:function(){},getNetworkState:function(){},getReadyState:function(){},getError:function(){},_checkSegmentStart:function(){if(!this._segmentSeeked&&!!this._segmentStart){if(this._customStart)return;this._segmentSeeked=!0,this.setCurrentTime(this._segmentStart)}},_checkSegmentEnd:function(){if(!this._segmentEnded&&!!this._segmentEnd){if(this._customStart&&this._customStart>=this._segmentEnd)return;this.getCurrentTime()>=this._segmentEnd&&(this._segmentEnded=!0,this.pause())}},_seekToCustomStart:function(){this._customStart&&this.setCurrentTime(this._customStart)},_restart:function(){this._customStart=NaN,this._segmentSeeked=!1,this._segmentEnded=!1,this.setCurrentTime(0)},_getSaveSrc:function(a){this._segmentStart=undefined,this._segmentEnd=undefined,this._segmentSeeked=!1,this._segmentEnded=!1;if(!a)return"";var b=a.lastIndexOf("#");if(b===-1)return a;var c=a.slice(b).split("=")[1];this._segmentStart=parseFloat(c.split(",")[0])||undefined,this._segmentEnd=parseFloat(c.split(",")[1])||undefined,a=a.split("#")[0];return a}});b.NAME=undefined,b.PLUGIN=undefined,b.PLUGIN_DOWNLOAD=undefined,b.MEDIA_ERR_ABORTED=1,b.MEDIA_ERR_NETWORK=2,b.MEDIA_ERR_DECODE=3,b.MEDIA_ERR_SRC_NOT_SUPPORTED=4,b.STANDARD_EVENTS=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange","adstart","adcomplete"],b.isStandardEvent=function(a){return b.STANDARD_EVENTS.indexOf(a)!==-1},b.isAvailable=function(){return!1},b.canPlayType=function(a){return!1};return b}),define("vpro/mediaplayer/js/engines/HTML5Engine",["vpro/mediaplayer/js/engines/Engine"],function(a){var b=a.subclass({constructor:a.prototype.constructor,createCanvas:function(a){return a.appendChild(document.createElement("div"))},destroyCanvas:function(){this.canvas.parentNode.removeChild(this.canvas)},setSrc:function(a){/radiobox\d?\.omroep\.nl/.test(a)&&(a=a+"?count=0"),this._getSaveSrc(a),this.canvas.src=a,this._seekToCustomStart()},getSrc:function(){return this.canvas.src},setCurrentTime:function(a){clearTimeout(this.__seeking__),a=parseInt(a,10);var b=this.isSeekable(a);b?this.canvas.currentTime=a:this.__seeking__=setTimeout(function(){this.setCurrentTime(a)}.bind(this),250)},getCurrentTime:function(){return this.canvas.currentTime},setVolume:function(a){this.setMuted(!1),this.canvas.volume=a},getVolume:function(){return this.canvas.volume},setMuted:function(a){this.canvas.muted=a},getMuted:function(){return this.canvas.muted},setAutoplay:function(a){this.canvas.autoplay=a},getAutoplay:function(){return this.canvas.autoplay},setLoop:function(a){this.canvas.loop=a},getLoop:function(){return this.canvas.loop},getDuration:function(){return this.canvas.duration},getVideoWidth:function(){return this.canvas.videoWidth},getVideoHeight:function(){return this.canvas.videoHeight},getBuffered:function(){return this.canvas.buffered},getCurrentSrc:function(){return this.canvas.currentSrc},getPaused:function(){return this.canvas.paused},getPlayed:function(){return this.canvas.played},getSeeking:function(){return this.canvas.seeking},getEnded:function(){return this.canvas.ended},getNetworkState:function(){return this.canvas.networkState},getReadyState:function(){return this.canvas.readyState},getError:function(){return this.canvas.error},play:function(){this.canvas.play()},pause:function(){this.canvas.pause()},grabImageData:function(){return!1},isSeekable:function(a){var b=this.canvas.seekable;return!b||!b.length?!1:a>=b.start(0)&&a<b.end(0)}});b.extend(a);return b}),define("vpro/mediaplayer/js/engines/AudioHTML5Engine",["vpro/mediaplayer/js/engines/HTML5Engine"],function(a){var b=a.subclass({constructor:function(c){a.prototype.constructor.apply(this,arguments),this.name=b.NAME},createCanvas:function(b){this.id=this.name+(new Date).getTime();var c=document.createElement("audio");c.setAttribute("id",this.id),c.setAttribute("class","player-canvas"),c.muted=this.options.muted,c.volume=this.options.volume,c.preload="auto",c.controls=!1;var d=a.STANDARD_EVENTS;for(var e=d.length-1;e>=0;e--)c.addEventListener(d[e],this.handleCanvasEvent.bind(this),!1);this.canvas=c,this.options.src&&this.setSrc(this.options.src),this.setAutoplay(this.options.autoplay),this.setVolume(this.options.volume),this.setMuted(this.options.muted),this.setLoop(this.options.loop),b&&b.appendChild(c);return c},reload:function(a){var b=this.reload.attempts;this.reload.attempts=b=b===undefined?0:b+1;if(b<5)this.setSrc(a);else throw Error("Could not load metadata for file: "+a)},handleCanvasEvent:function(a){switch(a.type){case"loadedmetadata":isNaN(this.getDuration())?this.reload(this.getSrc()):(delete this.reload.attempts,this.dispatchEvent(a));break;case"canplaythrough":this.dispatchEvent(a),this._checkSegmentStart(a);break;case"timeupdate":this.dispatchEvent({type:"timeupdate"}),this._checkSegmentEnd(a),!isNaN(this.canvas.duration)&&this.canvas.duration===this.canvas.currentTime&&this.canvas.duration>0&&this.dispatchEvent({type:"ended"});break;default:this.dispatchEvent(a)}}});b.NAME="audio",b.PLUGIN_DOWNLOAD="https://www.google.com/intl/en/chrome/browser/",b.isAvailable=function(){var a=window.ActiveXObject?document.documentMode||7:10;return a>9&&!!document.createElement("audio").canPlayType},b.canPlayType=function(a){var b=document.createElement("audio");return!b.canPlayType||/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv)/.test(a)?!1:/audio/.test(a)&&!!b.canPlayType(a)};return b}),define("vpro/mediaplayer/js/engines/VideoHTML5Engine",["vpro/mediaplayer/js/engines/HTML5Engine"],function(a){var b=0,c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.controllable=!/iphone|ipod/i.test(navigator.platform||"")},createCanvas:function(a){this.id=this.name+b++;var d=document.createElement("video");d.setAttribute("id",this.id),d.setAttribute("class","player-canvas"),d.preload="auto",d.controls=!1;var e=c.STANDARD_EVENTS;for(var f=e.length-1;f>=0;f--)d.addEventListener(e[f],this.handleCanvasEvent.bind(this),!1);this.canvas=d,this.options.src&&this.setSrc(this.options.src),this.setAutoplay(this.options.autoplay),this.setVolume(this.options.volume),this.setMuted(this.options.muted),this.setLoop(this.options.loop),a.appendChild(d);return d},handleCanvasEvent:function(a){this.dispatchEvent(a);switch(a.type){case"canplaythrough":this._checkSegmentStart(a);break;case"timeupdate":this._checkSegmentEnd(a)}},grabImageData:function(){var a=document.createElement("canvas"),b=a.getContext("2d"),c=this.getVideoWidth(),d=this.getVideoHeight();a.width=c,a.height=d,b.drawImage(this.canvas,0,0,c,d);return a.toDataURL("image/jpg")}});c.extend(a,{NAME:"video",PLUGIN_DOWNLOAD:"https://www.google.com/intl/en/chrome/browser/"}),c.isAvailable=function(){var a=window.ActiveXObject?document.documentMode||7:10;return a>9&&!!document.createElement("video").canPlayType},c.canPlayType=function(a){var b=document.createElement("video");return!b.canPlayType||/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv)/.test(a)?!1:!!b.canPlayType(a)};return c}),define("vpro/mediaplayer/js/lib/swfobject",[],function(){var a=function(){function W(a){var c=/[\\\"<>\.;]/,d=c.exec(a)!=null;return d&&typeof encodeURIComponent!=b?encodeURIComponent(a):a}function V(a,b){if(!!y){var c=b?"visible":"hidden";u&&Q(a)?Q(a).style.visibility=c:U("#"+a,"visibility:"+c)}}function U(a,d,e,f){if(!z.ie||!z.mac){var g=j.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(w=null,x=null);if(!w||x!=h){var i=R("style");i.setAttribute("type","text/css"),i.setAttribute("media",h),w=g.appendChild(i),z.ie&&z.win&&typeof j.styleSheets!=b&&j.styleSheets.length>0&&(w=j.styleSheets[j.styleSheets.length-1]),x=h}z.ie&&z.win?w&&typeof w.addRule==c&&w.addRule(a,d):w&&typeof j.createTextNode!=b&&w.appendChild(j.createTextNode(a+" {"+d+"}"))}}function T(a){var b=z.pv,c=a.split(".");c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0;return b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function S(a,b,c){a.attachEvent(b,c),p[p.length]=[a,b,c]}function R(a){return j.createElement(a)}function Q(a){var b=null;try{b=j.getElementById(a)}catch(c){}return b}function P(a){var b=Q(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function O(a){var b=Q(a);b&&b.nodeName=="OBJECT"&&(z.ie&&z.win?(b.style.display="none",function(){b.readyState==4?P(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function N(a,b,c){var d=R("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function M(a,d,e){var g,h=Q(e);if(z.wk&&z.wk<312)return g;if(h){typeof a.id==b&&(a.id=e);if(z.ie&&z.win){var i="";for(var j in a)a[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=a[j]:j.toLowerCase()=="styleclass"?i+=' class="'+a[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+a[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",o[o.length]=a.id,g=Q(a.id)}else{var m=R(c);m.setAttribute("type",f);for(var n in a)a[n]!=Object.prototype[n]&&(n.toLowerCase()=="styleclass"?m.setAttribute("class",a[n]):n.toLowerCase()!="classid"&&m.setAttribute(n,a[n]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&N(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function L(a){var b=R("div");if(z.win&&z.ie)b.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(c)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&b.appendChild(e[g].cloneNode(!0))}}}return b}function K(a){if(z.ie&&z.win&&a.readyState!=4){var b=R("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(L(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(L(a),a)}function J(a,c,d,e){v=!0,s=e||null,t={success:!1,id:d};var f=Q(d);if(f){f.nodeName=="OBJECT"?(q=L(f),r=null):(q=f,r=d),a.id=g;if(typeof a.width==b||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==b||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";j.title=j.title.slice(0,47)+" - Flash Player Installation";var h=z.ie&&z.win?"ActiveX":"PlugIn",k="MMredirectURL="+i.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+j.title;typeof c.flashvars!=b?c.flashvars+="&"+k:c.flashvars=k;if(z.ie&&z.win&&f.readyState!=4){var l=R("div");d+="SWFObjectNew",l.setAttribute("id",d),f.parentNode.insertBefore(l,f),f.style.display="none",function(){f.readyState==4?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}()}M(a,c,d)}}function I(){return!v&&T("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function H(a){var d=null,e=Q(a);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=b)d=e;else{var f=e.getElementsByTagName(c)[0];f&&(d=f)}return d}function G(){var a=n.length;if(a>0)for(var c=0;c<a;c++){var d=n[c].id,e=n[c].callbackFn,f={success:!1,id:d};if(z.pv[0]>0){var g=Q(d);if(g)if(T(n[c].swfVersion)&&!(z.wk&&z.wk<312))V(d,!0),e&&(f.success=!0,f.ref=H(d),e(f));else if(n[c].expressInstall&&I()){var h={};h.data=n[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));J(h,i,d,e)}else K(g),e&&e(f)}else{V(d,!0);if(e){var m=H(d);m&&typeof m.SetVariable!=b&&(f.success=!0,f.ref=m),e(f)}}}}function F(){var a=j.getElementsByTagName("body")[0],d=R(c);d.setAttribute("type",f);var e=a.appendChild(d);if(e){var g=0;(function(){if(typeof e.GetVariable!=b){var c=e.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),z.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}a.removeChild(d),e=null,G()})()}else G()}function E(){l?F():G()}function D(a){if(typeof i.addEventListener!=b)i.addEventListener("load",a,!1);else if(typeof j.addEventListener!=b)j.addEventListener("load",a,!1);else if(typeof i.attachEvent!=b)S(i,"onload",a);else if(typeof i.onload=="function"){var c=i.onload;i.onload=function(){c(),a()}}else i.onload=a}function C(a){u?a():m[m.length]=a}function B(){if(!u){try{var a=j.getElementsByTagName("body")[0].appendChild(R("span"));a.parentNode.removeChild(a)}catch(b){return}u=!0;var c=m.length;for(var d=0;d<c;d++)m[d]()}}var b="undefined",c="object",d="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",f="application/x-shockwave-flash",g="SWFObjectExprInst",h="onreadystatechange",i=window,j=document,k=navigator,l=!1,m=[E],n=[],o=[],p=[],q,r,s,t,u=!1,v=!1,w,x,y=!0,z=function(){var a=typeof j.getElementById!=b&&typeof j.getElementsByTagName!=b&&typeof j.createElement!=b,g=k.userAgent.toLowerCase(),h=k.platform.toLowerCase(),m=h?/win/.test(h):/win/.test(g),n=h?/mac/.test(h):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof k.plugins!=b&&typeof k.plugins[d]==c)r=k.plugins[d].description,r&&(typeof k.mimeTypes==b||!k.mimeTypes[f]||!!k.mimeTypes[f].enabledPlugin)&&(l=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof i.ActiveXObject!=b)try{var s=new ActiveXObject(e);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:a,pv:q,wk:o,ie:p,win:m,mac:n}}(),A=function(){!z.w3||((typeof j.readyState!=b&&j.readyState=="complete"||typeof j.readyState==b&&(j.getElementsByTagName("body")[0]||j.body))&&B(),u||(typeof j.addEventListener!=b&&j.addEventListener("DOMContentLoaded",B,!1),z.ie&&z.win&&(j.attachEvent(h,function(){j.readyState=="complete"&&(j.detachEvent(h,arguments.callee),B())}),i==top&&function(){if(!u){try{j.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}B()}}()),z.wk&&function(){if(!u){if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}B()}}(),D(B)))}(),X=function(){z.ie&&z.win&&window.attachEvent("onunload",function(){var b=p.length;for(var c=0;c<b;c++)p[c][0].detachEvent(p[c][1],p[c][2]);var d=o.length;for(var e=0;e<d;e++)O(o[e]);for(var f in z)z[f]=null;z=null;for(var g in a)a[g]=null;a=null})}();return{registerObject:function(a,b,c,d){if(z.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,n[n.length]=e,V(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(z.w3)return H(a)},embedSWF:function(a,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};z.w3&&!(z.wk&&z.wk<312)&&a&&d&&e&&f&&g?(V(d,!1),C(function(){e+="",f+="";var n={};if(k&&typeof k===c)for(var o in k)n[o]=k[o];n.data=a,n.width=e,n.height=f;var p={};if(j&&typeof j===c)for(var q in j)p[q]=j[q];if(i&&typeof i===c)for(var r in i)typeof p.flashvars!=b?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(T(g)){var s=M(n,p,d);n.id==d&&V(d,!0),m.success=!0,m.ref=s}else{if(h&&I()){n.data=h,J(n,p,d,l);return}V(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){y=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(a,b,c){return z.w3?M(a,b,c):undefined},showExpressInstall:function(a,b,c,d){z.w3&&I()&&J(a,b,c,d)},removeSWF:function(a){z.w3&&O(a)},createCSS:function(a,b,c,d){z.w3&&U(a,b,c,d)},addDomLoadEvent:C,addLoadEvent:D,getQueryParamValue:function(a){var b=j.location.search||j.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return W(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return W(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(v){var a=Q(g);a&&q&&(a.parentNode.replaceChild(q,a),r&&(V(r,!0),z.ie&&z.win&&(q.style.display="block")),s&&s(t)),v=!1}}}}();return a}),define("vpro/mediaplayer/js/engines/JWFlashEngine",["jquery","vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/swfobject"],function(a,b,c){var d={},e=1,f={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},g=b.subclass({constructor:function(a){b.prototype.constructor.apply(this,arguments),this._customStart=this.options.currenttime?Number(this.options.currenttime):NaN,this.name=g.NAME,this.playerSWF=g.PLAYER_SWF_LOCATION},createCanvas:function(a){this.host=a,this._seeking=!1,this._seekTime=0,this._currentTime=null,this._isReady=!1,this._playState="",this._segmentStart=undefined,this._segmentEnd=undefined,this._segmentSeeked=!1,this._segmentEnded=!1,this._readyState=f.HAVE_NOTHING,this.played=[];var b=this.id="__jwflashplayer__"+e++,h=document.createElement("div");h.setAttribute("class","player-canvas");var i=document.createElement("div");i.setAttribute("id",b),h.appendChild(i),a.appendChild(h),this.node=h;var j=0,k=0;window[b]=function(a){var b=g.EVENT_MAP[a.type];if(b){if(b==="__state__"){this._playState=a.newstate;switch(a.newstate){case"BUFFERING":b="waiting";break;case"IDLE":b="idle";break;case"PLAYING":b="play";break;case"PAUSED":b="pause"}}if(b==="__time__"){!isNaN(a.position)&&j!==a.position&&(j=a.position,this._handleTranslatedJWEvent("timeupdate",a.type));var c=Math.round(a.duration);!isNaN(c)&&c!==k&&(k=c,this._handleTranslatedJWEvent("durationchange",a.type))}else this._handleTranslatedJWEvent(b,a.type)}}.bind(this),d[b]=this,window[b+"_ready"]=function(a){a&&a.id&&d[a.id]&&d[a.id].handlePlayerReady(a)};var l={controlbar:"none",icons:!1,muted:this.options.muted,volume:parseInt(this.options.volume*100),id:this.id,playerready:this.id+"_ready"};c.embedSWF(this.playerSWF,b,"100%","100%","10.0.0","",l,{wmode:"transparent",seamlesstabbing:!0,allownetworking:"all",allowfullscreen:!0,allowscriptaccess:"always"},{id:b,name:b},this.handleEnable.bind(this))},destroyCanvas:function(){this.node.parentNode.removeChild(this.node),this.id&&this.canvas&&(c.removeSWF(this.id),window[this.id]=undefined,a(this.id).remove())},_handleTranslatedJWEvent:function(a,b){this.handleCanvasEvent({type:a,target:this.canvas}),a==="durationchange"&&this._checkSegmentStart();if(a==="loadedmetadata"&&this._readyState===f.HAVE_NOTHING)this._readyState=f.HAVE_METADATA;else if(a==="durationchange"&&this._readyState<=f.HAVE_METADATA)this.getBuffered().end()>this._seekTime&&(this._readyState=f.HAVE_CURRENT_DATA,this.dispatchEvent({type:"loadeddata"}));else if(a==="durationchange"&&this._readyState<=f.HAVE_CURRENT_DATA){if(this.getBuffered().end()>this._seekTime){this._readyState=f.HAVE_FUTURE_DATA,this.dispatchEvent({type:"canplay"});try{this._currentTime=this._customStart||0,this._seekToCustomStart()}catch(c){}}}else b==="jwplayerMediaBufferFull"&&this._readyState!==f.HAVE_ENOUGH_DATA&&(this._readyState=f.HAVE_ENOUGH_DATA,this.dispatchEvent({type:"canplaythrough"}))},handleEnable:function(a){a.success&&(this.canvas=a.ref)},handlePlayerReady:function(a){var b=g.EVENT_MAP;this._isReady=!0;for(var c in b)this.canvas.jwAddEventListener(c,"function( e ) { "+this.id+"( e ); }");this.options.src&&this.setSrc(this.options.src)},isAdaptive:function(a){return/\.f4m/.test(a)},play:function(){try{this._playState!=="PLAYING"&&(this.canvas.jwPlay(),a(this.node).css("width",a(this.node).width()-1+"px"),setTimeout(function(){a(this.node).css("width","100%")}.bind(this),1e3))}catch(b){}},pause:function(){try{this._playState!=="PAUSED"&&this.canvas.jwPause()}catch(a){}},stop:function(){try{this.canvas.jwStop()}catch(a){}},setSrc:function(a){var b=this._getSaveSrc(a);this._isReady?(this.canvas.jwLoad&&this.canvas.jwLoad({bufferlength:this._segmentStart||"",file:b,provider:this.isAdaptive(b)?"hds":""}),this.play()):this.options.src=b},getSrc:function(){if(!this._isReady)return this.options.src;try{return this.canvas.jwGetPlaylist()[0].file}catch(a){return null}},setVolume:function(a){try{this.canvas.jwSetVolume(parseInt(a*100))}catch(b){}},getVolume:function(){try{return parseFloat(this.canvas.jwGetVolume()/100)}catch(a){}},setCurrentTime:function(a){try{var b=this.getPaused();this.canvas.jwSeek(a),this._seekTime=a,b&&this.pause()}catch(c){}},getCurrentTime:function(){try{return this.canvas.jwGetPosition()||this._currentTime||0}catch(a){return this._currentTime||0}},setMuted:function(a){try{this.canvas.jwSetMute(!!a)}catch(b){}},getMuted:function(){try{return this.canvas.jwGetMute()}catch(a){}},setAutoplay:function(a){this.options.autoplay=a},getAutoplay:function(){return this.options.autoplay},setLoop:function(a){this.options.loop=a},getLoop:function(){return this.options.loop},grabImageData:function(){},getDuration:function(){try{return this.canvas.jwGetDuration()||0}catch(a){return 0}},getPaused:function(){try{return this.canvas.jwGetState()==="PAUSED"}catch(a){}},getPlayed:function(){return this.played},getVideoWidth:function(){try{return this.canvas.jwGetWidth()||0}catch(a){return 0}},getVideoHeight:function(){try{return this.canvas.jwGetHeight()||0}catch(a){return 0}},getBuffered:function(){var a=this.getDuration()/100*this.canvas.jwGetBuffer();return{length:1,start:function(a){a=a||0;if(a!==0)throw IndexSizeError?new IndexSizeError:"Index out of bounds.";return 0},end:function(b){b=b||0;if(b!==0)throw IndexSizeError?new IndexSizeError:"Index out of bounds.";return a}}},trackSeeking:function(){return;var a=this._seekTime,b=this.getBuffered()},getCurrentSrc:function(){return this.getSrc()},getSeeking:function(){return this._seeking},getEnded:function(){return this.getCurrentTime()===this.getDuration()},getNetworkState:function(){},getReadyState:function(){},getError:function(){},handleCanvasEvent:function(a){a.type==="loadedmetadata"&&!this.options.autoplay&&this._readyState===f.HAVE_NOTHING&&(this.isAdaptive(this.getSrc())||this.pause()),a.type==="waiting"&&this.isAdaptive(this.getSrc())&&!this.options.autoplay&&!this._readyState!==f.HAVE_NOTHING&&this.pause(),a.type==="ended"&&this.options.loop&&(this._restart(),this.getPaused()&&this.play()),a.type==="durationchange"&&this.dispatchEvent({type:"progress"}),b.isStandardEvent(a.type)&&this.dispatchEvent(a),a.type==="play"&&(this.played=[{start:0,end:0}],this.dispatchEvent({type:"playing",target:this.canvas})),a.type==="timeupdate"&&(this._currentTime=null),a.type==="timeupdate"&&this._checkSegmentEnd()},_checkSegmentStart:function(){if(!(this._customStart||this._segmentSeeked||!this._segmentStart)){var a=this.getBuffered();a.end()>=this._segmentStart&&(this._segmentSeeked=!0,this.setCurrentTime(this._segmentStart),this._currentTime=this._segmentStart,this.dispatchEvent({type:"timeupdate"}))}}});g.NAME="jwflash",g.PLUGIN="Flash",g.PLUGIN_DOWNLOAD="http://get.adobe.com/flashplayer/",g.PLAYER_SWF_LOCATION="http://files.vpro.nl/flash/jwplayer/player-5.0.swf",g.EVENT_MAP={jwplayerError:"error",jwplayerMediaError:"error",jwplayerMediaBuffer:"progress",jwplayerMediaBufferFull:"durationchange",jwplayerMediaComplete:"ended",jwplayerMediaSeek:"seeking",jwplayerMediaTime:"__time__",jwplayerMediaVolume:"volumechange",jwplayerMediaMute:"mute",jwplayerMediaMeta:"loadedmetadata",jwplayerMediaLoaded:"loadedmetadata",jwplayerPlayerState:"__state__"},g.isAvailable=function(){return!!c.hasFlashPlayerVersion("10.0.0")},g.canPlayType=function(a){return/(video\/x\-flv|video\/mp4|audio\/mpeg|application\/f4m\+xml)/.test(a)};return g}),define("vpro/mediaplayer/js/lib/Silverlight",[],function(){var a={};a._silverlightCount=0,a.__onSilverlightInstalledCalled=!1,a.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=",a.__installationEventFired=!1,a.onGetSilverlight=null,a.onSilverlightInstalled=function(){window.location.reload(!1)},a.isInstalled=function(a){a==undefined&&(a=null);var b=!1,c=null;try{var d=null,e=!1;if(window.ActiveXObject)try{d=new ActiveXObject("AgControl.AgControl"),a===null?b=!0:d.IsVersionSupported(a)&&(b=!0),d=null}catch(f){e=!0}else e=!0;if(e){var g=navigator.plugins["Silverlight Plug-In"];if(g)if(a===null)b=!0;else{var h=g.description;h==="1.0.30226.2"&&(h="2.0.30226.2");var i=h.split(".");while(i.length>3)i.pop();while(i.length<4)i.push(0);var j=a.split(".");while(j.length>4)j.pop();var k,l,m=0;do k=parseInt(j[m]),l=parseInt(i[m]),m++;while(m<j.length&&k===l);k<=l&&!isNaN(k)&&(b=!0)}}}catch(f){b=!1}return b},a.WaitForInstallCompletion=function(){if(!a.isBrowserRestartRequired&&a.onSilverlightInstalled){try{navigator.plugins.refresh()}catch(b){}a.isInstalled(null)&&!a.__onSilverlightInstalledCalled?(a.onSilverlightInstalled(),a.__onSilverlightInstalledCalled=!0):setTimeout(a.WaitForInstallCompletion,3e3)}},a.__startup=function(){navigator.plugins.refresh(),a.isBrowserRestartRequired=a.isInstalled(null);if(!a.isBrowserRestartRequired)a.WaitForInstallCompletion(),a.__installationEventFired||(a.onInstallRequired(),a.__installationEventFired=!0);else if(window.navigator.mimeTypes){var b=navigator.mimeTypes["application/x-silverlight-2"],c=navigator.mimeTypes["application/x-silverlight-2-b2"],d=navigator.mimeTypes["application/x-silverlight-2-b1"],e=d;c&&(e=c),!b&&(d||c)?a.__installationEventFired||(a.onUpgradeRequired(),a.__installationEventFired=!0):b&&e&&b.enabledPlugin&&e.enabledPlugin&&b.enabledPlugin.description!=e.enabledPlugin.description&&(a.__installationEventFired||(a.onRestartRequired(),a.__installationEventFired=!0))}a.disableAutoStartup||(window.removeEventListener?window.removeEventListener("load",a.__startup,!1):window.detachEvent("onload",a.__startup))},a.disableAutoStartup||(window.addEventListener?window.addEventListener("load",a.__startup,!1):window.attachEvent("onload",a.__startup)),a.createObject=function(b,c,d,e,f,g,h){var i={},j=e,k=f;i.version=j.version,j.source=b,i.alt=j.alt,g&&(j.initParams=g),j.isWindowless&&!j.windowless&&(j.windowless=j.isWindowless),j.framerate&&!j.maxFramerate&&(j.maxFramerate=j.framerate),d&&!j.id&&(j.id=d),delete j.ignoreBrowserVer,delete j.inplaceInstallPrompt,delete j.version,delete j.isWindowless,delete j.framerate,delete j.data,delete j.src,delete j.alt;if(a.isInstalled(i.version)){for(var l in k)if(k[l]){if(l=="onLoad"&&typeof k[l]=="function"&&k[l].length!=1){var m=k[l];k[l]=function(a){return m(document.getElementById(d),h,a)}}var n=a.__getHandlerName(k[l]);if(n!=null)j[l]=n,k[l]=null;else throw"typeof events."+l+" must be 'function' or 'string'"}slPluginHTML=a.buildHTML(j)}else slPluginHTML=a.buildPromptHTML(i);if(c)c.innerHTML=slPluginHTML;else return slPluginHTML},a.buildHTML=function(b){var c=[];c.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"'),b.id!=null&&c.push(' id="'+a.HtmlAttributeEncode(b.id)+'"'),b.width!=null&&c.push(' width="'+b.width+'"'),b.height!=null&&c.push(' height="'+b.height+'"'),c.push(" >"),delete b.id,delete b.width,delete b.height;for(var d in b)b[d]&&c.push('<param name="'+a.HtmlAttributeEncode(d)+'" value="'+a.HtmlAttributeEncode(b[d])+'" />');c.push("</object>");return c.join("")},a.createObjectEx=function(b){var c=b,d=a.createObject(c.source,c.parentElement,c.id,c.properties,c.events,c.initParams,c.context);if(c.parentElement==null)return d},a.buildPromptHTML=function(b){var c="",d=a.fwlinkRoot,e=b.version;b.alt?c=b.alt:(e||(e=""),c="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>",c=c.replace("{1}",e),c=c.replace("{2}",d+"161376"));return c},a.getSilverlight=function(b){a.onGetSilverlight&&a.onGetSilverlight();var c="",d=String(b).split(".");if(d.length>1){var e=parseInt(d[0]);isNaN(e)||e<2?c="1.0":c=d[0]+"."+d[1]}var f="";c.match(/^\d+\056\d+$/)&&(f="&v="+c),a.followFWLink("149156"+f)},a.followFWLink=function(b){top.location=a.fwlinkRoot+String(b)},a.HtmlAttributeEncode=function(a){var b,c="";if(a==null)return null;for(var d=0;d<a.length;d++)b=a.charCodeAt(d),b>96&&b<123||b>64&&b<91||b>43&&b<58&&b!=47||b==95?c=c+String.fromCharCode(b):c=c+"&#"+b+";";return c},a.default_error_handler=function(a,b){var c,d=b.ErrorType;c=b.ErrorCode;var e="\nSilverlight error message     \n";e+="ErrorCode: "+c+"\n",e+="ErrorType: "+d+"       \n",e+="Message: "+b.ErrorMessage+"     \n",d=="ParserError"?(e+="XamlFile: "+b.xamlFile+"     \n",e+="Line: "+b.lineNumber+"     \n",e+="Position: "+b.charPosition+"     \n"):d=="RuntimeError"&&(b.lineNumber!=0&&(e+="Line: "+b.lineNumber+"     \n",e+="Position: "+b.charPosition+"     \n"),e+="MethodName: "+b.methodName+"     \n"),alert(e)},a.__cleanup=function(){for(var b=a._silverlightCount-1;b>=0;b--)window["__slEvent"+b]=null;a._silverlightCount=0,window.removeEventListener?window.removeEventListener("unload",a.__cleanup,!1):window.detachEvent("onunload",a.__cleanup)},a.__getHandlerName=function(b){var c="";if(typeof b=="string")c=b;else if(typeof b=="function"){a._silverlightCount==0&&(window.addEventListener?window.addEventListener("unload",a.__cleanup,!1):window.attachEvent("onunload",a.__cleanup));var d=a._silverlightCount++;c="__slEvent"+d,window[c]=b}else c=null;return c},a.onRequiredVersionAvailable=function(){},a.onRestartRequired=function(){},a.onUpgradeRequired=function(){},a.onInstallRequired=function(){},a.IsVersionAvailableOnError=function(b,c){var d=!1;try{c.ErrorCode==8001&&!a.__installationEventFired?(a.onUpgradeRequired(),a.__installationEventFired=!0):c.ErrorCode==8002&&!a.__installationEventFired?(a.onRestartRequired(),a.__installationEventFired=!0):c.ErrorCode==5014||c.ErrorCode==2106?a.__verifySilverlight2UpgradeSuccess(c.getHost())&&(d=!0):d=!0}catch(e){}return d},a.IsVersionAvailableOnLoad=function(b){var c=!1;try{a.__verifySilverlight2UpgradeSuccess(b.getHost())&&(c=!0)}catch(d){}return c},a.__verifySilverlight2UpgradeSuccess=function(b){var c=!1,d="4.0.50401",e=null;try{b.IsVersionSupported(d+".99")?(e=a.onRequiredVersionAvailable,c=!0):b.IsVersionSupported(d+".0")?e=a.onRestartRequired:e=a.onUpgradeRequired,e&&!a.__installationEventFired&&(e(),a.__installationEventFired=!0)}catch(f){}return c};return a}),define("vpro/mediaplayer/js/engines/SilverlightEngine",["vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/Silverlight"],function(a,b){var c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.canvasCount=0},createCanvas:function(a,c){this.canvasCount++,this.id="__silverlightcanvas__"+(new Date).getTime(),window["__silverlight__"+this.id]=function(a,b){a==="timeupdate"&&(this.__currentTime__=b,this.handleTimeUpdate({type:a})),this.handleCanvasEvent({type:a,target:document.getElementById(this.id)})}.bind(this);var d=c||this.options,e=this._getSaveSrc(d.src);this._customStart=d.currenttime?Number(d.currenttime):NaN,this.__currentTime__=0,this.hasPlayed=!1,this.isPlayable=!1,this.played=[],this.host=a;var f=document.createElement("div");f.setAttribute("class","player-canvas"),this.node=f,a.appendChild(f),b.createObjectEx({source:"http://files.vpro.nl/silverlight/slplayer/slplayer-1.0.0.3.xap",parentElement:f,id:this.id,properties:{width:"100%",height:"100%",allowHtmlPopupWindow:"false",autoUpgrade:"false",background:"#000",enableGPUAcceleration:"true",enableHtmlAccess:"true",enableNavigation:"none",minRuntimeVersion:"4.0.60310.0",windowless:"true"},events:{onError:this.error.bind(this),onLoad:this.enable.bind(this)},initParams:["id="+this.id,"autoplay="+d.autoplay,"muted="+d.muted,"controls=false","debug=false","smoothing=true","timerrate=500","width=100%","height=100%","startvolume="+d.volume,"preload=metadata","src="+e,"CallBackFunction=__silverlight__"+this.id].join(","),userContext:""})},destroyCanvas:function(){delete this.__currentTime__,this.node.parentNode.removeChild(this.node)},enable:function(){this.canvas=document.getElementById(this.id).content.slPlayer},play:function(){this.canvas&&this.isPlayable&&this.canvas.play()},pause:function(){this.canvas&&this.isPlayable&&this.canvas.pause()},error:function(){this.dispatchEvent({type:"error"})},setSrc:function(a){if(a){var b={src:a,muted:this.getMuted(),volume:this.getVolume(),autoplay:!!this.getAutoplay(),currenttime:this.canvasCount===0?this.options.currenttime:NaN};this.destroyCanvas(),this.createCanvas(this.host,b)}},getSrc:function(){try{return this.canvas.getProperty("src")}catch(a){}},getPaused:function(){try{return this.canvas.getProperty("paused")}catch(a){}},setCurrentTime:function(a){try{this.canvas.setProperty("currentTime",parseInt(a))}catch(b){}},getCurrentTime:function(){return this.__currentTime__||0},getVideoWidth:function(){try{return this.canvas.getProperty("width")}catch(a){}},getVideoHeight:function(){try{return this.canvas.getProperty("height")}catch(a){}},getDuration:function(){try{return this.canvas.getProperty("duration")}catch(a){}},setVolume:function(a){try{this.canvas.setProperty("muted",!1),this.canvas.setProperty("volume",a)}catch(b){}},getVolume:function(){try{return this.canvas.getProperty("volume")}catch(a){}},setMuted:function(a){try{this.canvas.setProperty("muted",a)}catch(b){}},getMuted:function(){try{return this.canvas.getProperty("muted")}catch(a){}},setLoop:function(a){try{this.canvas.setProperty("loop",a)}catch(b){}},getLoop:function(a){try{this.canvas.getProperty("loop")}catch(b){}},getBuffered:function(){return!1},getPlayed:function(){return this.played},handleCanvasEvent:function(b){if(b.type==="timeupdate"){var c=this.getDuration(),d=this.getCurrentTime();c===d&&this.dispatchEvent({type:"ended"})}b.type==="ended"&&this.options.loop&&(this._restart(),this.play());if(a.isStandardEvent(b.type))switch(b.type){case"playing":this.played=[{start:0,end:0}],this.dispatchEvent({type:"play"}),this.hasPlayed=!0;break;case"loadeddata":this.isPlayable=!0,this.handleLoadedData(b),this.dispatchEvent({type:"loadedmetadata"}),this.dispatchEvent({type:"durationchange"});break;case"pause":this.hasPlayed&&this.dispatchEvent({type:"pause"});break;default:this.dispatchEvent({type:b.type})}},handleTimeUpdate:function(a){this._checkSegmentEnd()},handleLoadedData:function(a){this._seekToCustomStart(),this._checkSegmentStart()}});c.NAME="silverlight",c.PLUGIN="Silverlight",c.PLUGIN_DOWNLOAD="http://www.microsoft.com/getsilverlight/",c.isAvailable=function(){return!!b.isInstalled()},c.canPlayType=function(a){return/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv|video\/mp4)/.test(a)};return c}),define("vpro/mediaplayer/js/engines/YouTubeIFrameEngine",["vpro/mediaplayer/js/engines/Engine","jquery"],function(a,b){function h(a){var b=g(a,d);if(b){if(isNaN(+b)){var c=/(\d+)m/.exec(b),e=/(\d+)s/.exec(b);c=c&&c.length>1?+c[1]:0,e=e&&e.length>1?+e[1]:0;return c*60+e}return+b}return 0}function g(a,b){var c=null;for(var d=0;d<b.length;d++){c=b[d].exec(a);if(c&&c.length>1)return c[1]}return null}var c=[/^youtube:(.{11})/,/youtu\.be\/(.{11})/,/youtube\.com\/watch.*v=(.{11})/],d=[/youtu\.be\/.*\?t=([^&]+)/,/youtube\.com\/watch.*#t=([^&]+)/],e=0,f=!1,i=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=i.NAME,this.youtubeId=g(this.options.src,c),this.playerTime=0,this.timer=0,this.state=-1;if(!window.onYouTubeIframeAPIReady){window.onYouTubeIframeAPIReady=function(){f=!0};var d=document.createElement("script");d.src="//www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)}},createCanvas:function(a){this.attributes={};if(!f)setTimeout(function(){this.createCanvas(a)}.bind(this),200);else{this.id="__youtubeiframeengine__"+e++,this.canvas=document.createElement("div"),this.canvas.setAttribute("class","player-canvas youtube");var b=document.createElement("div");b.setAttribute("id",this.id),this.canvas.appendChild(b),a.appendChild(this.canvas),this.youtubeplayer=new window.YT.Player(this.id,{playerVars:{wmode:"transparent",controls:this.options.controls?0:1,showinfo:0,modestbranding:1,rel:0,version:3,enablejsapi:1,loop:this.options.loop?1:0,start:h(this.options.src)||0},videoId:this.youtubeId,events:{onError:this.handleOnError.bind(this),onReady:this.handleOnPlayerReady.bind(this),onStateChange:this.handleOnStateChange.bind(this)}}),window.youtubeplayer=this.youtubeplayer}},getSrc:function(){return this.options.src},enable:function(){},play:function(){this.youtubeplayer?this.youtubeplayer.playVideo():this.options.autoplay=!0},pause:function(){this.youtubeplayer.pauseVideo(),this.dispatchEvent({type:"suspend",target:this.canvas})},togglePlay:function(){this.getPlayed()?this.pause():this.play()},getDuration:function(){return this.youtubeplayer.getDuration()},getCurrentTime:function(){return this.youtubeplayer.getCurrentTime()},setCurrentTime:function(a){this.youtubeplayer?(this.youtubeplayer.seekTo(a,!0),this.dispatchEvent({type:"timeupdate",target:this.canvas})):this.attributes.seekToAfterReady=a},getPaused:function(){return!this.getPlayed()},getPlayed:function(){var a=this.youtubeplayer.getPlayerState();return a===1||a===3},setVolume:function(a){this.attributes.volume=a,this.youtubeplayer.unMute(),this.attributes.muted=!1,this.youtubeplayer.setVolume(Math.round(a*100)),this.dispatchEvent({type:"volumechange",target:this.canvas})},getVolume:function(){return this.attributes.volume},setMuted:function(a){a?this.youtubeplayer.mute():this.youtubeplayer.unMute(),this.attributes.muted=a,this.dispatchEvent({type:"volumechange",target:this.canvas})},getMuted:function(){return this.attributes.muted},handleOnError:function(a){var b="De opgevraagde uitzending kan niet worden afgespeeld. ";switch(a.data){case 2:b+="De opgegeven bron bevat geen geldig Youtube ID.";break;case 5:b+="De content wordt niet ondersteund door de HTML5 speler.";break;case 100:b+="De video is niet langer beschikbaar.";break;case 101:case 105:b+="De eigenaar staat niet toe om deze video te embbedden.";break;default:b+="Er is een onbekende fout opgetreden."}this.dispatchEvent({type:"error",msg:b})},handleOnPlayerReady:function(){this.attributes.volume=this.youtubeplayer.getVolume()/100,this.attributes.muted=this.youtubeplayer.isMuted(),this.resizeIFrame(),b(window).bind("resize",this.resizeIFrame.bind(this)),b(document).bind("fullscreenchange mozfullscreenchange webkitfullscreenchange resize",this.resizeIFrame.bind(this)),this.options.autoplay?this.play():this.dispatchEvent({type:"suspend",target:this.canvas}),this.attributes.seekToAfterReady&&(this.setCurrentTime(this.attributes.seekToAfterReady),delete this.attributes.seekToAfterReady),this.options.volume&&this.setVolume(this.options.volume),this.options.muted&&this.setMuted(!0),this.dispatchEvent({type:"loadedmetadata",target:this.canvas})},resizeIFrame:function(){var a=b(this.youtubeplayer.getIframe()).parent();this.youtubeplayer.setSize(a.innerWidth(),a.innerHeight())},handleOnStateChange:function(a){this.state=a;switch(a.data){case-1:break;case 0:clearInterval(this.timer),this.dispatchEvent({type:"ended",target:this.canvas}),this.options.loop&&this.play();break;case 1:this.timer=setInterval(this.updateTime.bind(this),500),this.dispatchEvent({type:"durationchange",target:this.canvas}),this.dispatchEvent({type:"play",target:this.canvas});break;case 2:clearInterval(this.timer),this.dispatchEvent({type:"pause",target:this.canvas})}},updateTime:function(){this.playerTime!==this.getCurrentTime()&&(this.playerTime=this.getCurrentTime(),this.dispatchEvent({type:"timeupdate",target:this.canvas}))}});i.NAME="youtubeiframe",i.isAvailable=function(){return!0},i.canPlayType=function(a){return(a||"").indexOf("video/x-youtube")===0};return i}),define("vpro/mediaplayer/js/engines/VimeoEngine",["vpro/mediaplayer/js/engines/Engine"],function(a){var b=0,c=a.subclass({constructor:function(d){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.vimeoId=this.options.src.substring("vimeo:".length),this.playerTime=0,this.timer=0,this.playing=!1,this.id="__vimeoengine__"+b++,this.muted=this.options.muted||!1,this.volume=this.options.volume||.5,this.unmutedVolume=this.volume},createCanvas:function(a){this.vimeoFrame=document.createElement("iframe"),this.vimeoFrame.id=this.id,this.vimeoFrame.width="100%",this.vimeoFrame.height="100%",this.vimeoFrame.style.position="absolute",this.vimeoFrame.src="http://player.vimeo.com/video/"+this.vimeoId+"?api=1&player_id="+this.id,this.vimeoPlayer=this.vimeoFrame,window.addEventListener?window.addEventListener("message",this.onMessageReceived.bind(this),!1):window.attachEvent("onmessage",this.onMessageReceived.bind(this)),a.appendChild(this.vimeoFrame),this.canvas=this.vimeoFrame},onMessageReceived:function(a){if(!!a.origin&&a.origin.indexOf("vimeo")!==-1){var b=JSON.parse(a.data);if(b.player_id!==this.id)return;switch(b.event){case"ready":this.handleOnPlayerReady();break;case"play":this.handlePlay();break;case"pause":this.handlePause();break;case"finish":this.handleFinish();break;case"loadProgress":this.handleLoadProgress();break;case"playProgress":this.handlePlayProgress()}switch(b.method){case"getDuration":this.handleDurationChange(b.value);break;case"getCurrentTime":var c=b.value;this.playerTime!==c&&(this.playerTime=c,this.handleTimeUpdate())}}},post:function(a,b){var c={method:a};b&&(c.value=b),this.canvas.contentWindow.postMessage(JSON.stringify(c),"*")},play:function(){this.vimeoPlayer?this.post("play"):this.options.autoplay=!0},pause:function(){this.post("pause"),this.dispatchEvent({type:"suspend",target:this.canvas})},getDuration:function(){return this.duration},getPaused:function(){return!this.playing},setVolume:function(a){this.post("setVolume",a+""),this.volume=a,this.updateUnmutedVolume(a),this.dispatchEvent({type:"volumechange",target:this.canvas})},getVolume:function(){return this.volume},setMuted:function(a){this.muted=a,a?this.setVolume(0):this.setVolume(this.unmutedVolume)},getMuted:function(){return this.muted},updateUnmutedVolume:function(a){this.getMuted()||(this.unmutedVolume=a)},handleOnPlayerReady:function(){this.post("getDuration"),this.post("addEventListener","playProgress"),this.post("addEventListener","play"),this.post("addEventListener","pause"),this.post("addEventListener","finish"),this.options.autoplay?this.play():this.dispatchEvent({type:"suspend",target:this.canvas}),this.dispatchEvent({type:"loadedmetadata",target:this.canvas})},handlePlay:function(){this.playing=!0,this.dispatchEvent({type:"play",target:this.canvas})},handlePause:function(){this.playing=!1,this.dispatchEvent({type:"pause",target:this.canvas})},handleFinish:function(){this.playing=!1,this.dispatchEvent({type:"ended",target:this.canvas})},handleLoadProgress:function(){},handlePlayProgress:function(){this.post("getCurrentTime")},setCurrentTime:function(a){this.post("seekTo",a)},getCurrentTime:function(){return this.playerTime},handleTimeUpdate:function(){this.dispatchEvent({type:"timeupdate",target:this.canvas})},handleDurationChange:function(a){this.duration=a,this.dispatchEvent({type:"durationchange",target:this.canvas})}});c.NAME="vimeoengine",c.isAvailable=function(){return!0},c.canPlayType=function(a){return/video\/x-vimeo/.test(a)};return c}),define("vpro/mediaplayer/js/engines/FlashEngine",["vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/swfobject"],function(a,b){var c=a.subclass({constructor:a.prototype.constructor,embedSWF:function(){this.options.src=this.options.src.replace(/\+/g,"%2B");var a={flashvars:["externalCallback="+this.id,this.options.src?"src="+this.options.src:"",this.options.muted?"muted=muted":""].join("&"),wmode:"transparent",allownetworking:"all",allowscriptaccess:"always"};b.embedSWF(this.playerSWF,this.id,"100%","100%","9.0.0","",{},a,{},function(a){a.success&&(this.canvas=a.ref)}.bind(this))},createCanvas:function(){return document.createElement("marquee")},destroyCanvas:function(){b.removeSWF(this.id)},getCurrentTime:function(){try{return this.canvas.getCurrentTime()||0}catch(a){}},setCurrentTime:function(a){try{this.canvas.setCurrentTime(a)}catch(b){}},getDuration:function(){try{return this.canvas.getDuration()||0}catch(a){}},getMuted:function(){try{return this.canvas.getVolume()===0}catch(a){}},setMuted:function(a){try{this.canvas.setMuted(a)}catch(b){}},getVolume:function(){try{return this.canvas.getVolume()}catch(a){}},setVolume:function(a){try{this.canvas.setVolume(a)}catch(b){}},getPaused:function(){try{return this.canvas.getPaused()}catch(a){}},getSrc:function(){try{return this.canvas.getSrc()}catch(a){}},setSrc:function(a){try{this.canvas.setSrc(a,"true")}catch(b){}},getVersion:function(){try{return this.canvas.getVersion()}catch(a){}}});c.extend(a);return c}),define("vpro/mediaplayer/js/engines/VideoFlashEngine",["vpro/mediaplayer/js/engines/FlashEngine","vpro/mediaplayer/js/lib/swfobject"],function(a,b){var c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.playerSWF=c.LOCATION_SWF_CANVAS},createCanvas:function(a){var b="__"+this.name+"engine__"+Math.floor(Math.random()*999999999);this.id=b;var c=document.createElement("div");c.setAttribute("class","player-canvas");var d=document.createElement("div");d.setAttribute("id",this.id),c.appendChild(d),a.appendChild(c),window[b]=function(a,b){this.handleCanvasEvent({target:c,type:a})}.bind(this),this.embedSWF()},play:function(){try{this.canvas.playVideo()}catch(a){}},pause:function(){try{this.canvas.pauseVideo()}catch(a){}},grabImageData:function(){try{return this.canvas.grabImageData()}catch(a){}},getVideoWidth:function(){try{return this.canvas.getWidth()}catch(a){}},getVideoHeight:function(){try{return this.canvas.getHeight()}catch(a){}},reload:function(a){var b=this.reload.attempts;this.reload.attempts=b=b===undefined?0:b+1;if(b<5)this.engine.setSrc(a);else throw Error("Could not load metadata for file: "+a)},handleCanvasEvent:function(a){a.type==="loadstart"&&(this.play(),this.pause()),a.type==="loadeddata"&&this.options.autoplay&&this.play(),a.type==="ended"&&this.options.loop&&(this.setCurrentTime(0),this.play());if(c.isStandardEvent(a.type))switch(a.type){case"loadedmetadata":isNaN(this.getDuration())?this.reload(this.getSrc()):(delete this.reload.attempts,this.dispatchEvent(a));break;case"timeupdate":this.dispatchEvent(a),this.canvas.duration===this.canvas.currentTime&&this.dispatchEvent({type:"ended"});break;default:this.dispatchEvent(a)}}});c.extend(a,{NAME:"videoflash",PLUGIN:"Flash",PLUGIN_DOWNLOAD:"http://get.adobe.com/flashplayer/"}),c.LOCATION_SWF_CANVAS="http://files.vpro.nl/flash/videoplayer/player-1.2.swf?policydomains="+encodeURIComponent("http://files.vpro.nl/flash/videoplayer/policy-domains.txt"),c.isAvailable=function(){return!!b.hasFlashPlayerVersion("10.0.0")},c.canPlayType=function(a){return c.isAvailable()&&!!/(video\/mp4|video\/x\-flv)/.test(a)};return c}),define("vpro/mediaplayer/js/MimeTypes",[],function(){var a={resolveMimeType:function(b){var c=a.PATTERNS;for(var d in c)if(c[d](b))return d;return"application/octet-stream"},orderByPreference:function(b){var c=b.map(function(b){return{location:b,priority:a.ORDER.indexOf(a.resolveMimeType(b.url||b))}});c=c.sort(function(a,b){return a.priority-b.priority});return c.map(function(a){return a.location})}};a.ORDER=["application/x-poms-prid","application/x-poms-srid","application/x-poms-urn","audio/x-radiobox-mpeg","application/f4m+xml","application/x-mpegURL","video/mp4","video/x-youtube-iframe","video/x-youtube","video/x-vimeo","video/ogg","audio/mpeg","video/x-flv","audio/x-ms-wma","video/x-ms-wmv","audio/vnd.rn-realaudio","video/vnd.rn-realvideo","application/octet-stream"],a.PATTERNS={"application/x-poms-prid":function(a){return a&&a.indexOf("prid:")===0},"application/x-poms-srid":function(a){return a&&a.indexOf("srid:")===0},"application/x-poms-urn":function(a){return a&&a.indexOf("urn:vpro:media")===0},"audio/mpeg":function(a){return/\.mp3/.test(a)},"audio/x-ms-wma":function(a){return/\.wma/.test(a)},"audio/vnd.rn-realaudio":function(a){return/\.ra|\.ram/.test(a)},"application/f4m+xml":function(a){return/\.f4m/.test(a)},"application/x-mpegURL":function(a){return/\.m3u8/.test(a)},"video/vnd.rn-realvideo":function(a){return/\.rm|\.rv/.test(a)},"video/ogg":function(a){return/\.ogg|\.ogv/.test(a)},"video/mp4":function(a){return/\.mp4|\.m4v|h264_/.test(a)},"video/x-flv":function(a){return/\.flv/.test(a)},"video/x-ms-wmv":function(a){return/\.asf|\.wmv|wmv_|wvc1_/.test(a)},"video/x-youtube":function(a){return/youtu(\.be|be\.com)/.test(a)},"video/x-youtube-iframe":function(a){return a.indexOf("youtube:")===0},"video/x-vimeo":function(a){return a.indexOf("vimeo:")===0}};return a}),define("vpro/mediaplayer/js/engines/NpoPlayerEngine",["jquery","vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/MimeTypes","require"],function(a,b,c,d){function g(a){document.getElementById(h.SCRIPT_TAG_ID)?a():d([e],function(b){window.Mustache=b,d([h.JS_LOCATION],function(){a()})})}var e="ext/mustache/0.7.3/mustache",f=0,h=b.subclass({constructor:function(a){b.prototype.constructor.apply(this,arguments),this.name=h.NAME,this._customStart=this.options.currenttime?Number(this.options.currenttime):NaN,this._src=this._getSaveSrc(this.options.src),this._poster=this.options.poster,this._duration=this.options.duration||0,this._options={autoPlay:this.options.autoplay||!1,muteStart:this.options.muted||!1,loadingAnimation:""}},_bindEventHandlers:function(){this._canvas.onReady(function(a){this.handleCanvasEvent({type:"loadedmetadata"})}.bind(this)),this._canvas.onPlay(this.checkSegmentStart.bind(this)),this._canvas.onTime(this.checkSegmentEnd.bind(this)),this._canvas.onTime(function(a){this._setDuration(this._canvas.getDuration()),this.handleCanvasEvent({type:"timeupdate"})}.bind(this)),this._eventProxy("onPlay","play"),this._eventProxy("onPause","pause"),this._eventProxy("onComplete","ended"),this._eventProxy("onTime","timeupdate"),this._eventProxy("onSeek","seeking"),this._eventProxy("onBuffer","progress"),this._eventProxy("onMute","volumechange"),this._eventProxy("onVolume","volumechange"),this._canvas.onError(function(a){this.handleCanvasEvent({type:"error",msg:a})}.bind(this)),this._canvas.onMetadata(function(a){this._canvas.contentType=="wmv"&&!Silverlight.isInstalled()&&this.handleCanvasEvent({type:"error",msg:'De opgevraagde uitzending kan niet worden afgespeeld. U kunt deze uitzending afspelen met <a target="_blank" href="http://www.microsoft.com/getsilverlight/">Silverlight</a>'}),this._setDuration((a||{}).tijdsduurseconden)}.bind(this)),this._eventProxy("onMeta","loadedmetadata"),this._eventProxy("onMetadata","loadedmetadata"),this._eventProxy("onAdStart","play"),this._eventProxy("onAdStart","adstart"),this._eventProxy("onAdComplete","adcomplete")},checkSegmentEnd:function(a){this._segmentEnd!=undefined&&this.__stop__&&this._segmentEnd<this.getCurrentTime()&&(this.__stop__=!1,this.pause())},checkSegmentStart:function(a){this._segmentStart!=undefined&&this.__seeked__==undefined&&(this.__seeked__=0,this.__stop__=!0,this._canvas.seek(this._segmentStart))},createCanvas:function(b){this.id=this.name+f++;var c=a("<div></div>").addClass("player-canvas").get(0),d=a("<div></div>").attr("id",this.id).get(0);a(c).append(d),a(b).append(c),this.node=c,g(function(){this._initNpoPlayer(),this._bindEventHandlers()}.bind(this))},destroyCanvas:function(){a(this.node).remove(),delete this.node},_eventProxy:function(a,b){b=b.split(" "),this._canvas[a](function(){for(var a=0;a<b.length;a++)this.handleCanvasEvent({type:b[a]})}.bind(this))},_initNpoPlayer:function(){var b={width:"100%",height:"100%",image:this._poster,options:a.extend({},this._options,{wmode:"transparent",showTitlebar:!1,showControlbar:!1,showShareButton:!1,showShareButtonTop:!1})};switch(c.resolveMimeType(this._src)){case"application/x-poms-prid":b.prid=this._src.substr(5);break;case"application/x-poms-srid":b.srid=this._src.substr(5);break;case"application/x-poms-urn":b.urn=this._src;break;default:this.emit("error",{msg:"De opgevraagde uitzending kan niet worden afgespeeld. Onbekend media type "+c.resolveMimeType(this._src)})}this._canvas=npoplayer(this.id).setup(b)},getCurrentTime:function(){return this._canvas.getPosition()},getDuration:function(){return this._duration},getMuted:function(){var a=this._canvas.getMute();return typeof a=="function"?a():a},getPaused:function(){var a=this._canvas.getState();return a==="PAUSED"||a==="IDLE"},getSrc:function(){return this._src},getVolume:function(){return this._canvas.getVolume()/100},pause:function(){this.getPaused()||this._canvas.pause()},play:function(){this.getPaused()&&this._canvas.play()},setCurrentTime:function(a){return this._canvas.seek(a)},_setDuration:function(a){a&&this._duration!==a&&(this._duration=a,this.handleCanvasEvent({type:"durationchange"}))},setMuted:function(a){return this._canvas.setMute(a)},setPoster:function(a){this._poster=a},setSrc:function(b){this._src=this._getSaveSrc(b);var d={options:a.extend({},this._options)};this._poster&&(d.image=this._poster);switch(c.resolveMimeType(this._src)){case"application/x-poms-prid":this._canvas.loadByPrid(this._src.substr(5),d);break;case"application/x-poms-srid":this._canvas.loadBySrid(this._src.substr(5),d);break;case"application/x-poms-urn":this._canvas.loadByUrn(this._src,d)}},setVolume:function(a){typeof this._canvas.getMute()=="function"?this._canvas.setVolume(a):this._canvas.setVolume(Math.round(a*100))}}),i=["application/x-poms-prid","application/x-poms-srid","application/x-poms-urn"];h.extend(b,{NAME:"npoplayer",PLUGIN:undefined,PLUGIN_DOWNLOAD:undefined,JS_LOCATION:"http://npoplayer.omroep.nl/csjs/npoplayer-min.js",SCRIPT_TAG_ID:"__npo_player_script_tag__",isAvailable:function(){return!0},canPlayType:function(a){return i.indexOf(a)!==-1}});return h}),define("vpro/mediaplayer/js/engines/engines",["vpro/mediaplayer/js/engines/AudioHTML5Engine","vpro/mediaplayer/js/engines/VideoHTML5Engine","vpro/mediaplayer/js/engines/JWFlashEngine","vpro/mediaplayer/js/engines/SilverlightEngine","vpro/mediaplayer/js/engines/YouTubeIFrameEngine","vpro/mediaplayer/js/engines/VimeoEngine","vpro/mediaplayer/js/engines/VideoFlashEngine","vpro/mediaplayer/js/engines/NpoPlayerEngine"],function(a,b,c,d,e,f,g,h){var i,j={};j[h.NAME]=h,j[a.NAME]=a,j[b.NAME]=b,j[c.NAME]=c,j[d.NAME]=d,j[e.NAME]=e,j[f.NAME]=f,j[g.NAME]=g;return{engines:j,getAvailable:function(a){i=[];if(a)for(var b=0,c=a.length;b<c;b++)j[a[b]]&&j[a[b]].isAvailable()&&i.push(j[a[b]]);else for(var d in j)j[d].isAvailable()&&i.push(j[d]);return i}}}),define("vpro/mediaplayer/js/util/Source",["vpro/mediaplayer/js/MimeTypes"],function(a){var b=function(b){var c=typeof b=="string"?b:b.url;this.src=c,this.type=a.resolveMimeType(c)};return b}),define("vpro/mediaplayer/js/util/TimeRanges",[],function(){function d(a,b){if(b<a)throw Error("The end of a range must be greater than the start");this.start=a,this.end=b}function c(){this.ranges=[]}var a=Math.max,b=Math.min;c.prototype={size:function(){return this.ranges.length},start:function(a){if(this.ranges[a])return this.ranges[a].start},end:function(a){if(this.ranges[a])return this.ranges[a].end},add:function(a,b){this.ranges=this.__collapseRanges__(new d(a,b),this.ranges)},__collapseRanges__:function(c,e){var f=[c];for(var g=e.length-1;g>=0;g--)this.__hasOverlap__(e[g],f[0])&&f.push(e.splice(g,1)[0]);e.push(f.reduce(function(c,e){return new d(b(c.start,e.start),a(c.end,e.end))})),e.sort(function(a,b){return a.start-b.start});return e},__hasOverlap__:function(a,b){return!(a.end<=b.start)&&!(a.start>=b.end)}};return c}),define("vpro/mediaplayer/js/player",["jquery","ext/stapes/0.8.1/stapes","ext/stapes/plugins","vpro/mediaplayer/js/util/StapesObservable","vpro/mediaplayer/js/util/EventIntent","vpro/mediaplayer/js/Controls","vpro/mediaplayer/js/engines/engines","vpro/mediaplayer/js/util/Source","vpro/mediaplayer/js/util/TimeRanges"],function(a,b,c,d,e,f,g,h,i){var j=b.subclass({constructor:function(b,c){this.node=a(b),this.node.is(".player")||this.node.addClass("player"),c=c?c:{},c=a.extend({},j.DEFAULTS,c),c=a.extend({},c,this.parseNode(this.node[0])),this.options=c,this.engines=g.getAvailable(c.engines),c.src&&this.setSrc(c.src),c.controls&&(this.controls=this.createControls(c)),c.poster&&this.setPoster(c.poster),c.segments&&(this.segments=c.segments),c.currenttime&&this.currentTime(c.currenttime),this.bindEventHandlers()},bindEventHandlers:function(){a(document).bind("fullscreenchange mozfullscreenchange webkitfullscreenchange",this.handleFullScreenChange.bind(this)),this.eventIntent=new e(this.node),this.eventIntent.add(this.handleMouseIdle.bind(this),this.handleMouseHover.bind(this)),this.eventIntent.resetState()},play:function(){this.engine&&this.engine.play()},pause:function(){this.engine&&this.engine.pause()},stop:function(){this.engine&&this.engine.stop()},src:function(a){if(a!==undefined)this.setSrc(a);else return this.getSrc()},volume:function(a){if(a!==undefined)this.setVolume(a);else return this.getVolume()},autoplay:function(a){if(a!==undefined)this.setAutoplay(a);else return this.getAutoplay()},muted:function(a){if(a!==undefined)this.setMuted(a);else return this.getMuted()},loop:function(a){if(a!==undefined)this.setLoop(a);else return this.getLoop()},poster:function(a){if(a!==undefined)this.setPoster(a);else return this.setPoster()},currentTime:function(a){if(a!==undefined)this.setCurrentTime(a);else return this.getCurrentTime()},width:function(){return this.getWidth()},height:function(){return this.getHeight()},videoWidth:function(){return this.getVideoWidth()},videoHeight:function(){return this.getVideoHeight()},buffered:function(){return this.getBuffered()},seeking:function(){return this.getSeeking()},ended:function(){return this.getEnded()},error:function(){return this.getError()},duration:function(){return this.getDuration()},setSrc:function(a){this.node.removeClass("error"),typeof a=="string"?a=[new h(a)]:typeof a=="object"&&(a=a.map(function(a){return new h(a)}));var b=this.getEngineData(a);this.node.find(".player-error").remove(),this.node.addClass("loading");if(b){var c=b.source,d=b.engine,e=/#t=([0-9 .]+),([0-9 .]+)/.exec(c.src);e&&this.setSegments([{start:e[1],end:e[2]}]),this.engine&&this.engine instanceof d&&this.engine.setSrc(c.src);if(!this.engine||!(this.engine instanceof d))this.engine=this.createEngine(d,c.src);this.node.removeClass("audio video"),/audio|video/.test(c.type)&&this.node.addClass(/audio|video/.exec(c.type)[0])}else this.engine&&(this.engine.destroyCanvas(),this.engine=null),this.renderEngineNotFound(a);this.controls&&this.controls.reset(this.engine)},getSrc:function(){if(this.engine)return this.engine.getSrc()},setCurrentTime:function(a){this.engine&&this.engine.setCurrentTime(a)},getCurrentTime:function(){if(this.engine)return this.engine.getCurrentTime()},setSegments:function(a){this.segments=a},getSegments:function(){if(this.segments)return this.segments},setVolume:function(a){this.engine&&(this.engine.getMuted()&&this.engine.setMuted(!1),this.engine.setVolume(parseFloat(a)))},getVolume:function(){if(this.engine)return this.engine.getVolume()},setMuted:function(a){this.engine&&this.engine.setMuted(a),this.controls&&this.controls.updateVolume(a?0:this.engine.getVolume())},getMuted:function(){this.engine&&this.engine.getMuted()},setAutoplay:function(a){this.engine&&this.engine.setAutoplay(a)},getAutoplay:function(){this.engine&&this.engine.getAutoplay()},setLoop:function(a){this.engine&&this.engine.setLoop(a)},getLoop:function(){if(this.engine)return this.engine.getLoop()},getWidth:function(){return this.node.width()},getHeight:function(){return this.node.height()},getVideoWidth:function(){if(this.engine)return this.engine.getVideoWidth()},getVideoHeight:function(){if(this.engine)return this.engine.getVideoHeight()},getBuffered:function(){if(this.engine)return this.engine.getBuffered()},getPaused:function(){if(this.engine)return this.engine.getPaused()},getPlayed:function(){if(this.engine)return this.engine.getPlayed()},getSeeking:function(){if(this.engine)return this.engine.getSeeking()},getEnded:function(){if(this.engine)return this.engine.getEnded()},getError:function(){return this._error},setPoster:function(a){this.engine&&this.engine.setPoster(a),this._poster=a,this.node.find(".player-poster").remove();if(a&&this.node.find(".player-error").length<1){var b=document.createElement("div");b.className="player-poster",b.style.backgroundImage='url("'+encodeURI(a)+'")',this.node.append(b)}},getPoster:function(){return this._poster},grabImageData:function(){if(this.engine)return this.engine.grabImageData()},getDuration:function(){return this._duration?this._duration:this.engine?this.engine.getDuration():NaN},getNode:function(){return this.node.get(0)||!1},parseNode:function(a){if(typeof a=="undefined"||!a)throw new Error("Invalid node element for player");var b=j.ATTRIBUTE_WHITELIST,c,d,e={};for(var f=b.length-1;f>=0;f--)c=b[f],typeof a.hasAttribute!="undefined"&&a.hasAttribute(c)&&(d=a.getAttribute(c),e[c]=d||!0,d===c&&(e[c]=!0));return e},getEngineData:function(a){var b=this.engines,c,d;for(var e=0;e<a.length;e++){d=a[e];for(var f=0;f<b.length;f++){c=b[f];if(c.isAvailable()&&c.canPlayType(d.type))return{engine:c,source:d}}}return null},findRequiredPlugin:function(a){var b,c;for(var d=0;d<a.length;d++){b=a[d];for(var e in g.engines){c=g.engines[e];if(c.canPlayType(b.type)&&c.PLUGIN!==undefined)return{name:c.PLUGIN,link:c.PLUGIN_DOWNLOAD}}}},getEngineName:function(){if(this.engine)return this.engine.name},createEngine:function(a,b){var c={src:b,volume:this.engine?this.engine.getVolume():this.options.volume,muted:this.engine?this.engine.getMuted():this.options.muted,loop:this.options.loop,controls:this.options.controls,autoplay:this.options.autoplay,fill:this.node.css("background-color"),currenttime:this.options.currenttime,poster:this.getPoster()};this.engine&&this.engine.destroyCanvas();var d=new a(c);d.createCanvas(this.node[0]),this.listenTo(d,"durationchange",this.handleDurationChange.bind(this)),this.listenTo(d,"loadedmetadata",this.handleLoadedMetaData.bind(this)),this.listenTo(d,"volumechange",this.handleVolumeChange.bind(this)),this.listenTo(d,"timeupdate",this.handleTimeUpdate.bind(this)),this.listenTo(d,"loadeddata",this.handleLoadedData.bind(this)),this.listenTo(d,"canplay",this.handleCanPlay.bind(this)),this.listenTo(d,"error",this.handleError.bind(this)),this.listenTo(d,"pause",this.handlePause.bind(this)),this.listenTo(d,"play",this.handlePlay.bind(this)),this.listenTo(d,"loadstart",this.handleLoadStart.bind(this)),this.listenTo(d,"progress",this.handleProgress.bind(this)),this.listenTo(d,"suspend",this.handleSuspend.bind(this)),this.listenTo(d,"abort",this.handleAbort.bind(this)),this.listenTo(d,"emptied",this.handleEmptied.bind(this)),this.listenTo(d,"stalled",this.handleStalled.bind(this)),this.listenTo(d,"waiting",this.handleWaiting.bind(this)),this.listenTo(d,"playing",this.handlePlaying.bind(this)),this.listenTo(d,"canplaythrough",this.handleCanPlayThrough.bind(this)),this.listenTo(d,"seeking",this.handleSeeking.bind(this)),this.listenTo(d,"seeked",this.handleSeeked.bind(this)),this.listenTo(d,"ended",this.handleEnded.bind(this)),this.listenTo(d,"ratechange",this.handleRateChange.bind(this)),this.listenTo(d,"adstart",this.handleAdStart.bind(this)),this.listenTo(d,"adcomplete",this.handleAdComplete.bind(this));return d},createControls:function(a){this.controls&&this.controls.destroyNode();var b=new f(a.html);this.node.append(b.createNode()),this.listenTo(b,"request:play",this.handleRequestPlay.bind(this)),this.listenTo(b,"request:pause",this.handleRequestPause.bind(this)),this.listenTo(b,"request:mute",this.handleRequestMute.bind(this)),this.listenTo(b,"request:unmute",this.handleRequestUnmute.bind(this)),this.listenTo(b,"request:timeupdate",this.handleRequestTimeUpdate.bind(this)),this.listenTo(b,"request:volumechange",this.handleRequestVolumeChange.bind(this)),this.listenTo(b,"request:togglefullscreen",this.handleRequestToggleFullScreen.bind(this)),b.updateVolume(a.volume),b.updateMute(a.muted);return b},enterFullScreen:function(){var a=this.node[0];typeof Element!="undefined"&&(Element.prototype.requestFullScreen?a.requestFullScreen():Element.prototype.webkitRequestFullScreen?a.webkitRequestFullScreen():Element.prototype.msRequestFullscreen?a.msRequestFullscreen():"HTMLMediaElement"in window&&HTMLMediaElement.prototype.mozRequestFullScreen?a.mozRequestFullScreen():/ugflash|ugsilverlight|silverlight/i.test(this.engine.name)?alert("Dubbelklik op de video voor fullscreen"):this.engine.name==="video"&&this.engine.canvas&&this.engine.canvas.webkitSupportsFullscreen?this.engine.canvas.webkitEnterFullscreen():document.isFullScreen=!0)},exitFullScreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.isFullScreen=!1},renderEngineNotFound:function(a){var b=this.findRequiredPlugin(a);this.emitPluginError(b)},emitPluginError:function(a){var b="De opgevraagde uitzending kan niet worden afgespeeld. ";a&&a.name?b+='U kunt deze uitzending afspelen met <a target="_blank" href="'+a.link+'">'+a.name+"</a>":b+="Er is een onbekende fout opgetreden.",this._error=b,this.emit("error",{msg:b})},destroy:function(){this.controls&&this.controls.node&&this.controls.destroyNode(),this.engine&&this.engine.destroyCanvas(),this.stopListening()},handleMouseHover:function(){this.node.addClass("player-hover")},handleMouseIdle:function(){this.controls&&!this.controls.isHovered()&&this.node.removeClass("player-hover")},handleLoadedMetaData:function(a){this.node.removeClass("loading suspend");if(this.controls){var b=this.engine.getCurrentTime(),c=this.getDuration();this.controls.updateRemaining(c-b),this.controls.updateElapsed(b),this.controls.updateTime(b/c),this.controls.updateDuration(c),this.controls.updateVolume(this.engine.getVolume()),this.controls.updatePause(this.engine.getPaused()),this.controls.updateMute(this.engine.getMuted())}this.dispatchEvent(a)},handlePlay:function(a){this.options.currenttime&&this.getPlayed()&&!this.getPlayed().length&&this.setCurrentTime(this.options.currenttime),this.node.is(".audio")||this.node.find(".player-poster").fadeOut(500),this.controls&&this.controls.updatePause(!1),this.dispatchEvent(a)},handlePause:function(a){this.controls&&this.controls.updatePause(!0),this.dispatchEvent(a)},handleDurationChange:function(a){var b=this.engine.getDuration();if(!isNaN(b)&&b!==0&&b!==this._duration){this._duration=b;if(this.controls){var c=this.getDuration();this.controls.updateDuration(c),this.segments&&this.segments.length&&this.controls.updateSegments(this.segments,c)}this.dispatchEvent(a)}},handleTimeUpdate:function(a){if(this.controls){var b=this.engine.getCurrentTime(),c=this.getDuration();this.controls.updateRemaining(c-b),this.controls.updateElapsed(b),this.controls.updateTime(b/c)}this.dispatchEvent(a)},handleVolumeChange:function(a){if(this.controls){var b=this.engine.getMuted();b||this.controls.updateVolume(this.engine.getVolume()),this.controls.updateMute(b)}this.dispatchEvent(a)},handleError:function(a){var b=this.engine.getSrc(),c=b instanceof h?[b]:[new h(b||"")],d=this.findRequiredPlugin(c);d?this.emitPluginError(d):(this._error=a.msg,this.emit("error",a))},handleCanPlayThrough:function(a){this.dispatchEvent(a)},handleLoadedData:function(a){this.dispatchEvent(a)},handleRateChange:function(a){this.dispatchEvent(a)},handleLoadStart:function(a){this.dispatchEvent(a)},handleProgress:function(a){this.node.removeClass("suspend"),this.controls&&this.engine.getBuffered()&&this.controls.updateBuffered(this.engine.getBuffered(),this.engine.getCurrentTime(),this.getDuration()),this.dispatchEvent(a)},handleCanPlay:function(a){this.dispatchEvent(a)},handleSuspend:function(a){this.node.addClass("suspend"),this.dispatchEvent(a)},handleEmptied:function(a){this.dispatchEvent(a)},handleStalled:function(a){this.dispatchEvent(a)},handlePlaying:function(a){this.dispatchEvent(a)},handleWaiting:function(a){this.dispatchEvent(a)},handleSeeking:function(a){this.node.addClass("seeking"),this.dispatchEvent(a)},handleSeeked:function(a){this.node.removeClass("seeking");if(this.controls){var b=this.engine.getCurrentTime(),c=this.getDuration();this.controls.updateRemaining(c-b),this.controls.updateElapsed(b),this.controls.updateTime(b/c)}this.dispatchEvent(a)},handleAbort:function(a){this.dispatchEvent(a)},handleEnded:function(a){this.dispatchEvent(a)},handleFullScreenChange:function(){document.isFullScreen||document.mozFullScreen||document.webkitIsFullScreen?this.node.addClass("fullscreen"):this.node.removeClass("fullscreen")},handleRequestPlay:function(){this.play()},handleRequestPause:function(){this.pause()},handleRequestMute:function(){this.setMuted(!0)},handleRequestUnmute:function(){this.setMuted(!1)},handleRequestTimeUpdate:function(a){this.setCurrentTime(a*this.getDuration())},handleRequestVolumeChange:function(a){this.muted()&&this.muted(!1),this.setVolume(a)},handleRequestToggleFullScreen:function(){document.isFullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement?this.exitFullScreen():this.enterFullScreen()},handleAdStart:function(){this.node.addClass("player-controls-disabled")},handleAdComplete:function(){this.node.removeClass("player-controls-disabled")}});j.proto(d),j.proto(c.listenTo),j.extend({DEFAULTS:{controls:undefined,muted:undefined,autoplay:undefined,loop:undefined,src:undefined,poster:undefined,volume:.5,html:undefined,engines:undefined,segments:undefined},ATTRIBUTE_WHITELIST:["autoplay","controls","loop","muted","poster","src","volume","currenttime"]}),document.cancelFullScreen=function(){return document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen}();return j}),define("vpro/mediaplayer/js/player",function(){}),function(a){typeof define=="function"&&define.amd?define("vpro/purno/shims",[],a):a()}(function(){var a=Element.prototype,b=/\s/;Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),Array.prototype.every||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++){var e=a.call(b||this,this[c],c,this);if(!e)return!1}return!0}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++){var f=this[d];a.call(b||this,f,d,this)&&c.push(f)}return c}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b||this,this[c],c,this)}),Array.prototype.map||(Array.prototype.map=function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++)c[d]=a.call(b||this,this[d],d,this);return c}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(this===null)return-1;for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1}),Array.prototype.some||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;c<d;c++){var e=a.call(b||this,this[c],c,this);if(e)return!0}return!1}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){if("function"!=typeof a)throw new TypeError(a+" is not a function");var c=0,d=this.length>>>0,e,f=!1;1<arguments.length&&(e=b,f=!0);for(;d>c;++c){if(!this.hasOwnProperty(c))continue;f?e=a(e,this[c],c,this):(e=this[c],f=!0)}if(!f)throw new TypeError("Reduce of empty array with no initial value");return e}),String.prototype.trim||(String.prototype.trim=function(){var a=this.replace(/^\s\s*/,""),c=a.length;while(b.test(a.charAt(--c)));return a.slice(0,c+1)}),"classList"in document.createElement("div")||Object.defineProperty(a,"classList",{get:function(){function b(b){return function(c){var d=a.className.split(/\s+/),e=d.indexOf(c);b(d,e,c),a.className=d.join(" ").trim()}}var a=this,c={add:b(function(a,b,c){~b||a.push(c)}),remove:b(function(a,b){~b&&a.splice(b,1)}),toggle:b(function(a,b,c){~b?a.splice(b,1):a.push(c)}),contains:function(b){return!!~a.className.split(/\s+/).indexOf(b)},item:function(b){return a.className.split(/\s+/)[b]||null}};return c}}),a.matchesSelector=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;while(c[++d]&&c[d]!=b);return!!c[d]}}),function(){var a={},b=function(){},c=Array.prototype,d=Object.prototype.toString,e=c.slice,f=/\s/,g=Element.prototype;a.EventEmitter=function(){},a.EventEmitter.prototype={addEventListener:function(a,b){this._purnoHandlers=this._purnoHandlers||{},this._purnoHandlers[a]=this._purnoHandlers[a]||[],this._purnoHandlers[a].push(b)},dispatchEvent:function(a){this._purnoHandlers=this._purnoHandlers||{};if(!!this._purnoHandlers[a]){var b=this._purnoHandlers[a];for(var c=0,d=b.length;c<d;c++)b[c].apply(this,e.call(arguments,1))}},removeEventListener:function(a,b){this._purnoHandlers=this._purnoHandlers||{};if(!!this._purnoHandlers[a]){var c=this._purnoHandlers[a];for(var d=0,e=c.length;d<e;d++){var f=c[d];f===b&&c.splice(d,1)}}}},a.addEventListener=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):(a["e"+b+c]=c,a[b+c]=function(){var d=window.event;d.target=d.target||d.srcElement,a["e"+b+c](d)},a.attachEvent("on"+b,a[b+c]))},a.clone=function(a){b.prototype=a;return new b},a.domReady=function(b){/in/.test(document.readyState)?setTimeout(function(){a.domReady(b)},9):b()},a.extend=function(){var a=arguments[0];e.call(arguments,1).forEach(function(b){if(!b)throw new Error("purno.extend: source objects are undefined");for(var c in b){var d=b[c];a[c]=d}});return a},a.makeArray=function(a){var b=[];try{b=e.call(a)}catch(c){for(var d=0,f=a.length;d<f;d++)b.push(a[d])}return b},a.parents=function(a,b){var c=[],d=a.parentNode;while(d.parentNode)c.push(d),d=d.parentNode;return b?c.filter(function(a){return a.matchesSelector(b)}):c},a.query=function(b,c){c=c||document;return a.makeArray(c.querySelectorAll(b))},a.removeEventListener=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):(a.detachEvent("on"+b,a[b+c]),a[b+c]=null,a["e"+b+c]=null)},a.typeOf=function(a){return a===null||typeof a=="undefined"?String(a):d.call(a).replace(/\[object |\]/g,"").toLowerCase()},typeof module!="undefined"&&module.exports?module.exports=a:typeof define=="function"&&define.amd?define("vpro/purno/purno",["vpro/purno/shims"],function(){return a}):window.purno=window.purno||a}(),define("vpro/enrichedplayer/visualizerContainer",["vpro/purno/purno"],function(a){var b={initialVisualizer:0},c=function(c){c=a.extend({},b,c),this.visualizers=[],this._onVisualizerActivateHandler=this._onVisualizerActivate.bind(this),this._onVisualizerDeactivateHandler=this._onVisualizerDeactivate.bind(this),c.player&&(this.setPlayer(c.player),delete c.player),c.visualizerContainer&&(this.setVisualizerContainer(c.visualizerContainer),delete c.visualizerContainer),c.visualizers&&(c.visualizers.forEach(function(a){this.addVisualizer(a)},this),delete c.visualizers);if(c.initialVisualizer!==!1){var d=this.getVisualizer(c.initialVisualizer);d&&this.activateVisualizer(d)}this.config=c};c.prototype=a.clone(a.EventEmitter.prototype),a.extend(c.prototype,{setVisualizerContainer:function(a){this.visualizerContainer=a,this.visualizers.forEach(function(b){b.setParentNode(a),b.isActive()?this._onVisualizerActivate(b):this._onVisualizerDeactivate(b)})},getVisualizerContainer:function(){return this.visualizerContainer},getVisualizer:function(a){var b,c=this.visualizers;switch(typeof a){case"string":this.visualizers.forEach(function(c){c.name===a&&(b=c)},this);break;case"number":var d=c[a];typeof d!="undefined"&&(b=d);break;case"object":this.visualizers.forEach(function(c){c===a&&(b=c)},this)}return b},activateVisualizer:function(a){var b=this.getVisualizer(a);!b||b.activate()},addVisualizer:function(a){this.visualizers.push(a),this.visualizerContainer&&a.setParentNode(this.visualizerContainer),a.addEventListener("activate",this._onVisualizerActivateHandler),a.addEventListener("deactivate",this._onVisualizerDeactivateHandler),a.deactivate(),this.hasPlayer()&&a.setPlayer(this.getPlayer())},removeVisualizer:function(a){var b=this.getVisualizer(a);if(!b)return!1;b.removeEventListener("activate",this._onVisualizerActivateHandler),b.removeEventListener("deactivate",this._onVisualizerDeactivateHandler);var c=this.visualizers;c.splice(c.indexOf(b),1);return!0},getActiveVisualizers:function(){var a=[];this.visualizers.forEach(function(b){b.isActive()&&a.push(b)});return a},_onVisualizerActivate:function(a){a.show(),this.visualizers.forEach(function(b){b!=a&&b.isActive()&&b.deactivate()})},_onVisualizerDeactivate:function(a){a.hide()},countVisualizers:function(){return this.visualizers.length},setPlayer:function(a){this.player=a,this.visualizers.forEach(function(b){b.setPlayer(a)})},getPlayer:function(){return this.player},hasPlayer:function(){return!!this.player},removePlayer:function(){this.player=null,this.visualizers.forEach(function(a){a.removePlayer()})}});return c}),define("vpro/mediaplayer/js/util/StapesObservable",{addEventListener:function(){this.on.apply(this,arguments)},removeEventListener:function(){this.off.apply(this,arguments)},dispatchEvent:function(a){this.emit(a.type,a)}}),define("vpro/mediaplayer/js/util/EventIntent",["jquery","vpro/purno/shims"],function(a){var b=function(a){this.element=a,this.timing=this.isTouchDevice()?5e3:1500,this.enableFns=[],this.disableFns=[],this.state=!1,this.bindEventHandlers()};b.prototype={add:function(a,b){this.enableFns.push(a),this.disableFns.push(b)},bindEventHandlers:function(){a(this.element).on("mousemove mouseenter mouseover "+(this.isTouchDevice()?"touchend":"click"),function(a){if(!a.pageX||!a.pageY||a.pageX!=this.currentX||a.pageY!=this.currentY)this.currentX=a.pageX,this.currentY=a.pageY,this.state&&(this.state=!1,this.disableFns.forEach(function(a){a()})),clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.state=!0,this.enableFns.forEach(function(a){a()})}.bind(this),this.timing)}.bind(this))},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},remove:function(a,b){var c=this.enableFns.indexOf(a);c!=-1&&this.enableFns.splice(c,1);var d=this.disableFns.indexOf(b);d!=-1&&this.disableFns.splice(d,1)},resetState:function(){this.state=!0}};return b}),define("vpro/util/dragger",["jquery"],function(a){function b(b,c,d){this.scope=a(c||document.documentElement),this.draggable=this.scope.find(b),this.draggableSelector=b,d=d||{},this.constrain=d.constrain===!1?!1:!0,this.allowX=d.allowX===!1?!1:!0,this.allowY=d.allowY===!1?!1:!0,"ontouchstart"in window?this.scope.bind("touchstart",this.handleTouchStart.bind(this)):this.scope.bind("mousedown",this.handleMouseDown.bind(this)),this.x=0,this.y=0,this.dragging=!1}b.prototype={grab:function(){this.draggable.trigger("dragstart"),this.dragging=!0},release:function(){this.draggable.trigger("dragend"),this.dragging=!1},drag:function(a){var b,c,d,e;b=a.pageX-this.scope.offset().left,c=a.pageY-this.scope.offset().top,d=this.scope.outerWidth?this.scope.outerWidth():this.scope.width(),e=this.scope.outerHeight?this.scope.outerHeight():this.scope.height(),b=parseFloat(100*b/d),c=parseFloat(100*c/e),this.move(b,c),this.draggable.trigger("dragmove"),this.dragging=!0},move:function(a,b){this.constrain&&(a=a>100?100:a<0?0:a,b=b>100?100:b<0?0:b),this.x=a,this.y=b;var c={};this.allowX&&(c.left=a+"%"),this.allowY&&(c.top=b+"%"),this.draggable.css(c)},handleMouseDown:function(b){b.preventDefault(),a(b.target).closest(this.draggableSelector).length?(a(document).bind("mouseup.dragger mouseleave.dragger",this.handleMouseUp.bind(this)),a(document).bind("mousemove.dragger",this.handleMouseMove.bind(this)),this.grab()):(this.grab(),this.drag(b),this.release())},handleMouseMove:function(a){a.preventDefault(),this.drag(a)},handleMouseUp:function(b){b.preventDefault(),a(document).unbind("mousemove.dragger mouseup.dragger mouseleave.dragger"),this.release()},handleTouchStart:function(b){b.preventDefault(),b=b.originalEvent.targetTouches[0],a(b.target).closest(this.draggableSelector).length?(this.scope.bind("touchmove.dragger",this.handleTouchMove.bind(this)),this.scope.bind("touchend.dragger touchcancel.dragger touchleave.dragger gestureend.dragger gesturechange.dragger",this.handleTouchEnd.bind(this)),this.grab()):(this.grab(),this.drag(b),this.release())},handleTouchMove:function(a){a.preventDefault(),a=a.originalEvent.targetTouches[0],this.drag(a)},handleTouchEnd:function(a){a.preventDefault(),this.scope.unbind("touchemove.dragger touchend.dragger touchcancel.dragger touchleave.dragger gestureend.dragger gesturechange.dragger"),this.release()},on:function(a,b){this.draggable.bind(a,b)},addEventListener:function(a,b){this.draggable.bind(a,b)}};return b}),define("vpro/mediaplayer/js/Controls",["jquery","ext/stapes/0.8.1/stapes","vpro/util/dragger"],function(a,b,c){var d="ontouchend"in window?"touchend":"click",e=/ipad/i.test(navigator.platform||""),f=!/ipad|iphone|ipod/i.test(navigator.platform||""),g=!/iphone|ipod/i.test(navigator.platform||""),h=b.subclass({constructor:function(a){this.html='<div class="player-controls">'+(a||h.HTML)+"</div>"},show:function(){this.node.fadeIn()},hide:function(){this.node.fadeOut()},createNode:function(){var b=a(this.html);this.setNode(b);return b},setNode:function(a){this.initializeNode(a),this.node=a},initializeNode:function(a){this.playpause=a.find(".player-playpause"),this.elapsed=a.find(".player-time-elapsed"),this.duration=a.find(".player-time-duration"),this.remaining=a.find(".player-time-remaining"),this.elapsedBar=a.find(".player-scrubber-elapsed"),this.progressBar=a.find(".player-scrubber-progress"),this.volumeBar=a.find(".player-volume-bar"),this.volumeDragger=a.find(".player-volume-dragger"),this.playpause.length&&this.playpause.bind(d,function(){this.playpause.is(".paused")?this.emit("request:play"):this.emit("request:pause")}.bind(this)),this.fullscreen=a.find(".player-fullscreen"),this.fullscreen.length&&(g?this.fullscreen.bind(d,function(){this.emit("request:togglefullscreen")}.bind(this)):this.fullscreen.addClass("player-control-disabled")),this.mute=a.find(".player-mute"),this.mute.length&&(f?this.mute.bind(d,function(){this.mute.is(".muted")?this.emit("request:unmute"):this.emit("request:mute")}.bind(this)):this.mute.addClass("player-control-disabled")),this.volumeDragger.length&&!f&&this.volumeDragger.addClass("player-control-disabled"),a.find(".player-volume-head").length&&(this.volume=new c(".player-volume-head",a.find(".player-volume"),{allowY:!1}),this.volume.on("dragmove",function(){this.emit("request:volumechange",this.volume.x/100)}.bind(this))),a.find(".player-scrubber-head").length&&(this.scrubberHead=a.find(".player-scrubber-head"),this.time=new c(".player-scrubber-head",a.find(".player-scrubber"),{allowY:!1}),this.time.on("dragend",function(){this.emit("request:timeupdate",parseFloat(this.time.x/100)),this.updateElapsedBar()}.bind(this))),a.on("mouseleave ",function(){this.handleMouseLeave()}.bind(this)),a.on("mouseenter ",function(){this.handleMouseEnter(),this.isTouchDevice()&&this.handleMouseLeave()}.bind(this))},isHovered:function(){return this.hovered||!1},handleMouseLeave:function(){this.hovered=!1,this.node.removeClass("controls-hover")},handleMouseEnter:function(){this.hovered=!0,this.node.addClass("controls-hover")},reset:function(b){if(!!this.node){var c=!!b&&!!b.controllable;a(this.node)[c?"removeClass":"addClass"]("player-controls-disabled"),e&&this.fullscreen&&this.fullscreen.length&&this.fullscreen[b&&b.name==="video"?"removeClass":"addClass"]("player-control-disabled")}},destroyNode:function(){!this.node||this.node.remove()},getNode:function(){return this.node},updatePause:function(a){this.playpause&&(a?this.playpause.addClass("paused"):this.playpause.removeClass("paused"))},updateMute:function(a){this.mute&&(a?this.mute.addClass("muted"):this.mute.removeClass("muted"))},updateVolume:function(a){this.volume&&!this.volume.dragging&&this.volume.move(a*100,0),this.volumeBar&&this.volumeBar.length&&this.volumeBar.css("width",a*100+"%")},updateTime:function(a){this.time&&!this.time.dragging&&this.time.move(a*100,0),this.updateElapsedBar()},updateRemaining:function(a){!this.remaining||this.remaining.html("-"+this.formatTime(a))},updateElapsed:function(a){!this.elapsed||this.elapsed.html(this.formatTime(a))},updateElapsedBar:function(){if(!!this.elapsedBar&&!!this.elapsedBar.length){var a;if(this.scrubberHead&&this.scrubberHead.length)try{a=this.scrubberHead[0].style.left}catch(b){a=this.scrubberHead.css("left")}this.elapsedBar.css("width",a?a:0)}},updateDuration:function(a){!this.duration||this.duration.html(this.formatTime(a))},updateBuffered:function(a,b,c){if(!!this.progressBar){if(!a||!b||!c)return;var d=a.length,e=0,f=0;while(d--)e=Math.max(e,a.end(d));e>f&&(e=e/c*100,this.progressBar.css({left:f,width:e+"%"}))}},updateSegments:function(b,c){if(!!this.node){this.node.find(".player-scrubber-segment").remove();var d;for(var e=b.length-1;e>=0;e--){d=b[e];var f=a('<div class="player-scrubber-segment '+(b.length>1?"player-scrubber-segment-multiple":"")+'"></div>');this.node.find(".player-scrubber").append(f),f.css({left:parseFloat(d.start/c*100)+"%",right:parseFloat(100-d.end/c*100)+"%"})}}},formatTime:function(a){var b=Math.round(parseFloat(a));if(isNaN(b)||b<=0)return"00:00";var c=Math.floor(b/3600);c=c>0?c+":":"";var d=Math.floor(b%3600/60);d=(d<10?"0":"")+d+":";var e=Math.floor(b%3600%60);e=(e<10?"0":"")+e;return c+d+e},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},addEventListener:function(a,b){return this.on.apply(this,arguments)}});h.HTML=['<div class="player-controlbar">','<div class="player-playpause player-button paused"></div>','<time class="player-time-elapsed">0:00</time>','<div class="player-scrubber-dragger">','<div class="player-scrubber">','<div class="player-scrubber-head"></div>','<div class="player-scrubber-elapsed"></div>','<div class="player-scrubber-progress"></div>',"</div>","</div>",'<div class="player-fullscreen player-button"></div>','<div class="player-mute player-button"></div>','<div class="player-volume-dragger">','<div class="player-volume">','<div class="player-volume-head"></div>','<div class="player-volume-bar"></div>',"</div>","</div>",'<time class="player-time-duration">0:00</time>','<time class="player-time-remaining">0:00</time>',"</div>"].join("");return h}),define("vpro/mediaplayer/js/engines/Engine",["ext/stapes/0.8.1/stapes"],function(a){var b=a.subclass({constructor:function(a){this.options=a||{},this.controllable=!0},dispatchEvent:function(a){return this.emit(a.type,a)},addEventListener:function(a,b){return this.on(a,b)},removeEventListener:function(a,b){return this.off(a,b)},handleCanvasEvent:function(a){b.isStandardEvent(a.type)&&this.emit(a.type,a)},createCanvas:function(){throw new Error("Implementation is required")},destroyCanvas:function(){return!1},grabImageData:function(){return!1},play:function(){},pause:function(){},stop:function(){},setSrc:function(a){},getSrc:function(){},setVolume:function(a){},getVolume:function(){},setCurrentTime:function(a){},getCurrentTime:function(){},setMuted:function(a){},getMuted:function(){},setAutoplay:function(a){},getAutoplay:function(){},setLoop:function(a){},getLoop:function(){},setPoster:function(){},getDuration:function(){},getVideoWidth:function(){},getVideoHeight:function(){},getBuffered:function(){},getCurrentSrc:function(){},getPaused:function(){},getPlayed:function(){},getSeeking:function(){},getEnded:function(){},getNetworkState:function(){},getReadyState:function(){},getError:function(){},_checkSegmentStart:function(){if(!this._segmentSeeked&&!!this._segmentStart){if(this._customStart)return;this._segmentSeeked=!0,this.setCurrentTime(this._segmentStart)}},_checkSegmentEnd:function(){if(!this._segmentEnded&&!!this._segmentEnd){if(this._customStart&&this._customStart>=this._segmentEnd)return;this.getCurrentTime()>=this._segmentEnd&&(this._segmentEnded=!0,this.pause())}},_seekToCustomStart:function(){this._customStart&&this.setCurrentTime(this._customStart)},_restart:function(){this._customStart=NaN,this._segmentSeeked=!1,this._segmentEnded=!1,this.setCurrentTime(0)},_getSaveSrc:function(a){this._segmentStart=undefined,this._segmentEnd=undefined,this._segmentSeeked=!1,this._segmentEnded=!1;if(!a)return"";var b=a.lastIndexOf("#");if(b===-1)return a;var c=a.slice(b).split("=")[1];this._segmentStart=parseFloat(c.split(",")[0])||undefined,this._segmentEnd=parseFloat(c.split(",")[1])||undefined,a=a.split("#")[0];return a}});b.NAME=undefined,b.PLUGIN=undefined,b.PLUGIN_DOWNLOAD=undefined,b.MEDIA_ERR_ABORTED=1,b.MEDIA_ERR_NETWORK=2,b.MEDIA_ERR_DECODE=3,b.MEDIA_ERR_SRC_NOT_SUPPORTED=4,b.STANDARD_EVENTS=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange","adstart","adcomplete"],b.isStandardEvent=function(a){return b.STANDARD_EVENTS.indexOf(a)!==-1},b.isAvailable=function(){return!1},b.canPlayType=function(a){return!1};return b}),define("vpro/mediaplayer/js/engines/HTML5Engine",["vpro/mediaplayer/js/engines/Engine"],function(a){var b=a.subclass({constructor:a.prototype.constructor,createCanvas:function(a){return a.appendChild(document.createElement("div"))},destroyCanvas:function(){this.canvas.parentNode.removeChild(this.canvas)},setSrc:function(a){/radiobox\d?\.omroep\.nl/.test(a)&&(a=a+"?count=0"),this._getSaveSrc(a),this.canvas.src=a,this._seekToCustomStart()},getSrc:function(){return this.canvas.src},setCurrentTime:function(a){clearTimeout(this.__seeking__),a=parseInt(a,10);var b=this.isSeekable(a);b?this.canvas.currentTime=a:this.__seeking__=setTimeout(function(){this.setCurrentTime(a)}.bind(this),250)},getCurrentTime:function(){return this.canvas.currentTime},setVolume:function(a){this.setMuted(!1),this.canvas.volume=a},getVolume:function(){return this.canvas.volume},setMuted:function(a){this.canvas.muted=a},getMuted:function(){return this.canvas.muted},setAutoplay:function(a){this.canvas.autoplay=a},getAutoplay:function(){return this.canvas.autoplay},setLoop:function(a){this.canvas.loop=a},getLoop:function(){return this.canvas.loop},getDuration:function(){return this.canvas.duration},getVideoWidth:function(){return this.canvas.videoWidth},getVideoHeight:function(){return this.canvas.videoHeight},getBuffered:function(){return this.canvas.buffered},getCurrentSrc:function(){return this.canvas.currentSrc},getPaused:function(){return this.canvas.paused},getPlayed:function(){return this.canvas.played},getSeeking:function(){return this.canvas.seeking},getEnded:function(){return this.canvas.ended},getNetworkState:function(){return this.canvas.networkState},getReadyState:function(){return this.canvas.readyState},getError:function(){return this.canvas.error},play:function(){this.canvas.play()},pause:function(){this.canvas.pause()},grabImageData:function(){return!1},isSeekable:function(a){var b=this.canvas.seekable;return!b||!b.length?!1:a>=b.start(0)&&a<b.end(0)}});b.extend(a);return b}),define("vpro/mediaplayer/js/engines/AudioHTML5Engine",["vpro/mediaplayer/js/engines/HTML5Engine"],function(a){var b=a.subclass({constructor:function(c){a.prototype.constructor.apply(this,arguments),this.name=b.NAME},createCanvas:function(b){this.id=this.name+(new Date).getTime();var c=document.createElement("audio");c.setAttribute("id",this.id),c.setAttribute("class","player-canvas"),c.muted=this.options.muted,c.volume=this.options.volume,c.preload="auto",c.controls=!1;var d=a.STANDARD_EVENTS;for(var e=d.length-1;e>=0;e--)c.addEventListener(d[e],this.handleCanvasEvent.bind(this),!1);this.canvas=c,this.options.src&&this.setSrc(this.options.src),this.setAutoplay(this.options.autoplay),this.setVolume(this.options.volume),this.setMuted(this.options.muted),this.setLoop(this.options.loop),b&&b.appendChild(c);return c},reload:function(a){var b=this.reload.attempts;this.reload.attempts=b=b===undefined?0:b+1;if(b<5)this.setSrc(a);else throw Error("Could not load metadata for file: "+a)},handleCanvasEvent:function(a){switch(a.type){case"loadedmetadata":isNaN(this.getDuration())?this.reload(this.getSrc()):(delete this.reload.attempts,this.dispatchEvent(a));break;case"canplaythrough":this.dispatchEvent(a),this._checkSegmentStart(a);break;case"timeupdate":this.dispatchEvent({type:"timeupdate"}),this._checkSegmentEnd(a),!isNaN(this.canvas.duration)&&this.canvas.duration===this.canvas.currentTime&&this.canvas.duration>0&&this.dispatchEvent({type:"ended"});break;default:this.dispatchEvent(a)}}});b.NAME="audio",b.PLUGIN_DOWNLOAD="https://www.google.com/intl/en/chrome/browser/",b.isAvailable=function(){var a=window.ActiveXObject?document.documentMode||7:10;return a>9&&!!document.createElement("audio").canPlayType},b.canPlayType=function(a){var b=document.createElement("audio");return!b.canPlayType||/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv)/.test(a)?!1:/audio/.test(a)&&!!b.canPlayType(a)};return b}),define("vpro/mediaplayer/js/engines/VideoHTML5Engine",["vpro/mediaplayer/js/engines/HTML5Engine"],function(a){var b=0,c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.controllable=!/iphone|ipod/i.test(navigator.platform||"")},createCanvas:function(a){this.id=this.name+b++;var d=document.createElement("video");d.setAttribute("id",this.id),d.setAttribute("class","player-canvas"),d.preload="auto",d.controls=!1;var e=c.STANDARD_EVENTS;for(var f=e.length-1;f>=0;f--)d.addEventListener(e[f],this.handleCanvasEvent.bind(this),!1);this.canvas=d,this.options.src&&this.setSrc(this.options.src),this.setAutoplay(this.options.autoplay),this.setVolume(this.options.volume),this.setMuted(this.options.muted),this.setLoop(this.options.loop),a.appendChild(d);return d},handleCanvasEvent:function(a){this.dispatchEvent(a);switch(a.type){case"canplaythrough":this._checkSegmentStart(a);break;case"timeupdate":this._checkSegmentEnd(a)}},grabImageData:function(){var a=document.createElement("canvas"),b=a.getContext("2d"),c=this.getVideoWidth(),d=this.getVideoHeight();a.width=c,a.height=d,b.drawImage(this.canvas,0,0,c,d);return a.toDataURL("image/jpg")}});c.extend(a,{NAME:"video",PLUGIN_DOWNLOAD:"https://www.google.com/intl/en/chrome/browser/"}),c.isAvailable=function(){var a=window.ActiveXObject?document.documentMode||7:10;return a>9&&!!document.createElement("video").canPlayType},c.canPlayType=function(a){var b=document.createElement("video");return!b.canPlayType||/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv)/.test(a)?!1:!!b.canPlayType(a)};return c}),define("vpro/mediaplayer/js/lib/swfobject",[],function(){var a=function(){function W(a){var c=/[\\\"<>\.;]/,d=c.exec(a)!=null;return d&&typeof encodeURIComponent!=b?encodeURIComponent(a):a}function V(a,b){if(!!y){var c=b?"visible":"hidden";u&&Q(a)?Q(a).style.visibility=c:U("#"+a,"visibility:"+c)}}function U(a,d,e,f){if(!z.ie||!z.mac){var g=j.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(w=null,x=null);if(!w||x!=h){var i=R("style");i.setAttribute("type","text/css"),i.setAttribute("media",h),w=g.appendChild(i),z.ie&&z.win&&typeof j.styleSheets!=b&&j.styleSheets.length>0&&(w=j.styleSheets[j.styleSheets.length-1]),x=h}z.ie&&z.win?w&&typeof w.addRule==c&&w.addRule(a,d):w&&typeof j.createTextNode!=b&&w.appendChild(j.createTextNode(a+" {"+d+"}"))}}function T(a){var b=z.pv,c=a.split(".");c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0;return b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function S(a,b,c){a.attachEvent(b,c),p[p.length]=[a,b,c]}function R(a){return j.createElement(a)}function Q(a){var b=null;try{b=j.getElementById(a)}catch(c){}return b}function P(a){var b=Q(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function O(a){var b=Q(a);b&&b.nodeName=="OBJECT"&&(z.ie&&z.win?(b.style.display="none",function(){b.readyState==4?P(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function N(a,b,c){var d=R("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function M(a,d,e){var g,h=Q(e);if(z.wk&&z.wk<312)return g;if(h){typeof a.id==b&&(a.id=e);if(z.ie&&z.win){var i="";for(var j in a)a[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=a[j]:j.toLowerCase()=="styleclass"?i+=' class="'+a[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+a[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",o[o.length]=a.id,g=Q(a.id)}else{var m=R(c);m.setAttribute("type",f);for(var n in a)a[n]!=Object.prototype[n]&&(n.toLowerCase()=="styleclass"?m.setAttribute("class",a[n]):n.toLowerCase()!="classid"&&m.setAttribute(n,a[n]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&N(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function L(a){var b=R("div");if(z.win&&z.ie)b.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(c)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&b.appendChild(e[g].cloneNode(!0))}}}return b}function K(a){if(z.ie&&z.win&&a.readyState!=4){var b=R("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(L(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(L(a),a)}function J(a,c,d,e){v=!0,s=e||null,t={success:!1,id:d};var f=Q(d);if(f){f.nodeName=="OBJECT"?(q=L(f),r=null):(q=f,r=d),a.id=g;if(typeof a.width==b||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==b||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";j.title=j.title.slice(0,47)+" - Flash Player Installation";var h=z.ie&&z.win?"ActiveX":"PlugIn",k="MMredirectURL="+i.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+j.title;typeof c.flashvars!=b?c.flashvars+="&"+k:c.flashvars=k;if(z.ie&&z.win&&f.readyState!=4){var l=R("div");d+="SWFObjectNew",l.setAttribute("id",d),f.parentNode.insertBefore(l,f),f.style.display="none",function(){f.readyState==4?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}()}M(a,c,d)}}function I(){return!v&&T("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function H(a){var d=null,e=Q(a);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=b)d=e;else{var f=e.getElementsByTagName(c)[0];f&&(d=f)}return d}function G(){var a=n.length;if(a>0)for(var c=0;c<a;c++){var d=n[c].id,e=n[c].callbackFn,f={success:!1,id:d};if(z.pv[0]>0){var g=Q(d);if(g)if(T(n[c].swfVersion)&&!(z.wk&&z.wk<312))V(d,!0),e&&(f.success=!0,f.ref=H(d),e(f));else if(n[c].expressInstall&&I()){var h={};h.data=n[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));J(h,i,d,e)}else K(g),e&&e(f)}else{V(d,!0);if(e){var m=H(d);m&&typeof m.SetVariable!=b&&(f.success=!0,f.ref=m),e(f)}}}}function F(){var a=j.getElementsByTagName("body")[0],d=R(c);d.setAttribute("type",f);var e=a.appendChild(d);if(e){var g=0;(function(){if(typeof e.GetVariable!=b){var c=e.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),z.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}a.removeChild(d),e=null,G()})()}else G()}function E(){l?F():G()}function D(a){if(typeof i.addEventListener!=b)i.addEventListener("load",a,!1);else if(typeof j.addEventListener!=b)j.addEventListener("load",a,!1);else if(typeof i.attachEvent!=b)S(i,"onload",a);else if(typeof i.onload=="function"){var c=i.onload;i.onload=function(){c(),a()}}else i.onload=a}function C(a){u?a():m[m.length]=a}function B(){if(!u){try{var a=j.getElementsByTagName("body")[0].appendChild(R("span"));a.parentNode.removeChild(a)}catch(b){return}u=!0;var c=m.length;for(var d=0;d<c;d++)m[d]()}}var b="undefined",c="object",d="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",f="application/x-shockwave-flash",g="SWFObjectExprInst",h="onreadystatechange",i=window,j=document,k=navigator,l=!1,m=[E],n=[],o=[],p=[],q,r,s,t,u=!1,v=!1,w,x,y=!0,z=function(){var a=typeof j.getElementById!=b&&typeof j.getElementsByTagName!=b&&typeof j.createElement!=b,g=k.userAgent.toLowerCase(),h=k.platform.toLowerCase(),m=h?/win/.test(h):/win/.test(g),n=h?/mac/.test(h):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof k.plugins!=b&&typeof k.plugins[d]==c)r=k.plugins[d].description,r&&(typeof k.mimeTypes==b||!k.mimeTypes[f]||!!k.mimeTypes[f].enabledPlugin)&&(l=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof i.ActiveXObject!=b)try{var s=new ActiveXObject(e);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:a,pv:q,wk:o,ie:p,win:m,mac:n}}(),A=function(){!z.w3||((typeof j.readyState!=b&&j.readyState=="complete"||typeof j.readyState==b&&(j.getElementsByTagName("body")[0]||j.body))&&B(),u||(typeof j.addEventListener!=b&&j.addEventListener("DOMContentLoaded",B,!1),z.ie&&z.win&&(j.attachEvent(h,function(){j.readyState=="complete"&&(j.detachEvent(h,arguments.callee),B())}),i==top&&function(){if(!u){try{j.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}B()}}()),z.wk&&function(){if(!u){if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}B()}}(),D(B)))}(),X=function(){z.ie&&z.win&&window.attachEvent("onunload",function(){var b=p.length;for(var c=0;c<b;c++)p[c][0].detachEvent(p[c][1],p[c][2]);var d=o.length;for(var e=0;e<d;e++)O(o[e]);for(var f in z)z[f]=null;z=null;for(var g in a)a[g]=null;a=null})}();return{registerObject:function(a,b,c,d){if(z.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,n[n.length]=e,V(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(z.w3)return H(a)},embedSWF:function(a,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};z.w3&&!(z.wk&&z.wk<312)&&a&&d&&e&&f&&g?(V(d,!1),C(function(){e+="",f+="";var n={};if(k&&typeof k===c)for(var o in k)n[o]=k[o];n.data=a,n.width=e,n.height=f;var p={};if(j&&typeof j===c)for(var q in j)p[q]=j[q];if(i&&typeof i===c)for(var r in i)typeof p.flashvars!=b?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(T(g)){var s=M(n,p,d);n.id==d&&V(d,!0),m.success=!0,m.ref=s}else{if(h&&I()){n.data=h,J(n,p,d,l);return}V(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){y=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(a,b,c){return z.w3?M(a,b,c):undefined},showExpressInstall:function(a,b,c,d){z.w3&&I()&&J(a,b,c,d)},removeSWF:function(a){z.w3&&O(a)},createCSS:function(a,b,c,d){z.w3&&U(a,b,c,d)},addDomLoadEvent:C,addLoadEvent:D,getQueryParamValue:function(a){var b=j.location.search||j.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return W(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return W(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(v){var a=Q(g);a&&q&&(a.parentNode.replaceChild(q,a),r&&(V(r,!0),z.ie&&z.win&&(q.style.display="block")),s&&s(t)),v=!1}}}}();return a}),define("vpro/mediaplayer/js/engines/JWFlashEngine",["jquery","vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/swfobject"],function(a,b,c){var d={},e=1,f={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},g=b.subclass({constructor:function(a){b.prototype.constructor.apply(this,arguments),this._customStart=this.options.currenttime?Number(this.options.currenttime):NaN,this.name=g.NAME,this.playerSWF=g.PLAYER_SWF_LOCATION},createCanvas:function(a){this.host=a,this._seeking=!1,this._seekTime=0,this._currentTime=null,this._isReady=!1,this._playState="",this._segmentStart=undefined,this._segmentEnd=undefined,this._segmentSeeked=!1,this._segmentEnded=!1,this._readyState=f.HAVE_NOTHING,this.played=[];var b=this.id="__jwflashplayer__"+e++,h=document.createElement("div");h.setAttribute("class","player-canvas");var i=document.createElement("div");i.setAttribute("id",b),h.appendChild(i),a.appendChild(h),this.node=h;var j=0,k=0;window[b]=function(a){var b=g.EVENT_MAP[a.type];if(b){if(b==="__state__"){this._playState=a.newstate;switch(a.newstate){case"BUFFERING":b="waiting";break;case"IDLE":b="idle";break;case"PLAYING":b="play";break;case"PAUSED":b="pause"}}if(b==="__time__"){!isNaN(a.position)&&j!==a.position&&(j=a.position,this._handleTranslatedJWEvent("timeupdate",a.type));var c=Math.round(a.duration);!isNaN(c)&&c!==k&&(k=c,this._handleTranslatedJWEvent("durationchange",a.type))}else this._handleTranslatedJWEvent(b,a.type)}}.bind(this),d[b]=this,window[b+"_ready"]=function(a){a&&a.id&&d[a.id]&&d[a.id].handlePlayerReady(a)};var l={controlbar:"none",icons:!1,muted:this.options.muted,volume:parseInt(this.options.volume*100),id:this.id,playerready:this.id+"_ready"};c.embedSWF(this.playerSWF,b,"100%","100%","10.0.0","",l,{wmode:"transparent",seamlesstabbing:!0,allownetworking:"all",allowfullscreen:!0,allowscriptaccess:"always"},{id:b,name:b},this.handleEnable.bind(this))},destroyCanvas:function(){this.node.parentNode.removeChild(this.node),this.id&&this.canvas&&(c.removeSWF(this.id),window[this.id]=undefined,a(this.id).remove())},_handleTranslatedJWEvent:function(a,b){this.handleCanvasEvent({type:a,target:this.canvas}),a==="durationchange"&&this._checkSegmentStart();if(a==="loadedmetadata"&&this._readyState===f.HAVE_NOTHING)this._readyState=f.HAVE_METADATA;else if(a==="durationchange"&&this._readyState<=f.HAVE_METADATA)this.getBuffered().end()>this._seekTime&&(this._readyState=f.HAVE_CURRENT_DATA,this.dispatchEvent({type:"loadeddata"}));else if(a==="durationchange"&&this._readyState<=f.HAVE_CURRENT_DATA){if(this.getBuffered().end()>this._seekTime){this._readyState=f.HAVE_FUTURE_DATA,this.dispatchEvent({type:"canplay"});try{this._currentTime=this._customStart||0,this._seekToCustomStart()}catch(c){}}}else b==="jwplayerMediaBufferFull"&&this._readyState!==f.HAVE_ENOUGH_DATA&&(this._readyState=f.HAVE_ENOUGH_DATA,this.dispatchEvent({type:"canplaythrough"}))},handleEnable:function(a){a.success&&(this.canvas=a.ref)},handlePlayerReady:function(a){var b=g.EVENT_MAP;this._isReady=!0;for(var c in b)this.canvas.jwAddEventListener(c,"function( e ) { "+this.id+"( e ); }");this.options.src&&this.setSrc(this.options.src)},isAdaptive:function(a){return/\.f4m/.test(a)},play:function(){try{this._playState!=="PLAYING"&&(this.canvas.jwPlay(),a(this.node).css("width",a(this.node).width()-1+"px"),setTimeout(function(){a(this.node).css("width","100%")}.bind(this),1e3))}catch(b){}},pause:function(){try{this._playState!=="PAUSED"&&this.canvas.jwPause()}catch(a){}},stop:function(){try{this.canvas.jwStop()}catch(a){}},setSrc:function(a){var b=this._getSaveSrc(a);this._isReady?(this.canvas.jwLoad&&this.canvas.jwLoad({bufferlength:this._segmentStart||"",file:b,provider:this.isAdaptive(b)?"hds":""}),this.play()):this.options.src=b},getSrc:function(){if(!this._isReady)return this.options.src;try{return this.canvas.jwGetPlaylist()[0].file}catch(a){return null}},setVolume:function(a){try{this.canvas.jwSetVolume(parseInt(a*100))}catch(b){}},getVolume:function(){try{return parseFloat(this.canvas.jwGetVolume()/100)}catch(a){}},setCurrentTime:function(a){try{var b=this.getPaused();this.canvas.jwSeek(a),this._seekTime=a,b&&this.pause()}catch(c){}},getCurrentTime:function(){try{return this.canvas.jwGetPosition()||this._currentTime||0}catch(a){return this._currentTime||0}},setMuted:function(a){try{this.canvas.jwSetMute(!!a)}catch(b){}},getMuted:function(){try{return this.canvas.jwGetMute()}catch(a){}},setAutoplay:function(a){this.options.autoplay=a},getAutoplay:function(){return this.options.autoplay},setLoop:function(a){this.options.loop=a},getLoop:function(){return this.options.loop},grabImageData:function(){},getDuration:function(){try{return this.canvas.jwGetDuration()||0}catch(a){return 0}},getPaused:function(){try{return this.canvas.jwGetState()==="PAUSED"}catch(a){}},getPlayed:function(){return this.played},getVideoWidth:function(){try{return this.canvas.jwGetWidth()||0}catch(a){return 0}},getVideoHeight:function(){try{return this.canvas.jwGetHeight()||0}catch(a){return 0}},getBuffered:function(){var a=this.getDuration()/100*this.canvas.jwGetBuffer();return{length:1,start:function(a){a=a||0;if(a!==0)throw IndexSizeError?new IndexSizeError:"Index out of bounds.";return 0},end:function(b){b=b||0;if(b!==0)throw IndexSizeError?new IndexSizeError:"Index out of bounds.";return a}}},trackSeeking:function(){return;var a=this._seekTime,b=this.getBuffered()},getCurrentSrc:function(){return this.getSrc()},getSeeking:function(){return this._seeking},getEnded:function(){return this.getCurrentTime()===this.getDuration()},getNetworkState:function(){},getReadyState:function(){},getError:function(){},handleCanvasEvent:function(a){a.type==="loadedmetadata"&&!this.options.autoplay&&this._readyState===f.HAVE_NOTHING&&(this.isAdaptive(this.getSrc())||this.pause()),a.type==="waiting"&&this.isAdaptive(this.getSrc())&&!this.options.autoplay&&!this._readyState!==f.HAVE_NOTHING&&this.pause(),a.type==="ended"&&this.options.loop&&(this._restart(),this.getPaused()&&this.play()),a.type==="durationchange"&&this.dispatchEvent({type:"progress"}),b.isStandardEvent(a.type)&&this.dispatchEvent(a),a.type==="play"&&(this.played=[{start:0,end:0}],this.dispatchEvent({type:"playing",target:this.canvas})),a.type==="timeupdate"&&(this._currentTime=null),a.type==="timeupdate"&&this._checkSegmentEnd()},_checkSegmentStart:function(){if(!(this._customStart||this._segmentSeeked||!this._segmentStart)){var a=this.getBuffered();a.end()>=this._segmentStart&&(this._segmentSeeked=!0,this.setCurrentTime(this._segmentStart),this._currentTime=this._segmentStart,this.dispatchEvent({type:"timeupdate"}))}}});g.NAME="jwflash",g.PLUGIN="Flash",g.PLUGIN_DOWNLOAD="http://get.adobe.com/flashplayer/",g.PLAYER_SWF_LOCATION="http://files.vpro.nl/flash/jwplayer/player-5.0.swf",g.EVENT_MAP={jwplayerError:"error",jwplayerMediaError:"error",jwplayerMediaBuffer:"progress",jwplayerMediaBufferFull:"durationchange",jwplayerMediaComplete:"ended",jwplayerMediaSeek:"seeking",jwplayerMediaTime:"__time__",jwplayerMediaVolume:"volumechange",jwplayerMediaMute:"mute",jwplayerMediaMeta:"loadedmetadata",jwplayerMediaLoaded:"loadedmetadata",jwplayerPlayerState:"__state__"},g.isAvailable=function(){return!!c.hasFlashPlayerVersion("10.0.0")},g.canPlayType=function(a){return/(video\/x\-flv|video\/mp4|audio\/mpeg|application\/f4m\+xml)/.test(a)};return g}),define("vpro/mediaplayer/js/lib/Silverlight",[],function(){var a={};a._silverlightCount=0,a.__onSilverlightInstalledCalled=!1,a.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=",a.__installationEventFired=!1,a.onGetSilverlight=null,a.onSilverlightInstalled=function(){window.location.reload(!1)},a.isInstalled=function(a){a==undefined&&(a=null);var b=!1,c=null;try{var d=null,e=!1;if(window.ActiveXObject)try{d=new ActiveXObject("AgControl.AgControl"),a===null?b=!0:d.IsVersionSupported(a)&&(b=!0),d=null}catch(f){e=!0}else e=!0;if(e){var g=navigator.plugins["Silverlight Plug-In"];if(g)if(a===null)b=!0;else{var h=g.description;h==="1.0.30226.2"&&(h="2.0.30226.2");var i=h.split(".");while(i.length>3)i.pop();while(i.length<4)i.push(0);var j=a.split(".");while(j.length>4)j.pop();var k,l,m=0;do k=parseInt(j[m]),l=parseInt(i[m]),m++;while(m<j.length&&k===l);k<=l&&!isNaN(k)&&(b=!0)}}}catch(f){b=!1}return b},a.WaitForInstallCompletion=function(){if(!a.isBrowserRestartRequired&&a.onSilverlightInstalled){try{navigator.plugins.refresh()}catch(b){}a.isInstalled(null)&&!a.__onSilverlightInstalledCalled?(a.onSilverlightInstalled(),a.__onSilverlightInstalledCalled=!0):setTimeout(a.WaitForInstallCompletion,3e3)}},a.__startup=function(){navigator.plugins.refresh(),a.isBrowserRestartRequired=a.isInstalled(null);if(!a.isBrowserRestartRequired)a.WaitForInstallCompletion(),a.__installationEventFired||(a.onInstallRequired(),a.__installationEventFired=!0);else if(window.navigator.mimeTypes){var b=navigator.mimeTypes["application/x-silverlight-2"],c=navigator.mimeTypes["application/x-silverlight-2-b2"],d=navigator.mimeTypes["application/x-silverlight-2-b1"],e=d;c&&(e=c),!b&&(d||c)?a.__installationEventFired||(a.onUpgradeRequired(),a.__installationEventFired=!0):b&&e&&b.enabledPlugin&&e.enabledPlugin&&b.enabledPlugin.description!=e.enabledPlugin.description&&(a.__installationEventFired||(a.onRestartRequired(),a.__installationEventFired=!0))}a.disableAutoStartup||(window.removeEventListener?window.removeEventListener("load",a.__startup,!1):window.detachEvent("onload",a.__startup))},a.disableAutoStartup||(window.addEventListener?window.addEventListener("load",a.__startup,!1):window.attachEvent("onload",a.__startup)),a.createObject=function(b,c,d,e,f,g,h){var i={},j=e,k=f;i.version=j.version,j.source=b,i.alt=j.alt,g&&(j.initParams=g),j.isWindowless&&!j.windowless&&(j.windowless=j.isWindowless),j.framerate&&!j.maxFramerate&&(j.maxFramerate=j.framerate),d&&!j.id&&(j.id=d),delete j.ignoreBrowserVer,delete j.inplaceInstallPrompt,delete j.version,delete j.isWindowless,delete j.framerate,delete j.data,delete j.src,delete j.alt;if(a.isInstalled(i.version)){for(var l in k)if(k[l]){if(l=="onLoad"&&typeof k[l]=="function"&&k[l].length!=1){var m=k[l];k[l]=function(a){return m(document.getElementById(d),h,a)}}var n=a.__getHandlerName(k[l]);if(n!=null)j[l]=n,k[l]=null;else throw"typeof events."+l+" must be 'function' or 'string'"}slPluginHTML=a.buildHTML(j)}else slPluginHTML=a.buildPromptHTML(i);if(c)c.innerHTML=slPluginHTML;else return slPluginHTML},a.buildHTML=function(b){var c=[];c.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"'),b.id!=null&&c.push(' id="'+a.HtmlAttributeEncode(b.id)+'"'),b.width!=null&&c.push(' width="'+b.width+'"'),b.height!=null&&c.push(' height="'+b.height+'"'),c.push(" >"),delete b.id,delete b.width,delete b.height;for(var d in b)b[d]&&c.push('<param name="'+a.HtmlAttributeEncode(d)+'" value="'+a.HtmlAttributeEncode(b[d])+'" />');c.push("</object>");return c.join("")},a.createObjectEx=function(b){var c=b,d=a.createObject(c.source,c.parentElement,c.id,c.properties,c.events,c.initParams,c.context);if(c.parentElement==null)return d},a.buildPromptHTML=function(b){var c="",d=a.fwlinkRoot,e=b.version;b.alt?c=b.alt:(e||(e=""),c="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>",c=c.replace("{1}",e),c=c.replace("{2}",d+"161376"));return c},a.getSilverlight=function(b){a.onGetSilverlight&&a.onGetSilverlight();var c="",d=String(b).split(".");if(d.length>1){var e=parseInt(d[0]);isNaN(e)||e<2?c="1.0":c=d[0]+"."+d[1]}var f="";c.match(/^\d+\056\d+$/)&&(f="&v="+c),a.followFWLink("149156"+f)},a.followFWLink=function(b){top.location=a.fwlinkRoot+String(b)},a.HtmlAttributeEncode=function(a){var b,c="";if(a==null)return null;for(var d=0;d<a.length;d++)b=a.charCodeAt(d),b>96&&b<123||b>64&&b<91||b>43&&b<58&&b!=47||b==95?c=c+String.fromCharCode(b):c=c+"&#"+b+";";return c},a.default_error_handler=function(a,b){var c,d=b.ErrorType;c=b.ErrorCode;var e="\nSilverlight error message     \n";e+="ErrorCode: "+c+"\n",e+="ErrorType: "+d+"       \n",e+="Message: "+b.ErrorMessage+"     \n",d=="ParserError"?(e+="XamlFile: "+b.xamlFile+"     \n",e+="Line: "+b.lineNumber+"     \n",e+="Position: "+b.charPosition+"     \n"):d=="RuntimeError"&&(b.lineNumber!=0&&(e+="Line: "+b.lineNumber+"     \n",e+="Position: "+b.charPosition+"     \n"),e+="MethodName: "+b.methodName+"     \n"),alert(e)},a.__cleanup=function(){for(var b=a._silverlightCount-1;b>=0;b--)window["__slEvent"+b]=null;a._silverlightCount=0,window.removeEventListener?window.removeEventListener("unload",a.__cleanup,!1):window.detachEvent("onunload",a.__cleanup)},a.__getHandlerName=function(b){var c="";if(typeof b=="string")c=b;else if(typeof b=="function"){a._silverlightCount==0&&(window.addEventListener?window.addEventListener("unload",a.__cleanup,!1):window.attachEvent("onunload",a.__cleanup));var d=a._silverlightCount++;c="__slEvent"+d,window[c]=b}else c=null;return c},a.onRequiredVersionAvailable=function(){},a.onRestartRequired=function(){},a.onUpgradeRequired=function(){},a.onInstallRequired=function(){},a.IsVersionAvailableOnError=function(b,c){var d=!1;try{c.ErrorCode==8001&&!a.__installationEventFired?(a.onUpgradeRequired(),a.__installationEventFired=!0):c.ErrorCode==8002&&!a.__installationEventFired?(a.onRestartRequired(),a.__installationEventFired=!0):c.ErrorCode==5014||c.ErrorCode==2106?a.__verifySilverlight2UpgradeSuccess(c.getHost())&&(d=!0):d=!0}catch(e){}return d},a.IsVersionAvailableOnLoad=function(b){var c=!1;try{a.__verifySilverlight2UpgradeSuccess(b.getHost())&&(c=!0)}catch(d){}return c},a.__verifySilverlight2UpgradeSuccess=function(b){var c=!1,d="4.0.50401",e=null;try{b.IsVersionSupported(d+".99")?(e=a.onRequiredVersionAvailable,c=!0):b.IsVersionSupported(d+".0")?e=a.onRestartRequired:e=a.onUpgradeRequired,e&&!a.__installationEventFired&&(e(),a.__installationEventFired=!0)}catch(f){}return c};return a}),define("vpro/mediaplayer/js/engines/SilverlightEngine",["vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/Silverlight"],function(a,b){var c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.canvasCount=0},createCanvas:function(a,c){this.canvasCount++,this.id="__silverlightcanvas__"+(new Date).getTime(),window["__silverlight__"+this.id]=function(a,b){a==="timeupdate"&&(this.__currentTime__=b,this.handleTimeUpdate({type:a})),this.handleCanvasEvent({type:a,target:document.getElementById(this.id)})}.bind(this);var d=c||this.options,e=this._getSaveSrc(d.src);this._customStart=d.currenttime?Number(d.currenttime):NaN,this.__currentTime__=0,this.hasPlayed=!1,this.isPlayable=!1,this.played=[],this.host=a;var f=document.createElement("div");f.setAttribute("class","player-canvas"),this.node=f,a.appendChild(f),b.createObjectEx({source:"http://files.vpro.nl/silverlight/slplayer/slplayer-1.0.0.3.xap",parentElement:f,id:this.id,properties:{width:"100%",height:"100%",allowHtmlPopupWindow:"false",autoUpgrade:"false",background:"#000",enableGPUAcceleration:"true",enableHtmlAccess:"true",enableNavigation:"none",minRuntimeVersion:"4.0.60310.0",windowless:"true"},events:{onError:this.error.bind(this),onLoad:this.enable.bind(this)},initParams:["id="+this.id,"autoplay="+d.autoplay,"muted="+d.muted,"controls=false","debug=false","smoothing=true","timerrate=500","width=100%","height=100%","startvolume="+d.volume,"preload=metadata","src="+e,"CallBackFunction=__silverlight__"+this.id].join(","),userContext:""})},destroyCanvas:function(){delete this.__currentTime__,this.node.parentNode.removeChild(this.node)},enable:function(){this.canvas=document.getElementById(this.id).content.slPlayer},play:function(){this.canvas&&this.isPlayable&&this.canvas.play()},pause:function(){this.canvas&&this.isPlayable&&this.canvas.pause()},error:function(){this.dispatchEvent({type:"error"})},setSrc:function(a){if(a){var b={src:a,muted:this.getMuted(),volume:this.getVolume(),autoplay:!!this.getAutoplay(),currenttime:this.canvasCount===0?this.options.currenttime:NaN};this.destroyCanvas(),this.createCanvas(this.host,b)}},getSrc:function(){try{return this.canvas.getProperty("src")}catch(a){}},getPaused:function(){try{return this.canvas.getProperty("paused")}catch(a){}},setCurrentTime:function(a){try{this.canvas.setProperty("currentTime",parseInt(a))}catch(b){}},getCurrentTime:function(){return this.__currentTime__||0},getVideoWidth:function(){try{return this.canvas.getProperty("width")}catch(a){}},getVideoHeight:function(){try{return this.canvas.getProperty("height")}catch(a){}},getDuration:function(){try{return this.canvas.getProperty("duration")}catch(a){}},setVolume:function(a){try{this.canvas.setProperty("muted",!1),this.canvas.setProperty("volume",a)}catch(b){}},getVolume:function(){try{return this.canvas.getProperty("volume")}catch(a){}},setMuted:function(a){try{this.canvas.setProperty("muted",a)}catch(b){}},getMuted:function(){try{return this.canvas.getProperty("muted")}catch(a){}},setLoop:function(a){try{this.canvas.setProperty("loop",a)}catch(b){}},getLoop:function(a){try{this.canvas.getProperty("loop")}catch(b){}},getBuffered:function(){return!1},getPlayed:function(){return this.played},handleCanvasEvent:function(b){if(b.type==="timeupdate"){var c=this.getDuration(),d=this.getCurrentTime();c===d&&this.dispatchEvent({type:"ended"})}b.type==="ended"&&this.options.loop&&(this._restart(),this.play());if(a.isStandardEvent(b.type))switch(b.type){case"playing":this.played=[{start:0,end:0}],this.dispatchEvent({type:"play"}),this.hasPlayed=!0;break;case"loadeddata":this.isPlayable=!0,this.handleLoadedData(b),this.dispatchEvent({type:"loadedmetadata"}),this.dispatchEvent({type:"durationchange"});break;case"pause":this.hasPlayed&&this.dispatchEvent({type:"pause"});break;default:this.dispatchEvent({type:b.type})}},handleTimeUpdate:function(a){this._checkSegmentEnd()},handleLoadedData:function(a){this._seekToCustomStart(),this._checkSegmentStart()}});c.NAME="silverlight",c.PLUGIN="Silverlight",c.PLUGIN_DOWNLOAD="http://www.microsoft.com/getsilverlight/",c.isAvailable=function(){return!!b.isInstalled()},c.canPlayType=function(a){return/^(audio\/x\-ms\-wma|video\/x\-ms\-wmv|video\/mp4)/.test(a)};return c}),define("vpro/mediaplayer/js/engines/YouTubeIFrameEngine",["vpro/mediaplayer/js/engines/Engine","jquery"],function(a,b){function h(a){var b=g(a,d);if(b){if(isNaN(+b)){var c=/(\d+)m/.exec(b),e=/(\d+)s/.exec(b);c=c&&c.length>1?+c[1]:0,e=e&&e.length>1?+e[1]:0;return c*60+e}return+b}return 0}function g(a,b){var c=null;for(var d=0;d<b.length;d++){c=b[d].exec(a);if(c&&c.length>1)return c[1]}return null}var c=[/^youtube:(.{11})/,/youtu\.be\/(.{11})/,/youtube\.com\/watch.*v=(.{11})/],d=[/youtu\.be\/.*\?t=([^&]+)/,/youtube\.com\/watch.*#t=([^&]+)/],e=0,f=!1,i=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=i.NAME,this.youtubeId=g(this.options.src,c),this.playerTime=0,this.timer=0,this.state=-1;if(!window.onYouTubeIframeAPIReady){window.onYouTubeIframeAPIReady=function(){f=!0};var d=document.createElement("script");d.src="//www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)}},createCanvas:function(a){this.attributes={};if(!f)setTimeout(function(){this.createCanvas(a)}.bind(this),200);else{this.id="__youtubeiframeengine__"+e++,this.canvas=document.createElement("div"),this.canvas.setAttribute("class","player-canvas youtube");var b=document.createElement("div");b.setAttribute("id",this.id),this.canvas.appendChild(b),a.appendChild(this.canvas),this.youtubeplayer=new window.YT.Player(this.id,{playerVars:{wmode:"transparent",controls:this.options.controls?0:1,showinfo:0,modestbranding:1,rel:0,version:3,enablejsapi:1,loop:this.options.loop?1:0,start:h(this.options.src)||0},videoId:this.youtubeId,events:{onError:this.handleOnError.bind(this),onReady:this.handleOnPlayerReady.bind(this),onStateChange:this.handleOnStateChange.bind(this)}}),window.youtubeplayer=this.youtubeplayer}},getSrc:function(){return this.options.src},enable:function(){},play:function(){this.youtubeplayer?this.youtubeplayer.playVideo():this.options.autoplay=!0},pause:function(){this.youtubeplayer.pauseVideo(),this.dispatchEvent({type:"suspend",target:this.canvas})},togglePlay:function(){this.getPlayed()?this.pause():this.play()},getDuration:function(){return this.youtubeplayer.getDuration()},getCurrentTime:function(){return this.youtubeplayer.getCurrentTime()},setCurrentTime:function(a){this.youtubeplayer?(this.youtubeplayer.seekTo(a,!0),this.dispatchEvent({type:"timeupdate",target:this.canvas})):this.attributes.seekToAfterReady=a},getPaused:function(){return!this.getPlayed()},getPlayed:function(){var a=this.youtubeplayer.getPlayerState();return a===1||a===3},setVolume:function(a){this.attributes.volume=a,this.youtubeplayer.unMute(),this.attributes.muted=!1,this.youtubeplayer.setVolume(Math.round(a*100)),this.dispatchEvent({type:"volumechange",target:this.canvas})},getVolume:function(){return this.attributes.volume},setMuted:function(a){a?this.youtubeplayer.mute():this.youtubeplayer.unMute(),this.attributes.muted=a,this.dispatchEvent({type:"volumechange",target:this.canvas})},getMuted:function(){return this.attributes.muted},handleOnError:function(a){var b="De opgevraagde uitzending kan niet worden afgespeeld. ";switch(a.data){case 2:b+="De opgegeven bron bevat geen geldig Youtube ID.";break;case 5:b+="De content wordt niet ondersteund door de HTML5 speler.";break;case 100:b+="De video is niet langer beschikbaar.";break;case 101:case 105:b+="De eigenaar staat niet toe om deze video te embbedden.";break;default:b+="Er is een onbekende fout opgetreden."}this.dispatchEvent({type:"error",msg:b})},handleOnPlayerReady:function(){this.attributes.volume=this.youtubeplayer.getVolume()/100,this.attributes.muted=this.youtubeplayer.isMuted(),this.resizeIFrame(),b(window).bind("resize",this.resizeIFrame.bind(this)),b(document).bind("fullscreenchange mozfullscreenchange webkitfullscreenchange resize",this.resizeIFrame.bind(this)),this.options.autoplay?this.play():this.dispatchEvent({type:"suspend",target:this.canvas}),this.attributes.seekToAfterReady&&(this.setCurrentTime(this.attributes.seekToAfterReady),delete this.attributes.seekToAfterReady),this.options.volume&&this.setVolume(this.options.volume),this.options.muted&&this.setMuted(!0),this.dispatchEvent({type:"loadedmetadata",target:this.canvas})},resizeIFrame:function(){var a=b(this.youtubeplayer.getIframe()).parent();this.youtubeplayer.setSize(a.innerWidth(),a.innerHeight())},handleOnStateChange:function(a){this.state=a;switch(a.data){case-1:break;case 0:clearInterval(this.timer),this.dispatchEvent({type:"ended",target:this.canvas}),this.options.loop&&this.play();break;case 1:this.timer=setInterval(this.updateTime.bind(this),500),this.dispatchEvent({type:"durationchange",target:this.canvas}),this.dispatchEvent({type:"play",target:this.canvas});break;case 2:clearInterval(this.timer),this.dispatchEvent({type:"pause",target:this.canvas})}},updateTime:function(){this.playerTime!==this.getCurrentTime()&&(this.playerTime=this.getCurrentTime(),this.dispatchEvent({type:"timeupdate",target:this.canvas}))}});i.NAME="youtubeiframe",i.isAvailable=function(){return!0},i.canPlayType=function(a){return(a||"").indexOf("video/x-youtube")===0};return i}),define("vpro/mediaplayer/js/engines/VimeoEngine",["vpro/mediaplayer/js/engines/Engine"],function(a){var b=0,c=a.subclass({constructor:function(d){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.vimeoId=this.options.src.substring("vimeo:".length),this.playerTime=0,this.timer=0,this.playing=!1,this.id="__vimeoengine__"+b++,this.muted=this.options.muted||!1,this.volume=this.options.volume||.5,this.unmutedVolume=this.volume},createCanvas:function(a){this.vimeoFrame=document.createElement("iframe"),this.vimeoFrame.id=this.id,this.vimeoFrame.width="100%",this.vimeoFrame.height="100%",this.vimeoFrame.style.position="absolute",this.vimeoFrame.src="http://player.vimeo.com/video/"+this.vimeoId+"?api=1&player_id="+this.id,this.vimeoPlayer=this.vimeoFrame,window.addEventListener?window.addEventListener("message",this.onMessageReceived.bind(this),!1):window.attachEvent("onmessage",this.onMessageReceived.bind(this)),a.appendChild(this.vimeoFrame),this.canvas=this.vimeoFrame},onMessageReceived:function(a){if(!!a.origin&&a.origin.indexOf("vimeo")!==-1){var b=JSON.parse(a.data);if(b.player_id!==this.id)return;switch(b.event){case"ready":this.handleOnPlayerReady();break;case"play":this.handlePlay();break;case"pause":this.handlePause();break;case"finish":this.handleFinish();break;case"loadProgress":this.handleLoadProgress();break;case"playProgress":this.handlePlayProgress()}switch(b.method){case"getDuration":this.handleDurationChange(b.value);break;case"getCurrentTime":var c=b.value;this.playerTime!==c&&(this.playerTime=c,this.handleTimeUpdate())}}},post:function(a,b){var c={method:a};b&&(c.value=b),this.canvas.contentWindow.postMessage(JSON.stringify(c),"*")},play:function(){this.vimeoPlayer?this.post("play"):this.options.autoplay=!0},pause:function(){this.post("pause"),this.dispatchEvent({type:"suspend",target:this.canvas})},getDuration:function(){return this.duration},getPaused:function(){return!this.playing},setVolume:function(a){this.post("setVolume",a+""),this.volume=a,this.updateUnmutedVolume(a),this.dispatchEvent({type:"volumechange",target:this.canvas})},getVolume:function(){return this.volume},setMuted:function(a){this.muted=a,a?this.setVolume(0):this.setVolume(this.unmutedVolume)},getMuted:function(){return this.muted},updateUnmutedVolume:function(a){this.getMuted()||(this.unmutedVolume=a)},handleOnPlayerReady:function(){this.post("getDuration"),this.post("addEventListener","playProgress"),this.post("addEventListener","play"),this.post("addEventListener","pause"),this.post("addEventListener","finish"),this.options.autoplay?this.play():this.dispatchEvent({type:"suspend",target:this.canvas}),this.dispatchEvent({type:"loadedmetadata",target:this.canvas})},handlePlay:function(){this.playing=!0,this.dispatchEvent({type:"play",target:this.canvas})},handlePause:function(){this.playing=!1,this.dispatchEvent({type:"pause",target:this.canvas})},handleFinish:function(){this.playing=!1,this.dispatchEvent({type:"ended",target:this.canvas})},handleLoadProgress:function(){},handlePlayProgress:function(){this.post("getCurrentTime")},setCurrentTime:function(a){this.post("seekTo",a)},getCurrentTime:function(){return this.playerTime},handleTimeUpdate:function(){this.dispatchEvent({type:"timeupdate",target:this.canvas})},handleDurationChange:function(a){this.duration=a,this.dispatchEvent({type:"durationchange",target:this.canvas})}});c.NAME="vimeoengine",c.isAvailable=function(){return!0},c.canPlayType=function(a){return/video\/x-vimeo/.test(a)};return c}),define("vpro/mediaplayer/js/engines/FlashEngine",["vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/lib/swfobject"],function(a,b){var c=a.subclass({constructor:a.prototype.constructor,embedSWF:function(){this.options.src=this.options.src.replace(/\+/g,"%2B");var a={flashvars:["externalCallback="+this.id,this.options.src?"src="+this.options.src:"",this.options.muted?"muted=muted":""].join("&"),wmode:"transparent",allownetworking:"all",allowscriptaccess:"always"};b.embedSWF(this.playerSWF,this.id,"100%","100%","9.0.0","",{},a,{},function(a){a.success&&(this.canvas=a.ref)}.bind(this))},createCanvas:function(){return document.createElement("marquee")},destroyCanvas:function(){b.removeSWF(this.id)},getCurrentTime:function(){try{return this.canvas.getCurrentTime()||0}catch(a){}},setCurrentTime:function(a){try{this.canvas.setCurrentTime(a)}catch(b){}},getDuration:function(){try{return this.canvas.getDuration()||0}catch(a){}},getMuted:function(){try{return this.canvas.getVolume()===0}catch(a){}},setMuted:function(a){try{this.canvas.setMuted(a)}catch(b){}},getVolume:function(){try{return this.canvas.getVolume()}catch(a){}},setVolume:function(a){try{this.canvas.setVolume(a)}catch(b){}},getPaused:function(){try{return this.canvas.getPaused()}catch(a){}},getSrc:function(){try{return this.canvas.getSrc()}catch(a){}},setSrc:function(a){try{this.canvas.setSrc(a,"true")}catch(b){}},getVersion:function(){try{return this.canvas.getVersion()}catch(a){}}});c.extend(a);return c}),define("vpro/mediaplayer/js/engines/VideoFlashEngine",["vpro/mediaplayer/js/engines/FlashEngine","vpro/mediaplayer/js/lib/swfobject"],function(a,b){var c=a.subclass({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.name=c.NAME,this.playerSWF=c.LOCATION_SWF_CANVAS},createCanvas:function(a){var b="__"+this.name+"engine__"+Math.floor(Math.random()*999999999);this.id=b;var c=document.createElement("div");c.setAttribute("class","player-canvas");var d=document.createElement("div");d.setAttribute("id",this.id),c.appendChild(d),a.appendChild(c),window[b]=function(a,b){this.handleCanvasEvent({target:c,type:a})}.bind(this),this.embedSWF()},play:function(){try{this.canvas.playVideo()}catch(a){}},pause:function(){try{this.canvas.pauseVideo()}catch(a){}},grabImageData:function(){try{return this.canvas.grabImageData()}catch(a){}},getVideoWidth:function(){try{return this.canvas.getWidth()}catch(a){}},getVideoHeight:function(){try{return this.canvas.getHeight()}catch(a){}},reload:function(a){var b=this.reload.attempts;this.reload.attempts=b=b===undefined?0:b+1;if(b<5)this.engine.setSrc(a);else throw Error("Could not load metadata for file: "+a)},handleCanvasEvent:function(a){a.type==="loadstart"&&(this.play(),this.pause()),a.type==="loadeddata"&&this.options.autoplay&&this.play(),a.type==="ended"&&this.options.loop&&(this.setCurrentTime(0),this.play());if(c.isStandardEvent(a.type))switch(a.type){case"loadedmetadata":isNaN(this.getDuration())?this.reload(this.getSrc()):(delete this.reload.attempts,this.dispatchEvent(a));break;case"timeupdate":this.dispatchEvent(a),this.canvas.duration===this.canvas.currentTime&&this.dispatchEvent({type:"ended"});break;default:this.dispatchEvent(a)}}});c.extend(a,{NAME:"videoflash",PLUGIN:"Flash",PLUGIN_DOWNLOAD:"http://get.adobe.com/flashplayer/"}),c.LOCATION_SWF_CANVAS="http://files.vpro.nl/flash/videoplayer/player-1.2.swf?policydomains="+encodeURIComponent("http://files.vpro.nl/flash/videoplayer/policy-domains.txt"),c.isAvailable=function(){return!!b.hasFlashPlayerVersion("10.0.0")},c.canPlayType=function(a){return c.isAvailable()&&!!/(video\/mp4|video\/x\-flv)/.test(a)};return c}),define("vpro/mediaplayer/js/MimeTypes",[],function(){var a={resolveMimeType:function(b){var c=a.PATTERNS;for(var d in c)if(c[d](b))return d;return"application/octet-stream"},orderByPreference:function(b){var c=b.map(function(b){return{location:b,priority:a.ORDER.indexOf(a.resolveMimeType(b.url||b))}});c=c.sort(function(a,b){return a.priority-b.priority});return c.map(function(a){return a.location})}};a.ORDER=["application/x-poms-prid","application/x-poms-srid","application/x-poms-urn","audio/x-radiobox-mpeg","application/f4m+xml","application/x-mpegURL","video/mp4","video/x-youtube-iframe","video/x-youtube","video/x-vimeo","video/ogg","audio/mpeg","video/x-flv","audio/x-ms-wma","video/x-ms-wmv","audio/vnd.rn-realaudio","video/vnd.rn-realvideo","application/octet-stream"],a.PATTERNS={"application/x-poms-prid":function(a){return a&&a.indexOf("prid:")===0},"application/x-poms-srid":function(a){return a&&a.indexOf("srid:")===0},"application/x-poms-urn":function(a){return a&&a.indexOf("urn:vpro:media")===0},"audio/mpeg":function(a){return/\.mp3/.test(a)},"audio/x-ms-wma":function(a){return/\.wma/.test(a)},"audio/vnd.rn-realaudio":function(a){return/\.ra|\.ram/.test(a)},"application/f4m+xml":function(a){return/\.f4m/.test(a)},"application/x-mpegURL":function(a){return/\.m3u8/.test(a)},"video/vnd.rn-realvideo":function(a){return/\.rm|\.rv/.test(a)},"video/ogg":function(a){return/\.ogg|\.ogv/.test(a)},"video/mp4":function(a){return/\.mp4|\.m4v|h264_/.test(a)},"video/x-flv":function(a){return/\.flv/.test(a)},"video/x-ms-wmv":function(a){return/\.asf|\.wmv|wmv_|wvc1_/.test(a)},"video/x-youtube":function(a){return/youtu(\.be|be\.com)/.test(a)},"video/x-youtube-iframe":function(a){return a.indexOf("youtube:")===0},"video/x-vimeo":function(a){return a.indexOf("vimeo:")===0}};return a}),define("vpro/mediaplayer/js/engines/NpoPlayerEngine",["jquery","vpro/mediaplayer/js/engines/Engine","vpro/mediaplayer/js/MimeTypes","require"],function(a,b,c,d){function g(a){document.getElementById(h.SCRIPT_TAG_ID)?a():d([e],function(b){window.Mustache=b,d([h.JS_LOCATION],function(){a()})})}var e="ext/mustache/0.7.3/mustache",f=0,h=b.subclass({constructor:function(a){b.prototype.constructor.apply(this,arguments),this.name=h.NAME,this._customStart=this.options.currenttime?Number(this.options.currenttime):NaN,this._src=this._getSaveSrc(this.options.src),this._poster=this.options.poster,this._duration=this.options.duration||0,this._options={autoPlay:this.options.autoplay||!1,muteStart:this.options.muted||!1,loadingAnimation:""}},_bindEventHandlers:function(){this._canvas.onReady(function(a){this.handleCanvasEvent({type:"loadedmetadata"})}.bind(this)),this._canvas.onPlay(this.checkSegmentStart.bind(this)),this._canvas.onTime(this.checkSegmentEnd.bind(this)),this._canvas.onTime(function(a){this._setDuration(this._canvas.getDuration()),this.handleCanvasEvent({type:"timeupdate"})}.bind(this)),this._eventProxy("onPlay","play"),this._eventProxy("onPause","pause"),this._eventProxy("onComplete","ended"),this._eventProxy("onTime","timeupdate"),this._eventProxy("onSeek","seeking"),this._eventProxy("onBuffer","progress"),this._eventProxy("onMute","volumechange"),this._eventProxy("onVolume","volumechange"),this._canvas.onError(function(a){this.handleCanvasEvent({type:"error",msg:a})}.bind(this)),this._canvas.onMetadata(function(a){this._canvas.contentType=="wmv"&&!Silverlight.isInstalled()&&this.handleCanvasEvent({type:"error",msg:'De opgevraagde uitzending kan niet worden afgespeeld. U kunt deze uitzending afspelen met <a target="_blank" href="http://www.microsoft.com/getsilverlight/">Silverlight</a>'}),this._setDuration((a||{}).tijdsduurseconden)}.bind(this)),this._eventProxy("onMeta","loadedmetadata"),this._eventProxy("onMetadata","loadedmetadata"),this._eventProxy("onAdStart","play"),this._eventProxy("onAdStart","adstart"),this._eventProxy("onAdComplete","adcomplete")},checkSegmentEnd:function(a){this._segmentEnd!=undefined&&this.__stop__&&this._segmentEnd<this.getCurrentTime()&&(this.__stop__=!1,this.pause())},checkSegmentStart:function(a){this._segmentStart!=undefined&&this.__seeked__==undefined&&(this.__seeked__=0,this.__stop__=!0,this._canvas.seek(this._segmentStart))},createCanvas:function(b){this.id=this.name+f++;var c=a("<div></div>").addClass("player-canvas").get(0),d=a("<div></div>").attr("id",this.id).get(0);a(c).append(d),a(b).append(c),this.node=c,g(function(){this._initNpoPlayer(),this._bindEventHandlers()}.bind(this))},destroyCanvas:function(){a(this.node).remove(),delete this.node},_eventProxy:function(a,b){b=b.split(" "),this._canvas[a](function(){for(var a=0;a<b.length;a++)this.handleCanvasEvent({type:b[a]})}.bind(this))},_initNpoPlayer:function(){var b={width:"100%",height:"100%",image:this._poster,options:a.extend({},this._options,{wmode:"transparent",showTitlebar:!1,showControlbar:!1,showShareButton:!1,showShareButtonTop:!1})};switch(c.resolveMimeType(this._src)){case"application/x-poms-prid":b.prid=this._src.substr(5);break;case"application/x-poms-srid":b.srid=this._src.substr(5);break;case"application/x-poms-urn":b.urn=this._src;break;default:this.emit("error",{msg:"De opgevraagde uitzending kan niet worden afgespeeld. Onbekend media type "+c.resolveMimeType(this._src)})}this._canvas=npoplayer(this.id).setup(b)},getCurrentTime:function(){return this._canvas.getPosition()},getDuration:function(){return this._duration},getMuted:function(){var a=this._canvas.getMute();return typeof a=="function"?a():a},getPaused:function(){var a=this._canvas.getState();return a==="PAUSED"||a==="IDLE"},getSrc:function(){return this._src},getVolume:function(){return this._canvas.getVolume()/100},pause:function(){this.getPaused()||this._canvas.pause()},play:function(){this.getPaused()&&this._canvas.play()},setCurrentTime:function(a){return this._canvas.seek(a)},_setDuration:function(a){a&&this._duration!==a&&(this._duration=a,this.handleCanvasEvent({type:"durationchange"}))},setMuted:function(a){return this._canvas.setMute(a)},setPoster:function(a){this._poster=a},setSrc:function(b){this._src=this._getSaveSrc(b);var d={options:a.extend({},this._options)};this._poster&&(d.image=this._poster);switch(c.resolveMimeType(this._src)){case"application/x-poms-prid":this._canvas.loadByPrid(this._src.substr(5),d);break;case"application/x-poms-srid":this._canvas.loadBySrid(this._src.substr(5),d);break;case"application/x-poms-urn":this._canvas.loadByUrn(this._src,d)}},setVolume:function(a){typeof this._canvas.getMute()=="function"?this._canvas.setVolume(a):this._canvas.setVolume(Math.round(a*100))}}),i=["application/x-poms-prid","application/x-poms-srid","application/x-poms-urn"];h.extend(b,{NAME:"npoplayer",PLUGIN:undefined,PLUGIN_DOWNLOAD:undefined,JS_LOCATION:"http://npoplayer.omroep.nl/csjs/npoplayer-min.js",SCRIPT_TAG_ID:"__npo_player_script_tag__",isAvailable:function(){return!0},canPlayType:function(a){return i.indexOf(a)!==-1}});return h}),define("vpro/mediaplayer/js/engines/engines",["vpro/mediaplayer/js/engines/AudioHTML5Engine","vpro/mediaplayer/js/engines/VideoHTML5Engine","vpro/mediaplayer/js/engines/JWFlashEngine","vpro/mediaplayer/js/engines/SilverlightEngine","vpro/mediaplayer/js/engines/YouTubeIFrameEngine","vpro/mediaplayer/js/engines/VimeoEngine","vpro/mediaplayer/js/engines/VideoFlashEngine","vpro/mediaplayer/js/engines/NpoPlayerEngine"],function(a,b,c,d,e,f,g,h){var i,j={};j[h.NAME]=h,j[a.NAME]=a,j[b.NAME]=b,j[c.NAME]=c,j[d.NAME]=d,j[e.NAME]=e,j[f.NAME]=f,j[g.NAME]=g;return{engines:j,getAvailable:function(a){i=[];if(a)for(var b=0,c=a.length;b<c;b++)j[a[b]]&&j[a[b]].isAvailable()&&i.push(j[a[b]]);else for(var d in j)j[d].isAvailable()&&i.push(j[d]);return i}}}),define("vpro/mediaplayer/js/util/Source",["vpro/mediaplayer/js/MimeTypes"],function(a){var b=function(b){var c=typeof b=="string"?b:b.url;this.src=c,this.type=a.resolveMimeType(c)};return b}),define("vpro/mediaplayer/js/util/TimeRanges",[],function(){function d(a,b){if(b<a)throw Error("The end of a range must be greater than the start");this.start=a,this.end=b}function c(){this.ranges=[]}var a=Math.max,b=Math.min;c.prototype={size:function(){return this.ranges.length},start:function(a){if(this.ranges[a])return this.ranges[a].start},end:function(a){if(this.ranges[a])return this.ranges[a].end},add:function(a,b){this.ranges=this.__collapseRanges__(new d(a,b),this.ranges)},__collapseRanges__:function(c,e){var f=[c];for(var g=e.length-1;g>=0;g--)this.__hasOverlap__(e[g],f[0])&&f.push(e.splice(g,1)[0]);e.push(f.reduce(function(c,e){return new d(b(c.start,e.start),a(c.end,e.end))})),e.sort(function(a,b){return a.start-b.start});return e},__hasOverlap__:function(a,b){return!(a.end<=b.start)&&!(a.start>=b.end)}};return c}),define("vpro/mediaplayer/js/player",["jquery","ext/stapes/0.8.1/stapes","ext/stapes/plugins","vpro/mediaplayer/js/util/StapesObservable","vpro/mediaplayer/js/util/EventIntent","vpro/mediaplayer/js/Controls","vpro/mediaplayer/js/engines/engines","vpro/mediaplayer/js/util/Source","vpro/mediaplayer/js/util/TimeRanges"],function(a,b,c,d,e,f,g,h,i){var j=b.subclass({constructor:function(b,c){this.node=a(b),this.node.is(".player")||this.node.addClass("player"),c=c?c:{},c=a.extend({},j.DEFAULTS,c),c=a.extend({},c,this.parseNode(this.node[0])),this.options=c,this.engines=g.getAvailable(c.engines),c.src&&this.setSrc(c.src),c.controls&&(this.controls=this.createControls(c)),c.poster&&this.setPoster(c.poster),c.segments&&(this.segments=c.segments),c.currenttime&&this.currentTime(c.currenttime),this.bindEventHandlers()},bindEventHandlers:function(){a(document).bind("fullscreenchange mozfullscreenchange webkitfullscreenchange",this.handleFullScreenChange.bind(this)),this.eventIntent=new e(this.node),this.eventIntent.add(this.handleMouseIdle.bind(this),this.handleMouseHover.bind(this)),this.eventIntent.resetState()},play:function(){this.engine&&this.engine.play()},pause:function(){this.engine&&this.engine.pause()},stop:function(){this.engine&&this.engine.stop()},src:function(a){if(a!==undefined)this.setSrc(a);else return this.getSrc()},volume:function(a){if(a!==undefined)this.setVolume(a);else return this.getVolume()},autoplay:function(a){if(a!==undefined)this.setAutoplay(a);else return this.getAutoplay()},muted:function(a){if(a!==undefined)this.setMuted(a);else return this.getMuted()},loop:function(a){if(a!==undefined)this.setLoop(a);else return this.getLoop()},poster:function(a){if(a!==undefined)this.setPoster(a);else return this.setPoster()},currentTime:function(a){if(a!==undefined)this.setCurrentTime(a);else return this.getCurrentTime()},width:function(){return this.getWidth()},height:function(){return this.getHeight()},videoWidth:function(){return this.getVideoWidth()},videoHeight:function(){return this.getVideoHeight()},buffered:function(){return this.getBuffered()},seeking:function(){return this.getSeeking()},ended:function(){return this.getEnded()},error:function(){return this.getError()},duration:function(){return this.getDuration()},setSrc:function(a){this.node.removeClass("error"),typeof a=="string"?a=[new h(a)]:typeof a=="object"&&(a=a.map(function(a){return new h(a)}));var b=this.getEngineData(a);this.node.find(".player-error").remove(),this.node.addClass("loading");if(b){var c=b.source,d=b.engine,e=/#t=([0-9 .]+),([0-9 .]+)/.exec(c.src);e&&this.setSegments([{start:e[1],end:e[2]}]),this.engine&&this.engine instanceof d&&this.engine.setSrc(c.src);if(!this.engine||!(this.engine instanceof d))this.engine=this.createEngine(d,c.src);this.node.removeClass("audio video"),/audio|video/.test(c.type)&&this.node.addClass(/audio|video/.exec(c.type)[0])}else this.engine&&(this.engine.destroyCanvas(),this.engine=null),this.renderEngineNotFound(a);this.controls&&this.controls.reset(this.engine)},getSrc:function(){if(this.engine)return this.engine.getSrc()},setCurrentTime:function(a){this.engine&&this.engine.setCurrentTime(a)},getCurrentTime:function(){if(this.engine)return this.engine.getCurrentTime()},setSegments:function(a){this.segments=a},getSegments:function(){if(this.segments)return this.segments},setVolume:function(a){this.engine&&(this.engine.getMuted()&&this.engine.setMuted(!1),this.engine.setVolume(parseFloat(a)))},getVolume:function(){if(this.engine)return this.engine.getVolume()},setMuted:function(a){this.engine&&this.engine.setMuted(a),this.controls&&this.controls.updateVolume(a?0:this.engine.getVolume())},getMuted:function(){this.engine&&this.engine.getMuted()},setAutoplay:function(a){this.engine&&this.engine.setAutoplay(a)},getAutoplay:function(){this.engine&&this.engine.getAutoplay()},setLoop:function(a){this.engine&&this.engine.setLoop(a)},getLoop:function(){if(this.engine)return this.engine.getLoop()},getWidth:function(){return this.node.width()},getHeight:function(){return this.node.height()},getVideoWidth:function(){if(this.engine)return this.engine.getVideoWidth()},getVideoHeight:function(){if(this.engine)return this.engine.getVideoHeight()},getBuffered:function(){if(this.engine)return this.engine.getBuffered()},getPaused:function(){if(this.engine)return this.engine.getPaused()},getPlayed:function(){if(this.engine)return this.engine.getPlayed()},getSeeking:function(){if(this.engine)return this.engine.getSeeking()},getEnded:function(){if(this.engine)return this.engine.getEnded()},getError:function(){return this._error},setPoster:function(a){this.engine&&this.engine.setPoster(a),this._poster=a,this.node.find(".player-poster").remove();if(a&&this.node.find(".player-error").length<1){var b=document.createElement("div");b.className="player-poster",b.style.backgroundImage='url("'+encodeURI(a)+'")',this.node.append(b)}},getPoster:function(){return this._poster},grabImageData:function(){if(this.engine)return this.engine.grabImageData()},getDuration:function(){return this._duration?this._duration:this.engine?this.engine.getDuration():NaN},getNode:function(){return this.node.get(0)||!1},parseNode:function(a){if(typeof a=="undefined"||!a)throw new Error("Invalid node element for player");var b=j.ATTRIBUTE_WHITELIST,c,d,e={};for(var f=b.length-1;f>=0;f--)c=b[f],typeof a.hasAttribute!="undefined"&&a.hasAttribute(c)&&(d=a.getAttribute(c),e[c]=d||!0,d===c&&(e[c]=!0));return e},getEngineData:function(a){var b=this.engines,c,d;for(var e=0;e<a.length;e++){d=a[e];for(var f=0;f<b.length;f++){c=b[f];if(c.isAvailable()&&c.canPlayType(d.type))return{engine:c,source:d}}}return null},findRequiredPlugin:function(a){var b,c;for(var d=0;d<a.length;d++){b=a[d];for(var e in g.engines){c=g.engines[e];if(c.canPlayType(b.type)&&c.PLUGIN!==undefined)return{name:c.PLUGIN,link:c.PLUGIN_DOWNLOAD}}}},getEngineName:function(){if(this.engine)return this.engine.name},createEngine:function(a,b){var c={src:b,volume:this.engine?this.engine.getVolume():this.options.volume,muted:this.engine?this.engine.getMuted():this.options.muted,loop:this.options.loop,controls:this.options.controls,autoplay:this.options.autoplay,fill:this.node.css("background-color"),currenttime:this.options.currenttime,poster:this.getPoster()};this.engine&&this.engine.destroyCanvas();var d=new a(c);d.createCanvas(this.node[0]),this.listenTo(d,"durationchange",this.handleDurationChange.bind(this)),this.listenTo(d,"loadedmetadata",this.handleLoadedMetaData.bind(this)),this.listenTo(d,"volumechange",this.handleVolumeChange.bind(this)),this.listenTo(d,"timeupdate",this.handleTimeUpdate.bind(this)),this.listenTo(d,"loadeddata",this.handleLoadedData.bind(this)),this.listenTo(d,"canplay",this.handleCanPlay.bind(this)),this.listenTo(d,"error",this.handleError.bind(this)),this.listenTo(d,"pause",this.handlePause.bind(this)),this.listenTo(d,"play",this.handlePlay.bind(this)),this.listenTo(d,"loadstart",this.handleLoadStart.bind(this)),this.listenTo(d,"progress",this.handleProgress.bind(this)),this.listenTo(d,"suspend",this.handleSuspend.bind(this)),this.listenTo(d,"abort",this.handleAbort.bind(this)),this.listenTo(d,"emptied",this.handleEmptied.bind(this)),this.listenTo(d,"stalled",this.handleStalled.bind(this)),this.listenTo(d,"waiting",this.handleWaiting.bind(this)),this.listenTo(d,"playing",this.handlePlaying.bind(this)),this.listenTo(d,"canplaythrough",this.handleCanPlayThrough.bind(this)),this.listenTo(d,"seeking",this.handleSeeking.bind(this)),this.listenTo(d,"seeked",this.handleSeeked.bind(this)),this.listenTo(d,"ended",this.handleEnded.bind(this)),this.listenTo(d,"ratechange",this.handleRateChange.bind(this)),this.listenTo(d,"adstart",this.handleAdStart.bind(this)),this.listenTo(d,"adcomplete",this.handleAdComplete.bind(this));return d},createControls:function(a){this.controls&&this.controls.destroyNode();var b=new f(a.html);this.node.append(b.createNode()),this.listenTo(b,"request:play",this.handleRequestPlay.bind(this)),this.listenTo(b,"request:pause",this.handleRequestPause.bind(this)),this.listenTo(b,"request:mute",this.handleRequestMute.bind(this)),this.listenTo(b,"request:unmute",this.handleRequestUnmute.bind(this)),this.listenTo(b,"request:timeupdate",this.handleRequestTimeUpdate.bind(this)),this.listenTo(b,"request:volumechange",this.handleRequestVolumeChange.bind(this)),this.listenTo(b,"request:togglefullscreen",this.handleRequestToggleFullScreen.bind(this)),b.updateVolume(a.volume),b.updateMute(a.muted);return b},enterFullScreen:function(){var a=this.node[0];typeof Element!="undefined"&&(Element.prototype.requestFullScreen?a.requestFullScreen():Element.prototype.webkitRequestFullScreen?a.webkitRequestFullScreen():Element.prototype.msRequestFullscreen?a.msRequestFullscreen():"HTMLMediaElement"in window&&HTMLMediaElement.prototype.mozRequestFullScreen?a.mozRequestFullScreen():/ugflash|ugsilverlight|silverlight/i.test(this.engine.name)?alert("Dubbelklik op de video voor fullscreen"):this.engine.name==="video"&&this.engine.canvas&&this.engine.canvas.webkitSupportsFullscreen?this.engine.canvas.webkitEnterFullscreen():document.isFullScreen=!0)},exitFullScreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.isFullScreen=!1},renderEngineNotFound:function(a){var b=this.findRequiredPlugin(a);this.emitPluginError(b)},emitPluginError:function(a){var b="De opgevraagde uitzending kan niet worden afgespeeld. ";a&&a.name?b+='U kunt deze uitzending afspelen met <a target="_blank" href="'+a.link+'">'+a.name+"</a>":b+="Er is een onbekende fout opgetreden.",this._error=b,this.emit("error",{msg:b})},destroy:function(){this.controls&&this.controls.node&&this.controls.destroyNode(),this.engine&&this.engine.destroyCanvas(),this.stopListening()},handleMouseHover:function(){this.node.addClass("player-hover")},handleMouseIdle:function(){this.controls&&!this.controls.isHovered()&&this.node.removeClass("player-hover")},handleLoadedMetaData:function(a){this.node.removeClass("loading suspend");if(this.controls){var b=this.engine.getCurrentTime(),c=this.getDuration();this.controls.updateRemaining(c-b),this.controls.updateElapsed(b),this.controls.updateTime(b/c),this.controls.updateDuration(c),this.controls.updateVolume(this.engine.getVolume()),this.controls.updatePause(this.engine.getPaused()),this.controls.updateMute(this.engine.getMuted())}this.dispatchEvent(a)},handlePlay:function(a){this.options.currenttime&&this.getPlayed()&&!this.getPlayed().length&&this.setCurrentTime(this.options.currenttime),this.node.is(".audio")||this.node.find(".player-poster").fadeOut(500),this.controls&&this.controls.updatePause(!1),this.dispatchEvent(a)},handlePause:function(a){this.controls&&this.controls.updatePause(!0),this.dispatchEvent(a)},handleDurationChange:function(a){var b=this.engine.getDuration();if(!isNaN(b)&&b!==0&&b!==this._duration){this._duration=b;if(this.controls){var c=this.getDuration();this.controls.updateDuration(c),this.segments&&this.segments.length&&this.controls.updateSegments(this.segments,c)}this.dispatchEvent(a)}},handleTimeUpdate:function(a){if(this.controls){var b=this.engine.getCurrentTime(),c=this.getDuration();this.controls.updateRemaining(c-b),this.controls.updateElapsed(b),this.controls.updateTime(b/c)}this.dispatchEvent(a)},handleVolumeChange:function(a){if(this.controls){var b=this.engine.getMuted();b||this.controls.updateVolume(this.engine.getVolume()),this.controls.updateMute(b)}this.dispatchEvent(a)},handleError:function(a){var b=this.engine.getSrc(),c=b instanceof h?[b]:[new h(b||"")],d=this.findRequiredPlugin(c);d?this.emitPluginError(d):(this._error=a.msg,this.emit("error",a))},handleCanPlayThrough:function(a){this.dispatchEvent(a)},handleLoadedData:function(a){this.dispatchEvent(a)},handleRateChange:function(a){this.dispatchEvent(a)},handleLoadStart:function(a){this.dispatchEvent(a)},handleProgress:function(a){this.node.removeClass("suspend"),this.controls&&this.engine.getBuffered()&&this.controls.updateBuffered(this.engine.getBuffered(),this.engine.getCurrentTime(),this.getDuration()),this.dispatchEvent(a)},handleCanPlay:function(a){this.dispatchEvent(a)},handleSuspend:function(a){this.node.addClass("suspend"),this.dispatchEvent(a)},handleEmptied:function(a){this.dispatchEvent(a)},handleStalled:function(a){this.dispatchEvent(a)},handlePlaying:function(a){this.dispatchEvent(a)},handleWaiting:function(a){this.dispatchEvent(a)},handleSeeking:function(a){this.node.addClass("seeking"),this.dispatchEvent(a)},handleSeeked:function(a){this.node.removeClass("seeking");if(this.controls){var b=this.engine.getCurrentTime(),c=this.getDuration();this.controls.updateRemaining(c-b),this.controls.updateElapsed(b),this.controls.updateTime(b/c)}this.dispatchEvent(a)},handleAbort:function(a){this.dispatchEvent(a)},handleEnded:function(a){this.dispatchEvent(a)},handleFullScreenChange:function(){document.isFullScreen||document.mozFullScreen||document.webkitIsFullScreen?this.node.addClass("fullscreen"):this.node.removeClass("fullscreen")},handleRequestPlay:function(){this.play()},handleRequestPause:function(){this.pause()},handleRequestMute:function(){this.setMuted(!0)},handleRequestUnmute:function(){this.setMuted(!1)},handleRequestTimeUpdate:function(a){this.setCurrentTime(a*this.getDuration())},handleRequestVolumeChange:function(a){this.muted()&&this.muted(!1),this.setVolume(a)},handleRequestToggleFullScreen:function(){document.isFullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement?this.exitFullScreen():this.enterFullScreen()},handleAdStart:function(){this.node.addClass("player-controls-disabled")},handleAdComplete:function(){this.node.removeClass("player-controls-disabled")}});j.proto(d),j.proto(c.listenTo),j.extend({DEFAULTS:{controls:undefined,muted:undefined,autoplay:undefined,loop:undefined,src:undefined,poster:undefined,volume:.5,html:undefined,engines:undefined,segments:undefined},ATTRIBUTE_WHITELIST:["autoplay","controls","loop","muted","poster","src","volume","currenttime"]}),document.cancelFullScreen=function(){return document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen}();return j}),define("vpro/enrichedplayer/enrichedplayer",["vpro/enrichedplayer/visualizerContainer","vpro/mediaplayer/js/player","vpro/purno/purno"],function(a,b,c){var d={template:['<div class="enrichedplayer">','<div class="visualizerContainer">',"</div>",'<div class="playerContainer">',"</div>","</div>"].join(""),containerSelector:".enrichedplayer",visualizerContainerSelector:".visualizerContainer",playerContainerSelector:".playerContainer",parentNode:null,player:null},e=function(e){e=c.extend(this,d,e),this._initTemplate(),e.parentNode&&this.setParentNode(e.parentNode);var f=e.player;typeof f=="object"&&!(f instanceof b)&&(e.player=new b(this.playerContainer,f)),a.call(this,e)};e.prototype=c.clone(a.prototype),c.extend(e.prototype,{_initTemplate:function(){var a=document.createElement("div");a.innerHTML=this.template,this.nodes=c.makeArray(a.childNodes),this.visualizerContainer=a.querySelector(this.visualizerContainerSelector),this.playerContainer=a.querySelector(this.playerContainerSelector),this.container=a.querySelector(this.containerSelector),this.nodes.forEach(function(b){a.removeChild(b)}),a=null},removeFromParent:function(){this.nodes.forEach(function(a){a.parentNode&&a.parentNode.nodeType==1&&a.parentNode.removeChild(a)})},setParentNode:function(a){this.parentNode=a,this.nodes.forEach(function(b){a.appendChild(b)})},getParentNode:function(){return this.parentNode},getPlayerContainer:function(){return this.playerContainer||null},_onVisualizerActivate:function(b){a.prototype._onVisualizerActivate.apply(this,arguments);var c=this.container;c&&c.classList.add(b.name)},_onVisualizerDeactivate:function(b){a.prototype._onVisualizerDeactivate.apply(this,arguments);var c=this.container;c&&c.classList.remove(b.name)}});return e}),define("vpro/enrichedplayer/enrichedplayer",function(){}),define("vpro/enrichedplayer/visualizer",["vpro/purno/purno"],function(a){var b={active:!0,name:"",parentNode:null,node:null,player:null,template:"",elementMap:{}},c=function(c){this.config=this.config||{},c=a.extend(this.config,b,c);var d=c.playerEvents;d&&this.setPlayerEvents(d),c.parentNode&&this.setParentNode(c.parentNode),this.active=!!c.active,c.player&&this.setPlayer(c.player),c.node?this.setNode(c.node):this.generateNode()};c.prototype=a.clone(a.EventEmitter.prototype),a.extend(c.prototype,{setParentNode:function(a){this.parentNode=a,this.hasNode()&&this.setNode(this.getNode())},getParentNode:function(){return this.parentNode},setNode:function(a){var b=a!==this.node;this.node=a;var c=this.getParentNode();c&&c.appendChild(a),b&&this._initTemplate()},_initTemplate:function(){if(!!this.hasNode()){var a=this.getNode();a.innerHTML=this.config.template;var b=this.config.elementMap;for(var c in b)this[c]=a.querySelector(b[c])}},getName:function(){return this.name||""},setTemplate:function(a){this.config.template=a,this._initTemplate()},getNode:function(){return this.node},hasNode:function(){var a=this.node;return!!a&&a instanceof Element},generateNode:function(){var a=document.createElement("div");a.className="visualizer "+this.config.name,this.setNode(a)},show:function(){this.node.style.display="block",this.hidden=!1,this.dispatchEvent("show",this)},hide:function(){this.node.style.display="none",this.hidden=!0,this.dispatchEvent("hide",this)},activate:function(){this.active!==!0&&(this.active=!0,this._subscribePlayerEvents(),this.dispatchEvent("activate",this))},deactivate:function(){this.active!==!1&&(this.active=!1,this._unsubscribePlayerEvents(),this.dispatchEvent("deactivate",this))},isActive:function(){return!!this.active},setPlayerEvents:function(a){this._unsubscribePlayerEvents();for(var b in a)a[b]=this[a[b]].bind(this);this.playerEvents=a,this._subscribePlayerEvents()},_subscribePlayerEvents:function(){if(!!this.isActive()&&!!this.hasPlayer()){var a=this.playerEvents,b=this.getPlayer();for(var c in a)b.addEventListener(c,a[c])}},_unsubscribePlayerEvents:function(){if(!!this.hasPlayer()){var a=this.playerEvents,b=this.getPlayer();for(var c in a)b.removeEventListener(c,a[c])}},setPlayer:function(a){this.hasPlayer()&&this._unsubscribePlayerEvents(),this.player=a,this._subscribePlayerEvents()},getPlayer:function(){return this.player},hasPlayer:function(){return!!this.player},removePlayer:function(){this._unsubscribePlayerEvents(),this.player=null}});return c}),define("vpro/enrichedplayer/visualizer/movingbars",["vpro/enrichedplayer/visualizer","vpro/purno/purno"],function(a,b){var c={barClass:"bar",barWidth:6,barSpacing:2,highlightBarPoint:.5,highlightClass:"highlight",minHeight:5,name:"movingbars",template:'<div class="barContainer"></div>',elementMap:{barContainer:".barContainer"}},d=function(d){this.config=this.config||{},d=b.extend({},c,d||{});for(var e in c)this[e]=d[e];d.playerEvents={timeupdate:"triggerStep"},a.call(this,d),this.addEventListener("activate",this.initAreaDelayed.bind(this)),this.addEventListener("show",this.initAreaDelayed.bind(this)),b.addEventListener(window,"resize",this.initAreaDelayed.bind(this))};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{setNode:function(b){a.prototype.setNode.apply(this,arguments),this.isActive()&&this.initAreaDelayed()},initAreaDelayed:function(){var a=0,b=function(){a++;a!==15&&(this.barContainer.offsetWidth&&this.barContainer.offsetHeight?this.initArea():setTimeout(b.bind(this),40))};b.call(this)},initArea:function(){if(!!this.hasNode()){var a=this.barContainer,b=a.offsetWidth,c=a.offsetHeight;this.width=b,this.height=c,this.numberOfBars=Math.floor(this.width/(this.barWidth+this.barSpacing)),this.initBars()}},initBars:function(){var a=[];for(var b=0;b<this.numberOfBars;b++)a.push(this.getRandomHeight());this.barHeights=a,this.createBars(),this.renderBars()},createBars:function(){var a=document.createElement("div");a.className=this.barClass,b.extend(a.style,{styleFloat:"left",cssFloat:"left",marginRight:this.barSpacing+"px",width:this.barWidth+"px"});var c=[];for(var d=0,e=this.barHeights.length;d<e;d++){var f=a.cloneNode();d/e<this.highlightBarPoint&&(f.className+=" "+this.highlightClass),c.push(f)}this.barNodes=c,this.applyBarNodes()},applyBarNodes:function(){if(!!this.barContainer&&!!this.barNodes){var a=this.barContainer;b.makeArray(a.childNodes).forEach(function(b){a.removeChild(b)}),this.barNodes.forEach(function(b){a.appendChild(b)})}},renderBars:function(){var a=this.barNodes,c=this.barHeights,d=this.height;for(var e=0,f=this.numberOfBars;e<f;e++){var g=a[e],h=c[e],i=Math.floor((d-h)/2);b.extend(g.style,{marginTop:i+"px",height:h+"px"})}},getRandomHeight:function(){var a=this.minHeight,b=this.height-this.minHeight;return Math.round(Math.random()*(b-a))+a},triggerStep:function(){this.stepAllowed!==!1&&!!this.hasPlayer()&&this.getPlayer().getPaused()===!1&&(this.stepAllowed=!1,this.step(),this._resetStepAllowed())},_resetStepAllowed:function(){setTimeout(function(){setTimeout(function(){this.stepAllowed=!0}.bind(this),60)}.bind(this),10)},step:function(){this.barHeights&&(this.barHeights.shift(),this.barHeights.push(this.getRandomHeight()),this.renderBars())}});return d}),define("vpro/util/require/css",[],function(){if(typeof document!="undefined")return{load:function(a,b,c,d){var e=b.toUrl(a),f=document.createElement("link");f.type="text/css",f.rel="stylesheet",f.href=e,document.getElementsByTagName("head")[0].appendChild(f),c(f)}}}),define("vpro/enrichedplayer/visualizer/slideshow/slidecarousel",["vpro/purno/purno"],function(a){var b={images:[]},c=function(c){c=a.extend({},b,c||{}),this.reset(c.images)};c.prototype=a.clone(a.EventEmitter.prototype),a.extend(c.prototype,{get:function(a){var b=this.images[a];return b?b:null},getCurrent:function(){return this.get(this.current)},reset:function(a){this.current=0,this.images=[],this.add.apply(this,a),this.preloadAll()},add:function(){var b=a.makeArray(arguments),c=this.images;b.forEach(function(a){c.push(a)})},size:function(){return this.images.length},preloadAll:function(){if(this.size()===0)this.dispatchEvent("loaded",this);else{var a=0;this.images.forEach(function(b){var c=new Image;c.onload=function(){a++,a===this.size()&&this.dispatchEvent("loaded",this)}.bind(this),c.src=b},this)}},next:function(){this.current=(this.current+1)%this.size()},peekNext:function(){return this.get((this.current+1)%this.size())}});return c}),define("vpro/enrichedplayer/visualizer/slideshow",["vpro/enrichedplayer/visualizer","vpro/enrichedplayer/visualizer/slideshow/slidecarousel","vpro/purno/purno"],function(a,b,c){var d={name:"slideshow",interval:1e4,effect:"pagedrop",images:[],template:['<div class="slide next"></div>','<div class="slide current"></div>','<div class="slide overlay"></div>','<div class="slide out"></div>'].join(""),loadCSS:!1,elementMap:{currentSlide:".slide.current",outSlide:".slide.out",nextSlide:".slide.next"}},e=function(e){e=c.extend(this.config||{},d,e||{}),this.name=e.name,this.docMode=window.ActiveXObject?document.documentMode||7:10,this.addEventListener("activate",this.play.bind(this)),this.addEventListener("deactivate",this.pause.bind(this)),this.SlideCarousel=new b,this.SlideCarousel.addEventListener("loaded",this._onSlideCarouselLoaded.bind(this),this),e.playerEvents={play:"play",pause:"pause"},e.loadCSS&&require(["vpro/util/require/css!vpro/enrichedplayer/visualizer/slideshow/slideshow.css"]),this.intervalTimer=null,this.effect=e.effect,a.call(this,e),this.dispatchEvent("loadstart"),this.setImages(e.images)};e.prototype=c.clone(a.prototype),c.extend(e.prototype,{setImages:function(a){this.hasNext=!1,this.nextSlide.className="slide current";if(!a||!a.length||a!=this.images)this.images=a,this.SlideCarousel.reset(a),this.setCurrentImage()},changeSlide:function(){var a=this.SlideCarousel,b=this.outSlide,c=a.getCurrent();this.SlideCarousel.next(),this.setCurrentImage()},_initTemplate:function(){a.prototype._initTemplate.apply(this,arguments),c.addEventListener(this.outSlide,"webkitAnimationEnd",this._onOutAnimationEnd.bind(this)),c.addEventListener(this.outSlide,"MSAnimationEnd",this._onOutAnimationEnd.bind(this)),c.addEventListener(this.outSlide,"oanimationend",this._onOutAnimationEnd.bind(this)),c.addEventListener(this.outSlide,"animationend",this._onOutAnimationEnd.bind(this))},_onOutAnimationEnd:function(){var a=this.outSlide;a.className=a.className.replace(a.effect,""),a.style.backgroundImage="url("+this.currentImage+")"},play:function(){!this.isActive()||!this.hasPlayer()||this.getPlayer().getPaused()||(this.intervalTimer=setInterval(this.changeSlide.bind(this),this.config.interval))},pause:function(){!this.intervalTimer||clearInterval(this.intervalTimer)},_onSlideCarouselLoaded:function(){this.setCurrentImage(),this.dispatchEvent("loadend")},setCurrentImage:function(){var a=this.SlideCarousel,b=this.currentImage=a.getCurrent(),c=a.peekNext();if(!this.hasNext)this.setSlide(this.currentSlide,b,!0),this.outSlide.className=this.outSlide.className.replace(this.effect,""),this.setSlide(this.outSlide,b,!1),this.setSlide(this.nextSlide,c,!1),this.hasNext=!0;else{var d=this.nextSlide;this.nextSlide=this.currentSlide,this.currentSlide=d,this.currentSlide.style.visibility="inherit",this.setSlide(this.nextSlide,c,!1),this.outSlide.effect=this.effect,this.outSlide.style.visibility="inherit",this.outSlide.className="slide out "+this.effect}},setSlide:function(a,b,c){a.style.backgroundImage="url("+b+")",a.style.visibility=c?"inherit":"hidden",this.docMode<9&&(a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"',sizingMethod='scale')")}});return e}),define("vpro/enrichedplayer/visualizer/annotation/slidemanager",["vpro/util/image","vpro/util/date","vpro/purno/purno"],function(a,b,c){var d={slides:null,activeSlide:null},e=function(a){a=c.extend({},d,a||{}),a.slides&&this.setSlides(a.slides),a.activeSlide&&this.setActiveSlide(a.activeSlide)};e.prototype=c.extend(c.EventEmitter.prototype),c.extend(e.prototype,{getSlides:function(){return this._slides},setSlides:function(a){var b=[];a.forEach(function(a){b.push(c.extend({},a))}),this._slides=b,this._initSlides()},getSlide:function(a){var b=typeof a,c=this.getSlides(),d;switch(b){case"number":c[a]&&(d=c[a]);break;case"object":c.indexOf(a)!==-1&&(d=a)}return d},getSlideByTime:function(a){var b=this.getSlides(),c;for(var d=b.length-1;d>=0;d--){var e=b[d];if(e.start<=a){c=e;break}}c||(c=a>this._lastSlide.stop?this._lastSlide:this._firstSlide);return c},_initSlides:function(){var c=this._slides,d=c.length-1,e=-1;c.forEach(function(c){e++,c.index=e,c.start=c.start/1e3,c.stop=c.stop/1e3,c.duration=c.stop-c.start,c.startTime=b.format("i:s",c.start),c.stopTime=b.format("i:s",c.stop),c.template="template-"+(c.template||"").toLowerCase(),c.title=c.title||"Slide "+(i+1),c.image&&(c.image=a.urlFromUri(c.image))}),this._firstSlide=c[0],this._lastSlide=c[d],this._activeSlide=null,this._selectedSlide=null,this.setDuration(c[d].stop,!0),this.dispatchEvent("initslides",this,c)},setDuration:function(a,b){if(this._duration!==a){this._duration=a;if(b)return;this.dispatchEvent("durationchange",this,a)}},getDuration:function(){return this._duration||0},getActiveSlide:function(){return this._activeSlide},deselectSlide:function(a){var b=this.getSlide(a);this._selectedSlide=undefined,this.dispatchEvent("deselectslide",this,b)},setActiveSlide:function(a,b){var c=this.getSlide(a);if(!(!c||c==this._activeSlide&&!b)){var d=this._activeSlide;this._activeSlide=c,this.dispatchEvent("slideactivate",this,c,d)}},forceActiveSlide:function(a){this.setActiveSlide(a),this.dispatchEvent("slideforceactivate",this,this._activeSlide)},getSelectedSlide:function(){return this._selectedSlide},setSelectedSlide:function(a){var b=this.getSlide(a);if(!!b&&b!=this._selectedSlide){var c=this._selectedSlide;this._selectedSlide=b,this.dispatchEvent("slideselect",this,b,c)}}});return e}),define("vpro/enrichedplayer/visualizer/annotation/component",["ext/handlebars/1.0.0-beta6/handlebars","vpro/purno/purno"],function(a,b){var c={node:null,slideManager:null,template:"",slideManagerEvents:{},elementMap:{}},d=function(a){a=b.extend({},c,a),a.template&&this.setTemplate(a.template);var d=a.slideManagerEvents;d&&this.setSlideManagerEvents(d),a.slideManager&&this.setSlideManager(a.slideManager),a.node&&this.setNode(a.node),a.elementMap&&this._setElementMap(a.elementMap)};d.prototype=b.clone(b.EventEmitter.prototype),b.extend(d.prototype,{setNode:function(a){var b=a!==this._node;this._node=a,b&&this._initTemplate(),this.dispatchEvent("nodeset",this,a)},getNode:function(){return this._node},hasNode:function(){return!!this._node},getData:function(){return this._data||{}},setData:function(a,b){var c=this._data||{};typeof a=="string"?c[a]=b:c=a,this._data=c,this._initTemplate()},_initTemplate:function(){if(!!this.hasNode()){var a=this.getNode();a.innerHTML=this.getTemplate()(this.getData());var b=this._getElementMap();for(var c in b)this[c]=a.querySelector(b[c]);this.dispatchEvent("templateinit")}},setTemplate:function(b){this._template=a.compile(b),this._initTemplate()},getTemplate:function(){return this._template},hasTemplate:function(){return!!this._template},_setElementMap:function(a){this._elementMap=a},_getElementMap:function(){return this._elementMap||{}},setSlideManager:function(a){this.hasSlideManager()&&this._subscribeSlideManagerEvents(),this._slideManager=a,this._subscribeSlideManagerEvents()},getSlideManager:function(){return this._slideManager},hasSlideManager:function(){return!!this._slideManager},removeSlideManager:function(){this._subscribeSlideManagerEvents(),this._slideManager=null},setSlideManagerEvents:function(a){this._unsubscribeSlideManagerEvents();for(var b in a)a[b]=this[a[b]].bind(this);this._slideManagerEvents=a,this._subscribeSlideManagerEvents()},_subscribeSlideManagerEvents:function(){if(!!this.hasSlideManager()){var a=this._slideManagerEvents,b=this.getSlideManager();for(var c in a)b.addEventListener(c,a[c])}},_unsubscribeSlideManagerEvents:function(){if(!!this.hasSlideManager()){var a=this._slideManagerEvents,b=this.getSlideManager();for(var c in a)b.removeEventListener(c,a[c])}}});return d}),define("vpro/enrichedplayer/visualizer/annotation/slidecontainer",["vpro/enrichedplayer/visualizer/annotation/component","vpro/purno/purno"],function(a,b){var c={template:["{{#slides}}",'<div class="annotation-slide {{defaultSlide}}">','<div class="annotation-slide-inner">','<div class="annotation-slide-content">','<div class="annotation-slide-content-inner">',"<h1>{{title}}</h1>","{{#image}}",'<img src="{{.}}" alt="" />',"{{/image}}",'<div class="html">{{{html}}}</div>',"</div>","</div>",'<div class="annotation-slide-navigation">','<a class="activate-button" href="#" title="speel fragment {{startTime}} - {{stopTime}}">{{startTime}} - {{stopTime}} <span class="nav-title">{{title}}</span></a>',"</div>","</div>","</div>","{{/slides}}"].join(""),slideClass:"annotation-slide-inner",activeClass:"active",selectedClass:"selected",selectedParentClass:"selected-parent",activateButtonClass:"activate-button"},d=function(d){d=b.extend({},c,d||{}),d.slideManagerEvents={initslides:"_onInitSlides",slideactivate:"_onSlideActivate",slideselect:"_onSlideSelect"},this._slideClass=d.slideClass,this._activeClass=d.activeClass,this._selectedClass=d.selectedClass,this._selectedParentClass=d.selectedParentClass,this._activateButtonClass=d.activateButtonClass,this.addEventListener("templateinit",this.initSlides.bind(this)),this.addEventListener("nodeset",this._initNodeEvents.bind(this)),a.apply(this,arguments)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{_onSlideActivate:function(a,b,c){var d=this.getSlideElement(b.index);d.classList.add(this._activeClass);if(c&&c!==b){var e=this.getSlideElement(c.index);e.classList.remove(this._activeClass)}},delectAllSlides:function(){var a=this.getSlideElements();a.length>0&&a.forEach(function(a){a.classList.remove(this._selectedClass),a.parentNode.classList.remove(this._selectedParentClass)}.bind(this))},_onSlideSelect:function(a,b,c){this.delectAllSlides();if(c){var d=this.getSlideElement(c.index);d.classList.remove(this._selectedClass),d.parentNode.classList.remove(this._selectedParentClass)}var e=this.getSlideElement(b.index);e.classList.add(this._selectedClass),e.parentNode.classList.add(this._selectedParentClass),this.scrollToSlide(b.index)},_onInitSlides:function(a,b){this.setData("slides",b)},_initNodeEvents:function(){var a=this.getNode();b.addEventListener(a,"click",this._onNodeClick.bind(this))},_onNodeClick:function(a){if(!!a.target.classList.contains(this._activateButtonClass)||b.parents(a.target,"."+this._activateButtonClass).length!==0){var c=b.parents(a.target,"."+this._slideClass);c&&c[0]&&this.getSlideManager().forceActiveSlide(c[0].slideIndex),a.preventDefault?a.preventDefault():a.returnValue=!1}},scrollToSlide:function(a){var b=this.getSlideElement(a),c=this.getSlideManager(),d=b.slideIndex,e=b.offsetWidth,f=(d+1)*e-e,g=this.getNode();g.scrollLeft=f},getSlideElement:function(a){var b=this.getSlideElements(),c;switch(typeof a){case"number":b[a]&&(c=b[a])}return c},getSlideElements:function(){return this._slideElements||[]},initSlides:function(){var a=this.getNode(),c=b.query("."+this._slideClass,a);if(c){var d=-1;c.forEach(function(a){d++,a.slideIndex=d}),this._slideElements=c}}});return d}),define("vpro/enrichedplayer/visualizer/annotation/chapterbar",["vpro/enrichedplayer/visualizer/annotation/component","vpro/purno/purno"],function(a,b){var c={template:["{{#slides}}",'<a class="chapter {{defaultSlide}}" title="{{title}}">',"{{title}}","</a>","{{/slides}}"].join(""),chapterClass:"chapter",activeClass:"active",selectedClass:"selected",defaultClass:"default-slide"},d=function(d){d=b.extend({},c,d||{}),d.slideManagerEvents={initslides:"_onInitSlides",slideactivate:"_onSlideActivate",slideselect:"_onSlideSelect",deselectslide:"_onSlideDeselect",durationchange:"initChapters"},this._chapterClass=d.chapterClass,this._activeClass=d.activeClass,this._selectedClass=d.selectedClass,this._defaultClass=d.defaultClass,this.addEventListener("templateinit",this.initChapters.bind(this)),this.addEventListener("nodeset",this._initNodeEvents.bind(this)),a.apply(this,arguments)};d.prototype=b.clone(a.prototype),b.extend(d.prototype,{_onInitSlides:function(a,b){this.setData("slides",b)},_onSlideActivate:function(a,b,c){if(c){var d=this.getChapterElement(c.index);d.classList.remove(this._activeClass)}var e=this.getChapterElement(b.index);e.classList.add(this._activeClass)},_onSlideSelect:function(a,b,c){if(c){var d=this.getChapterElement(c.index);d.classList.remove(this._selectedClass)}var e=this.getChapterElement(b.index);e.classList.add(this._selectedClass)},_onSlideDeselect:function(a,b){if(b){var c=this.getChapterElement(b.index);c.classList.remove(this._selectedClass)}},_initNodeEvents:function(){var a=this.getNode();b.addEventListener(a,"click",this._onNodeClick.bind(this))},getChapterElement:function(a){var b=this.getChapterElements(),c;switch(typeof a){case"number":b[a]&&(c=b[a])}return c},_onNodeClick:function(a){if(!!a.target.classList.contains(this._chapterClass)&&!a.target.classList.contains(this._defaultClass)){var b=this._chapterElements.indexOf(a.target);this.getSlideManager().setSelectedSlide(b)}},getChapterElements:function(){return this._chapterElements||[]},initChapters:function(){var a=this.getSlideManager(),c=a.getSlides(),d=a.getDuration(),e=0,f=b.query("."+this._chapterClass,this.getNode()),g,h=0;if(!!c&&!!f){this._chapterElements=f,g=c.length;for(var i=0;i<=g-1;i++){var j=b.extend({},c[i]),k=f[j.index],l=j.stop-j.start,m=100/(d/l),n=100/(d/j.stop);i==g-1&&(m=100-h),k.style.display="inline-block",k.style.width=m+"%",j.defaultSlide&&(k.style.backgroundColor="#E7EBF2"),e=n,h+=m}}}});return d}),define("vpro/enrichedplayer/visualizer/annotation",["vpro/enrichedplayer/visualizer","vpro/enrichedplayer/visualizer/annotation/slidemanager","vpro/enrichedplayer/visualizer/annotation/slidecontainer","vpro/enrichedplayer/visualizer/annotation/chapterbar","vpro/purno/purno"],function(a,b,c,d,e){var f={name:"annotation",template:['<div class="annotation-slides">',"</div>",'<div class="chapters">',"</div>"].join(""),elementMap:{slidesEl:".annotation-slides",chaptersEl:".chapters"},useSlideContainer:!0,useChapterBar:!0,slideContainerConfig:{},chapterBarConfig:{}},g=function(g){g=e.extend(this.config||{},f,g||{}),this.name=g.name,g.playerEvents={timeupdate:"_onPlayerTimeUpdate",durationchange:"_onPlayerDurationChange",loadedmetadata:"_onPlayerDurationChange",seeked:"_onPlayerSeeked"},a.call(this,g);var h=this._slideManager=new b;h.addEventListener("slideactivate",this._onSlideActivate.bind(this)),h.addEventListener("slideforceactivate",this._onSlideForceActivate.bind(this)),this.addEventListener("activate",this._onActivate.bind(this)),g.useSlideContainer&&(this._slideContainer=new c(e.extend({slideManager:h,node:this.slidesEl},g.slideContainerConfig))),g.useChapterBar&&(this._chapterBar=new d(e.extend({slideManager:h,node:this.chaptersEl},g.chapterBarConfig))),g.slides&&this.setSlides(g.slides)};g.prototype=e.clone(a.prototype),e.extend(g.prototype,{_onPlayerSeeked:function(){this._slideManager.deselectSlide(this._slideManager.getSelectedSlide()),this._slideManager.setActiveSlide(this._slideManager.getSlideByTime(this.player.getCurrentTime()),!0)},_onSlideForceActivate:function(a,b){var c=this.getPlayer();c.setCurrentTime(b.start),c.play()},_onSlideActivate:function(a,b,c){var d=a.getSelectedSlide();(!d||d.index===b.index-1)&&a.setSelectedSlide(b.index)},getSlideManager:function(){return this._slideManager},setSlides:function(a){if(!!a){var b=this.getSlideManager(),c=this.getPlayer().getDuration();b.setDuration(c?c:0,!0),b.setSlides(a)}},_onPlayerTimeUpdate:function(){var a=this.getPlayer(),b=a.getCurrentTime(),c=this.getSlideManager(),d=c.getSlideByTime(b);c.setActiveSlide(d)},_onActivate:function(){this.forcePlayerDuration()},_onPlayerDurationChange:function(){this.forcePlayerDuration()},forcePlayerDuration:function(){var a=this.getPlayer(),b=a.getDuration();b&&this.getSlideManager().setDuration(b)}});return g}),define("vpro/woord/js/view/PlayFull",["vpro/woord/js/view/PlayAbstract","vpro/woord/js/view/InfoScreen","vpro/woord/js/view/PlayerControls","vpro/enrichedplayer/enrichedplayer","vpro/enrichedplayer/visualizer/movingbars","vpro/enrichedplayer/visualizer/slideshow","vpro/enrichedplayer/visualizer/annotation","vpro/purno/purno"],function(a,b,c,d,e,f,g){return purno.extend({},a,{initView:function(b){b=b||{},a.initView.call(this,b),this.initInfoScreen(),this.initEnrichedPlayer()},activateAnnotations:function(a){this.annotation.setSlides(a),this.annotation.activate(),this.setVisualizenav("annotation")},activateMovingBars:function(){var a=this.templates.movingbars(this.itemData);this.movingBars.setTemplate(a),this.movingBars.isActive()?this.movingBars.initAreaDelayed():this.movingBars.activate(),this.setVisualizenav("movingbars")},activateSlideshow:function(a){this.infoScreen.hideBroadcaster(),this.slideshow.setImages(a),this.slideshow.activate(),this.setVisualizenav("slideshow")},bindEnrichedPlayerEventHandlers:function(){var a=this.annotation.getSlideManager();["slideselect"].forEach(function(b){a.addEventListener(b,this.handleSlideActivate.bind(this))},this)},handleActivateVisualizer:function(){var a=this.infoScreen.getActiveVisualizer();this.emit("activate:visualizer",a)},handleActivateReadmore:function(){this.infoScreen.showLongDescription()},handleSlideActivate:function(a,b){(b.start||b.start===0)&&b.stop&&b.start<b.stop&&b.start>=0&&b.stop>0?this.emit("segmentchange",{index:b.index,start:b.start,end:b.stop,title:b.title,description:b.text}):this.error("Invalid segment start/stop points",1)},hideInfoScreen:function(){this.$el.find("#player").removeClass("hidden"),this.infoScreen.hide()},initEnrichedPlayer:function(){this.movingBars=new e,this.slideshow=new f,this.annotation=new g,this.enrichedPlayer=new d({player:this.player,initialVisualizer:!1,visualizers:[this.movingBars,this.slideshow,this.annotation]}),this.scrubber=new c({parentNode:this.enrichedPlayer.getPlayerContainer(),template:this.templates.playercontrols(),player:this.player}),this.bindEnrichedPlayerEventHandlers(),this.$el.on("click",".toinfoscreen",function(){this.emit("activate:closevisualization")}.bind(this))},initInfoScreen:function(){this.infoScreen=new b({el:this.el,template:this.templates.infoscreen}),this.infoScreen.addEventListener("activate:visualizer",this.handleActivateVisualizer.bind(this)),this.infoScreen.addEventListener("activate:readmore",this.handleActivateReadmore.bind(this))},render:function(a){var b=purno.extend({},a.getData());b.visualizers=a.getVisualizers()||[],b.series=a.getSeries()||[],this.enrichedPlayer.removeFromParent(),this.itemData=b,this.infoScreen.render(b),this.enrichedPlayer.setParentNode(this.$el.find("#player").get(0)),this.commentsView.setContainerEl(this.$el.find(".comments-container")),this.commentsView.render({identifier:b.urn,url:window.location.href,title:b.title})},setVisualizenav:function(a){var b=this.el.querySelector(".visualizenav");b.className="visualizenav "+a},showInfoScreen:function(){this.$el.find("#player").addClass("hidden"),this.infoScreen.show(),this.enrichedPlayer.getActiveVisualizers().forEach(function(a){a.deactivate()})},_getActiveVisualizerName:function(){var a=null;this.enrichedPlayer.getActiveVisualizers().forEach(function(b){a=b.getName()});return a},getVisualizerState:function(){var a=this._getActiveVisualizerName();if(!a)return null;var b={visualizer:a};if(a=="annotation"){var c=this.annotation.getSlideManager().getSelectedSlide();c&&purno.extend(b,{start:c.start,stop:c.stop})}return b}})}),define("vpro/woord/js/view/PlaySmall",["vpro/woord/js/view/PlayAbstract","vpro/woord/js/view/PlayerControls","vpro/enrichedplayer/visualizer/annotation","jquery"],function(a,b,c,d){return purno.extend({},a,{initView:function(b){b=b||{},a.initView.call(this,b),this.template=b.template||this.templates.playsmall},getPlayerControls:function(){this.initPlayerControls();return this._playerControls},initPlayerControls:function(){this._playerControls||(this._playerControls=new b({player:this.player}))},getAnnotationVisualizer:function(){this.initAnnotationVisualizer();return this.annotationVisualizer},initAnnotationVisualizer:function(){this.annotationVisualizer||(this.annotationVisualizer=new c({player:this.player,useChapterBar:!1,name:"annotationsmall",slideContainerConfig:{slideClass:"annotation-slide-small",template:options.annotationstemplate||this.templates.annotationssmall.html}}))},activateAnnotations:function(a){var b=this.getAnnotationVisualizer(),c=document.getElementById("annotations");b.setParentNode(c),b.setSlides(a)},bindEventHandlers:function(){a.bindEventHandlers.apply(this,arguments),this.$el.on("click",".sharepage",function(a){this.emit("activate:share")}.bind(this)),this.$el.on("click",".tags .showmore",function(){this.$el.find(".tags > a").show(),this.$el.find(".showmore").hide()}.bind(this))},render:function(a){var b=purno.extend({},a.getData());b.visualizers=a.getVisualizers()||[],b.series=a.getSeries()||[];var c=this.$el;c.html(this.template(b));var d=c.find("#infoscreen").get(0),e=c.find("#playercontrols");this.getPlayerControls().getControls().setNode(e),d.classList.remove("invisible"),b.segments&&b.segments.length&&this.emit("activate:visualizer","annotation")}})}),define("vpro/woord/js/controller/Play",["vpro/woord/js/util","vpro/woord/js/view/PlayFull","vpro/woord/js/view/PlaySmall"],function(a,b,c){return a.Stapes.create().extend({init:function(d){this._woord=d.woord,this._error=d.errorHandler.bind(this),this._player=d.player,this._playContainer=d.playContainer,this._applicationView=d.applicationView||null,this._favoriteMediaStore=d.favoriteMediaStore,this._mediaStore=d.mediaStore;var e=d.viewVariant==="small"?c:b;this._playView=a.Stapes.create().extend(e),this.set("active",!1),this._playView.init({container:this._playContainer,disqusShortname:d.disqusShortname,errorHandler:this._error,player:this._player,templates:d.templates}),this._bindEventHandlers()},_activateVisualizer:function(a){if(!!a){var b=this._getMediaRecord();if(!b.hasVisualizer(a)){this._error("Deze visualizer is niet beschikbaar, kies een andere",1);return}this._showVisualizer(a)}},_bindEventHandlers:function(){this._favoriteMediaStore&&(this._favoriteMediaStore.addEventListener("itemset",this._updateFavoriteButton.bind(this)),this._favoriteMediaStore.addEventListener("itemremoved",this._updateFavoriteButton.bind(this))),this._player.addEventListener("ended",function(){var a=this._playView;a.showInfoScreen(),a.showRelated(),a.scrollToRelated()}.bind(this)),this._playView.on({"activate:closevisualization":function(){this._playView.showInfoScreen(),this._updateFavoriteButton()},"activate:readmore":function(a){this._playView.showLongDescription(a)},"activate:visualizer":function(a){this._activateVisualizer(a),this._player.play()},"activate:share":function(){var a=this._getMediaRecord().getUrn(),b=this._getFavoriteUrn();this.emit("appaction",{action:"goShare",arguments:[a,purno.extend({},a!=b?{segmentUrn:b}:{})]})},"activate:favorite":function(){var a=this._getMediaRecord().getUrn(),b=this._getFavoriteUrn();this.emit("appaction",{action:"goFavoriteList",arguments:[purno.extend({urn:a},a!=b?{segmentUrn:b}:{})]})},"activate:broadcaster":function(a){this.emit("appaction",{action:"goSearch",arguments:[{broadcasters:a}]})},"activate:genre":function(a){this.emit("appaction",{action:"goSearch",arguments:[{genres:a}]})},"activate:tag":function(a){this.emit("appaction",{action:"goSearch",arguments:[{tags:a}]})},"activate:serie":function(a){this.emit("appaction",{action:"goSearch",arguments:[{programTitles:a}]})},"activate:urn":function(a){this.emit("appaction",{action:"goPlay",arguments:[a,{}]})},"related:show":function(){var a=this._getMediaRecord();a.loadRelatedItems().then(function(){this._playView.renderRelated(a.getRelatedItems())}.bind(this))},segmentchange:function(){this._updateFavoriteButton()}},this)},playItem:function(b,c){c=c||{},this._lastUrn!==b?(this._lastUrn=b,this._parseUrn(b).done(function(){this._parseQueryOptions(c)}.bind(this))):a.object.deepEqual(c,this._lastQueryOptions)||this._parseQueryOptions(c),this._lastQueryOptions=c,this.set("active",!0)},_parseUrn:function(a){var b=jQuery.Deferred();this.set("loading",!0),this._mediaStore.loadUrns(a).then(function(){return this._loadUrn(a)}.bind(this)).done(function(){var a=this._getMediaRecord();this._woord&&this._woord.setTitle(a.getData().title),this._playView.render(a),b.resolve()}.bind(this)).fail(function(){b.reject()}).always(function(){this.set("loading",!1)}.bind(this));return b.promise()},_loadUrn:function(a){var b=jQuery.Deferred(),c=this._mediaStore.getItem(a);this._setMediaRecord(c);var d=c.getData();if(d.mediaType==="segment"){var e=Math.round(d.start/1e3),f=Math.round(e+d.duration/1e3);this.emit("appaction",{action:"goPlay",arguments:[d.urnRef,{start:e,end:f,visualizer:"annotation"}]}),b.reject();return b.promise()}$.when(c.loadVisualizers(),c.loadSeries()).done(function(){b.resolve()});return b.promise()},_setMediaRecord:function(a){this._mediaRecord=a},_getMediaRecord:function(){return this._mediaRecord||null},_hasMediaRecord:function(){return!!this._getMediaRecord()},_parseQueryOptions:function(a){if(!!this._hasMediaRecord()){var b=this._getMediaRecord(),c=a.visualizer;(a.start||a.stop)&&!c&&(c="annotation"),this._player.setMediaRecord&&this._player.setMediaRecord(b,a),this._showVisualizer(c)}},_updateFavoriteButton:function(){if(!!this._favoriteMediaStore){var a=this._getFavoriteUrn(),b=this._favoriteMediaStore.hasItemByUrn(a);this._playView.setFavoriteActive(b)}},_getFavoriteUrn:function(){var a=this._playView.getVisualizerState();if(a&&a.visualizer=="annotation"){var b=this._getSelectedSegment();if(b)return b.urn}return this._hasMediaRecord()?this._getMediaRecord().getUrn():null},_getSelectedSegment:function(){if(!this._hasMediaRecord())return null;var a=this._playView.getVisualizerState();if(!a||a.visualizer!="annotation")return null;var b=this._getMediaRecord();return b.getSegmentByStarttime(a.start)},_showVisualizer:function(a){var b=this._getMediaRecord();if(!b||!b.hasVisualizer(a))this._playView.showInfoScreen(),this._updateFavoriteButton();else{this._playView.hideInfoScreen();switch(a){case"annotation":var c=b.getVisualizer("annotation").data,d=0,e=[];function f(a,c,d){this.start=a,this.stop=c,this.html=b._data.longDescription,b._data.images.length>0&&(this.image=b._data.images[0].imageUri),this.sequenceNumber=d,this.template="TEXTIMAGELEFT",this.text=b._data.description,this.title=b._data.title,this.defaultSlide="default-slide"}var g=1;c.forEach(function(a){d<a.start&&(e.push(new f(d,a.start,a.sequenceNumber+g-1)),a.sequenceNumber=a.sequenceNumber+g,g++),d=a.stop}),d<b._data.duration&&e.push(new f(d,b._data.duration,1e5)),e.forEach(function(a){c.splice(a.sequenceNumber,0,a)}),this._playView.activateAnnotations(c);break;case"movingbars":this._playView.activateMovingBars();break;case"slideshow":var b=this._getMediaRecord();if(!b.hasVisualizer("slideshow"))return;var h=b.getVisualizer("slideshow").data;this._playView.activateSlideshow(h)}this._updateFavoriteButton()}}})}),define("vpro/woord/js/vendor/stapes-router",["vpro/woord/js/util"],function(a){var b=/:\w+/g,c=/\*\w+/g,d=/[-[\]{}()+?.,\\^$|#\s]/g;a.Stapes.Router=a.Stapes.create().extend({_historySupport:!!window.history&&!!window.history.pushState,_previousRoute:!1,_route:!1,_routeFilter:!1,_routes:a.Stapes.create(),_init:function(){this._bindPopstateHandlers()},_bindPopstateHandlers:function(){if(this._historySupport){var a=!0;window.onpopstate=function(b){b.state===null&&a?a=!1:this._doRoute()}.bind(this)}else window.onhashchange=function(){this._doRoute()}.bind(this)},_doRoute:function(){var a=this.getCurrentRoute(),b=!1;this._routes.each(function(c){var d=this._routeToRegExp(c.route),e=d.exec(a);e&&(b=!0,this._previousRoute=this._route,this._route={data:c.handler?c.handler.apply(this,e.slice(1)):!1,name:c.name,requestRoute:a,route:c.route},this.emit("routechange routechange:"+c.name))},this),b||this.emit("error","NO_MATCHING_ROUTE_FOR_URL")},_pushState:function(a){this._pushStateFilter&&(a=this._pushStateFilter(a)),this._historySupport?window.history.pushState(a,"",a):window.location.hash=a},_routeToRegExp:function(a){a=a.replace(d,"\\$&").replace(b,"([^/]+)").replace(c,"(.*?)");return new RegExp("^"+a+"$")},addRoute:function(a,b,c){this._routes.push({handler:c||!1,name:a,route:b})},getCurrentRoute:function(){var a=String(window.location.href);this._routeFilter&&(a=this._routeFilter(a));return a},getPreviousRoute:function(){return this._previousRoute},getRoute:function(){return this._route},navigate:function(a){a!==String(window.location.href)&&(this._pushState(a),this._historySupport&&this._doRoute())},setPushStateFilter:function(a){this._pushStateFilter=a},setRouteFilter:function(a){this._routeFilter=a}})}),define("vpro/woord/js/controller/Router",["vpro/woord/js/util","vpro/woord/js/vendor/stapes-router"],function(a){return a.Stapes.Router.create().extend({_currentRoutes:{},_routeConf:[{name:"home",route:"start.html*mgnlcrap"},{name:"lees",route:"lees.html*mgnlcrap"},{name:"lees",route:"lees/*article",callback:function(a){return{article:a}}},{name:"favoriet",route:"favoriet.html*options",callback:function(b){return purno.extend({},a.url.parseQuery(b))}},{name:"mediacollection",route:"media-collectie.html*options",callback:function(b){return purno.extend({},a.url.parseQuery(b))}},{name:"search",route:"zoek.html"},{name:"search",route:"zoek.html*options",callback:function(b){return purno.extend({},a.url.parseQuery(b))}},{name:"share",route:"deel.:mediaType.:mediaId.html*options",callback:function(b,c,d){var e={mediaType:b,mediaId:c};d&&purno.extend(e,a.url.parseQuery(d));return e}},{name:"play",route:"luister.:mediaType.:mediaId.html*options",callback:function(b,c,d){var e={mediaType:b,mediaId:c};d&&purno.extend(e,a.url.parseQuery(d));return e}}],init:function(a){this.woord=a,this._historySupport=this.woord.config.historySupport,this._currentRoutes={home:this.woord.config.siteRoot+"start.html",start:this.woord.config.siteRoot+"start.html",lees:this.woord.config.siteRoot+"start.html",search:this.woord.config.siteRoot+"zoek.html"},this.setRouteFilter(this.handleRouteFilter.bind(this)),this.setPushStateFilter(this.handlePushStateFilter.bind(this)),this.on("routechange",this.handleRouteChange,this),this._init(),this._routeConf.forEach(function(a){this.addRoute(a.name,a.route,a.callback||!1)},this),this._doRoute()},handlePushStateFilter:function(a){this._historySupport||(a.slice(0,4)==="http"?a=a.replace(this.woord.config.siteRoot,""):a=a.replace(this.woord.config.siteRootRelative,""),a="#!/"+a);return a},handleRouteChange:function(){var a=this.getRoute();this._currentRoutes[a.name]=this.woord.config.siteRoot+a.requestRoute},handleRouteFilter:function(a){a=a.replace("#!/",""),a=a.replace(this.woord.config.siteRoot,"");return a},open:function(a){if(this._currentRoutes[a]){var b=this._currentRoutes[a];this.navigate(b)}}})}),define("vpro/woord/js/controller/konami",[],function(){function c(){if("Audio"in window){var a=document.getElementById("wrapper");a&&a.addEventListener("keyup",function(a){if(a.target.matchesSelector("#q")){var c=a.target.value.trim().toLowerCase();c==="konamicode"&&b()}})}}function b(){if(!a){var b=new Audio;b.src="http://files.vpro.nl/media/wow.wav",window.addEventListener("click",function(){b.play()}),document.body.classList.add("konami"),a=!0}}var a=!1;return{init:c}}),define("vpro/woord/js/view/AbstractOverlay",["vpro/woord/js/util","vpro/purno/purno","jquery"],function(a,b,c){var d={overlayClass:""};return a.Stapes.create().extend({NR_OF_STYLES:2,initOverlay:function(a){a=b.extend({},d,a||{}),this.config=a,this.visible=!1,this.name=a.name,this.$parent=c(a.parentNode),this.templates=a.templates,this.$el=c('<div id="'+this.name+'-overlay"></div>'),this.$el.addClass("abstractoverlay "+this.name+"-overlay "+a.overlayClass),this.$el.html(this.templates.overlay({content:""})),this.$parent.append(this.$el),this._bindEventHandlers()},_bindEventHandlers:function(){this.$el.on("click",".topbar",function(){this.hide(),this.emit("activate:hide")}.bind(this)),a.Stapes.on("routechange",function(){this.visible&&this.hide(!0)},this)},hide:function(a){a=!!a,this.$el.removeClass("visible"),this.visible=!1,this.emit("hide",a)},_render:function(a){var b=this.templates.overlay({content:a});this.$el.html(b)},setStyle:function(a){for(var b=0;b<this.NR_OF_STYLES;b++)this.$el.removeClass("abstractoverlay-style-"+b);this.$el.addClass("abstractoverlay-style-"+a)},show:function(){this.$el.addClass("visible"),this.visible=!0,this.emit("show")}})}),define("vpro/util/xml-templates",[],function(){function c(c){var d={},e=a(c),f=e.getElementsByTagName("template");for(var g=0,h=f.length;g<h;g++){var i=f[g],j=b(i.attributes.getNamedItem("id").value),k;i.textContent?k=b(i.textContent):k=b(i.firstChild.nodeValue),d[j]=k}return d}function b(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function a(a){var b,c;try{window.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=undefined}if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw new Error("Invalid XML");return b}return function(a,b,d){d=d||!1;var e="vpro/util/require/template!"+a,f=d?"ext/handlebars/1.0.0-beta6/handlebars":"ext/mustache/0.7.3/mustache";require([e,f],function(a,e){var f=c(a.html);for(var g in f){var h=f[g];if(d){var i=e.compile(h);f[g]=i,f[g].render=i,f[g].html=h,e.registerPartial(g,f[g])}else{function j(a){this.html=a}j.prototype.render=function(a){return a?e.to_html(this.html,a):this.html},f[g]=new j(h)}}b(f)})}}),define("vpro/util/require/xmltemplate",["require","vpro/util/xml-templates"],function(a,b){function c(a,c,d){var e=function(a){c(a)};b(a,e,d.useHandlebarsForXmltemplate||!1)}return{load:function(a,b,d,e){c(a,d,e)},process:function(a,b){c(a,b)}}}),define("vpro/social/share",["vpro/util/require/xmltemplate!vpro/social/templates.xml","domain-config"],function(a,b){function d(a){var b=/^https?:\/\/[^/]+\//.exec(a);return b&&b.length?b[0]+encodeURIComponent(a.split(b[0])[1]):a}function c(){return encodeURIComponent.apply(this,arguments)}var e=function(a){this.options=$.extend({},e.DEFAULTS,a),this.buttons=this.createButtons(this.options.buttons)};e.prototype={getButtons:function(){return this.buttons},getButton:function(a){return this.buttons[a]},renderHTML:function(){var a=["<ul>"];for(var b in this.buttons)a.push('<li class="share-'+b+'">'+this.buttons[b]+"</li>");a.push("</ul>");return a.join("")},createButtons:function(a){var b={};for(var c=a.length-1;c>=0;c--){var d=a[c].type,f=e.BUTTONS[d](a[c]);b[d]=f}return b}},e.DEFAULTS={wrapper:!0},e.BASE_URL=b.jsServer+"/",e.BUTTONS={delicious:function(b){return a.delicious.render({url:c(b.url||window.location.href),title:c(document.title)})},email:function(b){b.subject="Interessante link!",b.body="Deze link wil ik graag met je delen: {url}",b.img=e.BASE_URL+"1.43/vpro/social/img/share-email.png",b.body=b.body.replace("{url}",b.url||window.location.href);return a.email.render({subject:b.subject,body:b.body,img:b.img})},facebook:function(b){return a.facebook_like.render({layout:b.layout,url:d(b.url||window.location.href)})},facebook_like:function(b){return a.facebook_like.render({layout:b.layout,url:d(b.url||window.location.href)})},"facebook_new-like":function(b){b.width=450,b.show_faces=!1,b.url&&(b.url=d(b.url.replace(/\/#!/,"")));return a["facebook_new-like"].render(b)},facebook_share:function(b){return a.facebook_share.render({app_id:c(b.app_id),link:d(b.url||window.location.href),display:"popup",picture:c(b.picture)||"",name:c(b.title),caption:c(b.caption),description:c(b.description),redirect:d(b.url||window.location.href),img:e.BASE_URL+"1.43/vpro/social/img/share-facebook_share.png"})},facebook_dynamic:function(b){b.description="",b.app_id="";return a.facebook_dynamic.render({app_id:c(b.app_id),display:"popup",picture:c(b.picture)||"",caption:c(b.caption),description:c(b.description),img:e.BASE_URL+"1.43/vpro/social/img/share-facebook_share.png"})},reddit:function(b){return a.reddit.render({url:c(b.url||window.location.href)})},linkedin:function(b){return a.linkedin.render({img:e.BASE_URL+"1.43/vpro/social/img/share-linkedin.png",url:c(b.url||window.location.href),title:c(document.title),source:c(document.title),summary:c("")})},twitter:function(b){return a.twitter.render({"data-count":b.layout,"data-via":b.via,"data-url":b.url||window.location.href,"data-text":b.text})},twitter_async:function(b){return a.twitter_async.render(b||{})},twitter_dynamic:function(b){return a.twitter_dynamic.render({via:b.via,img:e.BASE_URL+"1.43/vpro/social/img/share-twitter.png"})},"google_plus-one":function(b){return a["google_plus-one"].render(b||{})},google_plus_dynamic:function(b){return a.google_plus_dynamic.render({img:e.BASE_URL+"1.43/vpro/social/img/share-google-plus.png"})}};return e}),define("vpro/woord/js/view/SlicerVisualizer",["jquery","vpro/purno/purno"],function(a,b){function d(b){this.$el=a(b),this.el=this.$el.get(0),this.width=this.$el.width(),this.height=this.$el.height(),this.barWidth=5,this.gutter=2,this.minHeight=Math.round(this.height/10),this.bars=this.getBars(),this.render()}function c(a,b){return Math.round(Math.random()*(b-a))+a}d.prototype={getBars:function(){var a=Math.floor(this.width/(this.barWidth+this.gutter)),b=[];for(var d=0;d<a;d++){var e=c(this.minHeight,this.height),f=Math.round((this.height-e)/2);b.push({height:e,selected:!1,top:f})}return b},render:function(){var b=[];this.$el.empty(),this.bars.forEach(function(c){var d=a("<div></div>").addClass("slicer-visualizer-bar");d.css({"float":"left",width:this.barWidth,height:c.height,"margin-top":c.top,"margin-right":this.gutter}),d.addClass(c.className||""),b.push(d)},this),this.$el.append(b)},setRange:function(a,b){if(a[0]<0||a[0]>1||a[1]<0||a[1]>1)throw new Error("setRange: range should be between 0 and 1");if(a[0]>a[1])throw new Error("setRange: range start can not exceed stop");var c=Math.round(a[0]*this.bars.length),d=Math.round(a[1]*this.bars.length);this.bars=this.bars.map(function(a,e){e>=c&&e<=d?a.className=b:a.className===b&&(a.className="");return a}),this.render()}};return d}),define("vpro/woord/js/view/Slicer",["jquery","vpro/woord/js/util","vpro/woord/js/view/SlicerVisualizer","vpro/woord/js/view/PlayerControls","vpro/mediaplayer/js/Controls","vpro/purno/purno"],function(a,b,c,d,e,f){var g={template:"",selected:null,visualizerSelector:".slicer-visualizer",controlsSelector:".slicer-controls"},h=function(a){this._createHandlers(),this.applyConfig(f.extend({selectedStart:null,selectedStop:null},g,a||{}))};h.prototype=f.clone(f.EventEmitter.prototype),f.extend(h.prototype,{constructor:h,_applyPlayerControlsConfig:function(){if(!!this.hasPlayerControls()){var a=new e;a.setNode(this._getPlayerControlsNode());var b=f.extend({controls:a},this.hasPlayer()?{player:this.getPlayer()}:{});this.getPlayerControls().applyConfig(b)}},_applyTemplate:function(){this.generateVisualizer(),this.hasPlayerControls()?this._applyPlayerControlsConfig():this.generatePlayerControls()},_bindParentNodeHandlers:function(){if(!!this.hasParentNode()){var a=this.getParentNode();a.on("click",".slicer-in button",this._onSlicerInHandler),a.on("click",".slicer-out button",this._onSlicerOutHandler)}},_bindPlayerHandlers:function(){if(!!this.hasPlayer()){var a=this.getPlayer();a.addEventListener("timeupdate",this._onTimeUpdateHandler)}},_createHandlers:function(){this._onSlicerInHandler=this._onSlicerIn.bind(this),this._onSlicerOutHandler=this._onSlicerOut.bind(this),this._onTimeUpdateHandler=this._onTimeUpdate.bind(this)},_formatTime:function(a){var c=b.date.secondsToHms(a);c.slice(0,3)==="00:"&&(c=c.slice(3));return c},_getPlayerControlsNode:function(){if(!this.hasParentNode())return null;var b=this.getParentNode().find(this._config.controlsSelector);return b.length?a(b[0]):null},_getVisualizerNode:function(){if(!this.hasParentNode())return null;var b=this.getParentNode().find(this._config.visualizerSelector);return b.length?a(b[0]):null},_onSlicerIn:function(){if(!!this.hasPlayer()){var a=this.getPlayer().getCurrentTime();this._config.selected&&a<this._config.selected[1]?(this._config.selected[0]=a,this.dispatchEvent("selectedchange")):this._config.selected&&a>this._config.selected[1]?(this._config.selected=null,this._config.selectedStart=a):this._config.selectedStop&&a<this._config.selectedStop?(this._config.selected=[a,this._config.selectedStop],this._config.selectedStart=this._config.selectedStop=null,this.dispatchEvent("selectedchange")):this._config.selectedStart=a,this.drawSelected()}},_onSlicerOut:function(){if(!!this.hasPlayer()){var a=this.getPlayer().getCurrentTime();this._config.selected&&a>this._config.selected[0]?(this._config.selected[1]=a,this.dispatchEvent("selectedchange")):this._config.selected&&a<this._config.selected[0]?(this._config.selected=null,this._config.selectedStop=a):this._config.selectedStart&&a>this._config.selectedStart?(this._config.selected=[this._config.selectedStart,a],this._config.selectedStart=this._config.selectedStop=null,this.dispatchEvent("selectedchange")):this._config.selectedStop=a,this.drawSelected()}},_onTimeUpdate:function(){if(!!this.hasVisualizer()){var a=this.getPlayer(),b=a.getCurrentTime()/a.getDuration();this.getVisualizer().setRange([0,b],"played"),this.drawSelected()}},_unbindParentNodeHandlers:function(){if(!!this.hasParentNode()){var a=this.getParentNode();a.off("click",".slicer-in",this._onSlicerInHandler),a.off("click",".slicer-out",this._onSlicerOutHandler)}},_unbindPlayerHandlers:function(){if(!!this.hasPlayer()){var a=this.getPlayer();a.removeEventListener("timeupdate",this._onTimeUpdateHandler)}},applyConfig:function(a){this._config=f.extend(this._config||{},a||{});for(var b in a){if(b.length<3)continue;var c="set"+b.substring(0,1).toUpperCase()+b.substring(1);f.typeOf(this[c])=="function"&&(this[c](a[b]),delete this._config[b])}},drawSelected:function(){if(!!this._config.selected&&!!this.hasPlayer()){var a=this.getPlayer().getDuration();if(a<0||isNaN(a))throw new Error("Slicer.drawSelected: Could not get duration...");var b=[this._config.selected[0]/a,this._config.selected[1]/a];this.getVisualizer().setRange(b,"selected")}},generateVisualizer:function(){var a=this._getVisualizerNode();!a||this.setVisualizer(new c(a))},getParentNode:function(){return this._$parentNode},getPlayer:function(){return this._player},getPlayerControls:function(){return this._playerControls},getSelected:function(){var a=this._config.selected.map(function(a){return Math.round(a)});a[1]===a[0]&&a[1]++;return a},generatePlayerControls:function(){var a=new d;this.setPlayerControls(a)},getTemplate:function(){return this._template},getVisualizer:function(){return this._visualizer},hasParentNode:function(){return!!this.getParentNode()},hasPlayer:function(){return!!this.getPlayer()},hasPlayerControls:function(){return!!this.getPlayerControls()},hasTemplate:function(){return!!this.getTemplate()},hasVisualizer:function(){return!!this.getVisualizer()},renderTemplate:function(){!!this.hasParentNode()&&!!this.hasTemplate()&&(this.getParentNode().html(this.getTemplate()),this._applyTemplate())},setParentNode:function(b){this.hasParentNode()&&this._unbindParentNodeHandlers();var c=a(b);this._parentNode=c.get(0),this._$parentNode=c,this._bindParentNodeHandlers(),this.hasTemplate()?this.renderTemplate():this._applyTemplate()},setPlayer:function(a){this.hasPlayer()&&this._unbindPlayerHandlers(),this._player=a,this._bindPlayerHandlers()},setTemplate:function(a){this._template=a,this.renderTemplate()},setVisualizer:function(a){this._visualizer=a},setPlayerControls:function(a){this._playerControls=a,this._applyPlayerControlsConfig()},showTimes:function(a,b){a=this._formatTime(a),b=this._formatTime(b);var c=this.getParentNode();c.find(".slicer-in .slicer-time").html(a),c.find(".slicer-out .slicer-time").html(b)}});return h}),define("vpro/woord/js/view/MediaSlicePicker",["vpro/purno/purno","vpro/woord/js/view/Slicer"],function(a,b){var c={parentNode:null,slicer:null,slicerSelector:".playerslicer",player:null},d=function(b){b=a.extend({},c,b||{}),this._onChoiceClickHandler=this._onChoiceClick.bind(this),this._onSlicerSelectedChangeHandler=this._onSlicerSelectedChange.bind(this),this.applyConfig(b)};d.prototype=a.clone(a.EventEmitter.prototype),a.extend(d.prototype,{applyConfig:function(b){this._config=a.extend(this._config||{},b);for(var c in b){if(c.length<3)continue;var d="set"+c.substring(0,1).toUpperCase()+c.substring(1);a.typeOf(this[d])=="function"&&(this[d](b[c]),delete this._config[c])}},setParentNode:function(a){!a||(this.hasParentNode()&&this.removeParentNode(),this._parentNode=a,this._bindParentNodeEventListeners(),this.generateSlicer(),this.dispatchEvent("parentnodeset",a))},getParentNode:function(){return this._parentNode||null},removeParentNode:function(){!this.hasParentNode()||(this._unbindParentNodeEventListeners(),delete this._parentNode)},hasParentNode:function(){return!!this.getParentNode()},getPlayer:function(){return this._player},setPlayer:function(a){!a||(this._player=a,this._applySlicerConfig())},hasPlayer:function(){return!!this.getPlayer()},_onSlicerSelectedChange:function(){this.syncSlicerValue(),this.dispatchEvent("choiceset","slice")},_unbindSlicerHandlers:function(){if(!!this.hasSlicer()){var a=this.getSlicer();a.removeEventListener("selectedchange",this._onSlicerSelectedChangeHandler)}},_bindSlicerHandlers:function(){if(!!this.hasSlicer()){var a=this.getSlicer();a.addEventListener("selectedchange",this._onSlicerSelectedChangeHandler)}},syncSlicerValue:function(){if(!!this.hasSlicer()){var b=this.getSlicer().getSelected(),c=0,d="";a.typeOf(b)==="array"&&(c=b[0]||0,d=c||c===0?b[1]||"":""),this._slicer.showTimes(c,d),(this._getChoiceElements()||[]).forEach(function(a){a.getAttribute("data-type")=="slice"&&(a.setAttribute("data-start",c),a.setAttribute("data-stop",d))})}},getSlicer:function(){return this._slicer},setSlicer:function(a){this._unbindSlicerHandlers(),this._slicer=a,this._applySlicerConfig(),this._bindSlicerHandlers()},hasSlicer:function(){return!!this.getSlicer()},generateSlicer:function(){var a=new b;this.setSlicer(a)},getSlicerNode:function(){return this.hasParentNode()?this.getParentNode().querySelector(this._config.slicerSelector):null},_applySlicerConfig:function(){!this.hasSlicer()||this.getSlicer().applyConfig({player:this.getPlayer(),parentNode:this.getSlicerNode()})},_bindParentNodeEventListeners:function(){!this.hasParentNode()||a.addEventListener(this.getParentNode(),"click",this._onChoiceClickHandler)},_unbindParentNodeEventListeners:function(){!this.hasParentNode()||a.removeEventListener(this.getParentNode(),"click",this._onChoiceClickHandler)},_onChoiceClick:function(b){var c=b.target;c.classList.contains("choice")||(c=a.parents(c,".choice").shift());if(!!c){var d=c.getAttribute("data-type");this.dispatchEvent("choiceset",d)}},getChoiceValue:function(){var a={},b=this._getSelectedChoiceElement();b&&["urn","start","stop","visualizer"].forEach(function(c){var d=b.getAttribute("data-"+c);d&&(a[c]=d)});return a},_getSelectedChoiceElement:function(){return this.hasParentNode()?this.getParentNode().querySelector(".selected"):null},_getChoiceElements:function(){return this.hasParentNode()?a.query(".choice",this.getParentNode()):null},setChoiceType:function(a){!a||(this._getChoiceElements()||[]).forEach(function(b){var c=b.getAttribute("data-type");b.classList[c==a?"add":"remove"]("selected")})}});return d}),define("vpro/woord/js/view/EmbedOverlay",["vpro/woord/js/view/AbstractOverlay","vpro/social/share","vpro/woord/js/view/MediaSlicePicker","vpro/purno/purno","jquery"],function(a,b,c,d,e){var f={defaultEmbedSize:"medium",embedSizes:[{size:"large",width:850,height:590},{size:"medium",width:640,height:480},{size:"small",width:560,height:440},{size:"mini",width:480,height:160}],shareButtonMapping:[{name:"facebook",type:"facebook_like",layout:"button_count"},{name:"twitter",type:"twitter_async"},{name:"googleplus",type:"google_plus-one"},{name:"email",type:"email"}]};return a.create().extend({init:function(b){b=d.extend({},f,b||{}),a.initOverlay.call(this,b),this._player=b.player,this.setStyle(0),this._mediaSlicePicker=new c({player:this._player}),this.bindEventHandlers()},bindEventHandlers:function(){this._mediaSlicePicker.addEventListener("choiceset",function(a){this._mediaSlicePicker.setChoiceType(a),this.emit("activate:mediaslice",this._mediaSlicePicker.getChoiceValue())}.bind(this)),this.$el.on("click",".embedsizes li",function(a){var b=e(a.target).closest("li").data("size");this.emit("activate:embedsize",b)}.bind(this)),this.$el.on("click",".embedcode textarea",function(){this.emit("activate:selectembedcode")}.bind(this))},render:function(a){var b=this._mediaSlicePicker;b.removeParentNode(),a.embedsizes=this.config.embedSizes,a.sharebuttons=this.config.shareButtonMapping;var c=this.templates.embedoverlay(a);this._render(c),b.setParentNode(this._getMediaSlicePickerElement())},_getMediaSlicePickerElement:function(){return this.$el.find(".mediaslicepicker-wrapper").get(0)},setMediaSliceChoiceType:function(){return this._mediaSlicePicker.setChoiceType.apply(this._mediaSlicePicker,arguments)},getMediaSliceChoiceValue:function(){return this._mediaSlicePicker.getChoiceValue()},renderEmbedcode:function(a){var b=this.templates.embedcode(a);this.$el.find(".embedcode").html(b)},renderShareButtons:function(a){var c=[];this.config.shareButtonMapping.forEach(function(b){c.push(d.extend({url:a},b))}),this._share=new b({buttons:c}),c.forEach(function(a){var b=this._share.getButton(a.type),c="."+a.name+" .button";this.$el.find(c).html(b)},this)},selectEmbedCode:function(){this.$el.find(".embedcode textarea").select()},setSelectedEmbedSize:function(a){a=a?a:this.config.defaultEmbedSize,this.$el.find(".embedsizes li").each(function(b,c){var d=e(c);d.toggleClass("selected",d.data("size")===a)})},getSelectedEmbedSizeConfig:function(){var a=this.config.defaultEmbedSize,b=null;this.$el.find(".embedsizes li.selected").each(function(b,c){a=e(c).data("size")}),this.config.embedSizes.forEach(function(c){c.size===a&&(b=c)});return b}})}),define("vpro/woord/js/controller/Share",["vpro/woord/js/view/EmbedOverlay","vpro/woord/js/util"],function(a,b){var c=function(b){b=b||{},this._embedUrl=b.embedUrl,this._player=b.player,this._templates=b.templates,this._view=a,this._mediaStore=b.mediaStore,this._woord=b.woord,this._defaultExitUrl="start.html",this._bindEventHandlers(),this._view.init({name:"embed",parentNode:b.parentNode||$("body").get(0),templates:this._templates,player:this._player})};c.prototype=purno.clone(purno.EventEmitter.prototype),purno.extend(c.prototype,{_bindEventHandlers:function(){this._view.on({"activate:close":function(){this._view.hide()},"activate:embedsize":function(a){this._view.setSelectedEmbedSize(a),this._applyEmbedData()},"activate:selectembedcode":function(){this._view.selectEmbedCode()},"activate:mediaslice":function(a){this._applyShareData(),this._applyEmbedData()},hide:this._onViewHide},this)},open:function(a){var b="urn:vpro:media:"+a.mediaType+":"+a.mediaId,c=a.segmentUrn,d=this._mediaStore;d.loadUrns(c?[b,c]:b).then(function(){var a=d.getItem(b),e=a.getData();this._woord.setTitle("Deel - "+e.title),this._player.setMediaRecord(a,!1);var f=this._getRenderData(b,c);!f||(this._view.render(f),this._view.setMediaSliceChoiceType(f.segment?"segment":"program"),this._view.setSelectedEmbedSize(),this._applyShareData(),this._applyEmbedData(),this._view.show())}.bind(this))},_applyShareData:function(){if(typeof window.npo_cookies!="undefined"&&!!npo_cookies.has_permission("social")){var a=this._view.getMediaSliceChoiceValue(),c=this._woord.getPlayerPage(a.urn);delete a.urn;var d=b.url.buildQuery(a);d.length&&(c+="?"+d),this._view.renderShareButtons(c)}},_applyEmbedData:function(){var a=this._view.getSelectedEmbedSizeConfig();if(!!a){var c=this._view.getMediaSliceChoiceValue();a.embedurl=this._embedUrl+"?"+b.url.buildQuery(c),this._view.renderEmbedcode(a)}},_getRenderData:function(a,b){var c=this._mediaStore,d=c.getItem(a);if(!d)return!1;var e={program:d.getData(),showEmbed:!0};if(b){var f=c.getItem(b);f&&d.hasSegment(b)&&(e.segment=f.getData())}return e},_onViewHide:function(a){a||this._openExitUrl()},_openExitUrl:function(){if(!!this._woord||!!this.woord)this._woord.router._previousRoute?this._woord.router.navigate(this._woord.router._previousRoute.requestRoute):this._defaultExitUrl&&this._woord.router.navigate(this._defaultExitUrl)}});return c}),define("vpro/woord/js/view/MedialistOverlay",["vpro/woord/js/view/AbstractOverlay"],function(a){var b={overlayClass:"medialist-overlay",title:"",templateName:"medialistoverlay"};return a.create().extend({init:function(c){c=purno.extend({},b,c||{}),a.initOverlay.call(this,c),this.bindEventHandlers()},bindEventHandlers:function(){this.$el.on("click",".medialist-item-content",function(a){var b=$(a.target).closest(".medialist-item"),c=this._getItemElementData(b);c.urn&&this.emit("mediaitem:click",c)}.bind(this)),this.$el.on("click",".medialist-item-remove",function(a){var b=$(a.target).closest(".medialist-item"),c=this._getItemElementData(b);c.urn&&this.emit("mediaitem:remove",c)}.bind(this)),this.$el.on("click",".medialist-share",function(){this.emit("medialist:share")}.bind(this))},_getItemElementData:function(a){var b={};["id","urn","start","stop","visualizer"].forEach(function(c){b[c]=a.attr("data-"+c)});return b},_getMedialistItemElByDataKey:function(a,b){return this.$el.find(".medialist-item[data-"+a+'="'+b+'"]')},_getMedialistItemEls:function(){return this.$el.find(".medialist-item")},getRenderedUrns:function(){var a=[];this._getMedialistItemEls().each(function(){var b=$(this).data("urn");b&&a.push(b)});return a},removeByDataKey:function(a,b){var c=this._getMedialistItemElByDataKey(a,b);c.slideUp(300,function(){c.remove(),this._getMedialistItemEls().length||this.renderEmpty()}.bind(this))},render:function(a){a=purno.extend({title:this.config.title},a);if(a.mediaitems){var b=a.mediaitems,c;for(var d in b)c=b[d]}var e=this.templates[this.config.templateName](a);this._render(e)},renderLoading:function(){this.render({loading:!0})},renderEmpty:function(){this.render({mediaItems:[]})}})}),define("vpro/woord/js/controller/MedialistAbstract",["vpro/woord/js/view/MedialistOverlay"],function(a){var b={defaultExitUrl:"",viewClass:a},c=function(a,c){c=purno.extend({},b,c||{}),this.woord=a,this._mediaStore=c.mediaStore,this._config=c,this._createView(),this._bindEventHandlers()};c.prototype=purno.clone(purno.EventEmitter.prototype),purno.extend(c.prototype,{_createView:function(){this.view=this._config.viewClass.create();var a=purno.extend({},{name:this._config.name||"medialist",parentNode:$("body").get(0),templates:this._config.templates},this._config.viewConfig||{});this.view.init(a),this.view.setStyle(0)},_bindEventHandlers:function(){this.view.on({"mediaitem:click":this._onMediaItemClick,"mediaitem:remove":this._onMediaItemRemoveClick,hide:this._onViewHide,"medialist:share":this._onMediaListShareClick},this)},_onMediaListShareClick:function(){this._openShareScreen()},_onMediaItemClick:function(a){var b=a.urn,c=this._mediaStore.getItem(b);c&&c.getType()==="segment"&&(b=a.urnRef,purno.extend(a,{urn:b,start:a.start,stop:a.start+a.duration/1e3})),this.woord.goPlay(b,a)},_onMediaItemRemoveClick:function(a){this._removeUrnFromList(a.urn)},_onViewHide:function(a){a||this._openExitUrl()},_openExitUrl:function(){this.woord.router._previousRoute?this.woord.router.navigate(this.woord.router._previousRoute.requestRoute):this._config.defaultExitUrl&&this.woord.router.navigate(this._config.defaultExitUrl)},_removeUrnFromList:function(a){this.view.removeByDataKey("urn",a)},_removeIdFromList:function(a){this.view.removeByDataKey("id",a)},_openShareScreen:function(){this.woord.openEmbedOverlay({showEmbed:!1,permalink:this._getShareUrl()})},_getShareUrl:function(){var a=this.view.getRenderedUrns();return this.woord.config.siteRoot+"media-collectie.html?urns="+a.join(",")},open:function(){}});return c}),define("vpro/woord/js/view/FavoriteOverlay",["vpro/woord/js/view/MedialistOverlay","vpro/woord/js/view/MediaSlicePicker"],function(a,b){var c={title:"Favorieten",templateName:"favoriteoverlay",name:"favorite",overlayClass:"favorite-overlay",player:null};return a.create().extend({init:function(d){d=purno.extend({},c,d||{}),this._mediaSlicePicker=new b,this._mediaSlicePicker.addEventListener("choiceset",function(a){this._mediaSlicePicker.setChoiceType(a)}.bind(this)),a.init.call(this,d),d.player&&this.setPlayer(d.player),this.$el.on("click",".addtofavorites",function(a){this.emit("addtofavorites:click")}.bind(this))},_getPickerEl:function(){return this.$el.find(".favoritepicker")},_getPickerWrapperEl:function(){return this.$el.find(".favoritepicker-wrapper")},render:function(){this._mediaSlicePicker.removeParentNode(),a.render.apply(this,arguments)},getPlayer:function(){return this._player},setPlayer:function(a){this._player=a,this._mediaSlicePicker.setPlayer(a)},hasPlayer:function(){return!!this.getPlayer()},getPickerChoiceValue:function(){return this._mediaSlicePicker.getChoiceValue()},setPickerChoiceType:function(){this._mediaSlicePicker.setChoiceType.apply(this._mediaSlicePicker,arguments)},renderPicker:function(a){var b=this.templates.favoritepicker(a);this._getPickerWrapperEl().html(b),this._mediaSlicePicker.setParentNode(this._getPickerEl().get(0))},showPicker:function(){this._getPickerEl().show()},hidePicker:function(){this._getPickerEl().hide()}})}),define("vpro/woord/js/controller/Favorite",["vpro/woord/js/controller/MedialistAbstract","vpro/woord/js/view/FavoriteOverlay","vpro/purno/purno"],function(a,b,c){var d={viewClass:b,defaultExitUrl:"start.html"},e=function(b,e){e=c.extend({},d,e||{}),this._favoriteMediaStore=e.favoriteMediaStore,this._player=e.player,e.viewConfig=c.extend(e.viewConfig||{},{player:e.player}),a.call(this,b,e),this.view.on("addtofavorites:click",this._onAddToFavoritesClick.bind(this))};e.prototype=c.clone(a.prototype),c.extend(e.prototype,{_onMediaItemRemoveClick:function(a){var b=a.id;!b||(this._removeIdFromList(b),this._favoriteMediaStore.removeItem(b))},_onAddToFavoritesClick:function(){this.addPickerToFavorites()},addPickerToFavorites:function(){var a=this.view.getPickerChoiceValue();this._mediaStore.loadUrns(a.urn).then(function(){var b=this._mediaStore.getItem(a.urn);b&&this._favoriteMediaStore.addMediaItem(b,a),this.open()}.bind(this))},open:function(a){a=a||{};var b=[];a.urn&&(b.push(a.urn),a.segmentUrn&&b.push(a.segmentUrn)),this._config.woord.setTitle("Favorieten"),this._prepareMediaStore(b).then(function(){this._loadFavoriteList(),a.urn&&this._loadPicker(a.urn,a.segmentUrn)}.bind(this)),this.view.renderLoading(),this.view.show()},_prepareMediaStore:function(a){var b=this._favoriteMediaStore.getItems(),c=a||[];b.forEach(function(a){c.push(a.urn)});return this._mediaStore.loadUrns(c)},_loadPicker:function(a,b){var d=this._mediaStore,e=d.getItem(a),f=b&&e?d.getItem(b):null;!e||(this._player.setMediaRecord(e,!1),this.view.renderPicker(c.extend({program:e.getData()},f?{segment:f.getData()}:{})),this.view.setPickerChoiceType(f?"segment":"program"))},_loadFavoriteList:function(){var a=this._favoriteMediaStore.getItems(),b=[];a.sort(function(a,b){return a.dateAdded<b.dateAdded?1:-1}),a.forEach(function(a){var d=this._mediaStore.getItem(a.urn);if(d){var e=c.extend({removable:!0},d.getData(),a);e.mediaType==="program"&&(e.start||e.stop)&&(e.mediaType="slice"),b.push(e)}}.bind(this)),this.view.render({mediaitems:b})}});return e}),define("vpro/woord/js/store/base",[],function(){var a={name:"",idKey:"id",autoSync:!0},b=function(b){this._items={},b=purno.extend({},a,b||{}),this.applyConfig(b),this.getAutoSync()&&this.readStorage()};b.prototype=purno.clone(purno.EventEmitter.prototype),purno.extend(b.prototype,{applyConfig:function(a){a=purno.extend({},a);for(var b in a){var c="set"+b.charAt(0).toUpperCase()+b.slice(1);c&&this[c](a[b])}},getItem:function(a){var b=this._items[a];return b?b:null},getItems:function(){var a=[];for(var b in this._items)a.push(this._items[b]);return a},hasItem:function(a){return this._items[a]?!0:!1},addRawItem:function(a,b){purno.typeOf(a)!="array"&&(a=[a]);var c=$.Deferred(),d=[],e=[];a.forEach(function(a){d.push(this._rawItemDecorator(a))}.bind(this)),$.when.apply(this,d).then(function(){for(var a=0;a<arguments.length;a++){var d=arguments[a];e.push(d)}this.addItem(e,b),c.resolve()}.bind(this));return c.promise()},_rawItemDecorator:function(a){var b=$.Deferred();b.resolve(a);return b.promise()},addItem:function(a,b){purno.typeOf(a)!="array"&&(a=[a]);var c=this.getIdKey();a.forEach(function(a){this.setItem(a[c],a,!1)}.bind(this)),b!==!1&&(b===!0||this.getAutoSync()===!0)&&this.writeStorage()},setItem:function(a,b,c){this._items[a]=b,this.dispatchEvent("itemset",a),c!==!1&&(c===!0||this.getAutoSync()===!0)&&this.writeStorage()},removeItem:function(a,b){var c=this.getItem(a),d;c?d=a:this.eachItem(function(b,c){b===a&&(d=c)}),d&&(delete this._items[d],this.dispatchEvent("itemremoved",d),b!==!1&&(b===!0||this.getAutoSync()===!0)&&this.writeStorage())},eachItem:function(a){var b=this._items;for(var c in b)a(b[c],c)},find:function(a){for(var b in this._items){var c=this._items[b];if(a(c))return c}return null},query:function(a){var b=[];for(var c in this._items){var d=this._items[c];a(d)&&b.push(d)}return b},readStorage:function(){return{}},writeStorage:function(){},getName:function(){return this._name||""},setName:function(a){this._name=a},hasName:function(){return!!this.getName()},getIdKey:function(){return this._idKey||""},setIdKey:function(a){this._idKey=a},getAutoSync:function(){return this._autoSync||!0},setAutoSync:function(a){this._autoSync=a}});return b}),define("vpro/media/poms-processor",["vpro/util/date","vpro/purno/shims"],function(a){function i(a){a.forEach(function(a){a.bitrate=a.avAttributes&&a.avAttributes.bitrate?a.avAttributes.bitrate:0});return a.sort(function(a,b){return b.bitrate-a.bitrate})}function h(a,b){var c=d;b.some(function(b){if(a[b]){c=a[b].value;return!0}});return c}function g(b,c){if(!b)return"";var d=!1;b.scheduleEvents&&b.scheduleEvents.length&&b.scheduleEvents[0].start?d=b.scheduleEvents[0].start/1e3:b.publishStart?d=b.publishStart/1e3:b.creationDate&&(d=b.creationDate/1e3);return d?a.format(c,d):""}function f(a){return Math.floor(a/1e3/60)}function e(a){var c={},d={};a.forEach(function(a){var e=b.indexOf(a.owner),f=a.type,g=d[f]?d[f]:-2;g<e&&(d[f]=e,c[f]=a)});return c}var b=["MIS","NEBO","BROADCASTER"],c=["SHORT","SUB","EPISODE","MAIN"],d="Er is helaas geen beschrijving voor dit programma.",j=[function(a){if(!a.broadcasters)return a;a.broadcastersJoined=a.broadcasters.join(" "),a.firstBroadcaster=a.broadcasters[0];return a},function(a){var b=e(a.descriptions||[]);a.description=h(b,c),a.longDescription=h(b,c.reverse()),a.shortDescription=b.SHORT?b.SHORT.value:"";return a},function(a){a.dateFull=g(a,"j F Y"),a.dateShort=g(a,"j M Y");return a},function(b){if(!b.duration)return b;b.durationInSeconds=Math.round(b.duration/1e3),b.durationInMinutes=f(b.duration),b.durationInHms=a.millisecondsToHms(b.duration);return b},function(a){if(typeof a.duration=="undefined"||typeof a.start=="undefined")return a;var b=a.start+a.duration;a.end=b,a.endInSeconds=Math.round(b/1e3),a.endInMinutes=f(b);return a},function(a){if(!a.locations)return a;a.locations=i(a.locations),a.programUrls=a.locations.map(function(a){return a.programUrl});return a},function(a){if(typeof a.start=="undefined")return a;a.startInSeconds=Math.round(a.start/1e3),a.startInMinutes=f(a.start);return a},function(a){var b=e(a.titles||[]);a.title=b.MAIN?b.MAIN.value:"",a.subTitle=b.SUB?b.SUB.value:"",a.shortTitle=b.SHORT?b.SHORT.value:"";return a},function(a){a.urn&&typeof a.urn=="string"&&(a.mediaType=a.urn.match(/urn:vpro:media:(.*):(.*)/)[1]);return a}];return{process:function(a){if(!a)throw new Error("Item is undefined");j.forEach(function(b){a=b(a)});return a}}}),define("vpro/purno/Purno2Stapes",{addEventListener:function(a,b){this.on(a,function(a){b.apply(this,a)}.bind(this))},removeEventListener:function(){this.off.apply(this,arguments)},dispatchEvent:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();this.emit.call(this,b,a)}}),define("vpro/woord/js/model/Media",["vpro/media/poms-processor","vpro/woord/js/util","jquery","domain-config","ext/stapes/0.8.1/stapes","vpro/purno/Purno2Stapes","vpro/purno/shims"],function(a,b,c,d,e,f){var g=d.apiServer,h=function(a){var b=[];i(a)&&b.push({type:"annotation",title:"Luister en lees",description:"Afspelen met extra achtergrondinformatie"}),j(a)&&b.push({type:"slideshow",title:"Luister en kijk",description:"Bekijk diashow tijdens het luisteren"}),b.push({type:"movingbars",title:"Luister"});return b},i=function(a){return a.segments&&a.segments.length},j=function(a){if(!a.images)return!1;var b=a.images.filter(function(a){return a.type==="BACKGROUND"});return b.length>1},k=function(a){var c=Math.min(Math.max(document.body.offsetWidth,1024),2048),d=[];a.images.forEach(function(a){if(a.type==="BACKGROUND"){var e=b.image.urlFromUri(a.imageUri,{profile:"s",options:{width:c}});d.push(e)}});return d},l=function(a){var b=a.split("\n");return b.length?"<p>"+b.join("</p><p>")+"</p>":""},m=function(a){var d=b.uri.parseUrn(a.urn),e=c.Deferred();c.ajax({dataType:"jsonp",url:g+"/media/"+d.type+"/"+d.id+"/annotations.json"}).then(function(a){(!a||!a.annotations||a.annotations.length===0||!a.annotations[0].parts)&&e.resolve([]),e.resolve(a.annotations[0].parts)},function(){e.resolve([])});return e.promise()},n=function(d){function h(b){b?f.resolve(a.process(b)):f.resolve()}var e=b.uri.parseUrn(d),f=c.Deferred();c.ajax({dataType:"jsonp",url:g+"/media/"+e.type+"/"+e.id+".json"}).then(h,function(){h({error:"No data for this request"})});return f.promise()},o=function(a){["longDescription","description","shortDescription"].forEach(function(b){a[b]=!a[b]?"":l(a[b])});var b="";if(a.images&&a.images.length){var c=function(){var b=a.images[a.images.length-1].imageUri.split(":");return b.length?b[b.length-1]:null}();c&&(b=d.imageServer+"s228/c228x136/s228x136/"+c+".jpg")}a.teaserImage=b;return a},p={},q=e.subclass({constructor:function(a){a=c.extend({},p,a||{}),this.applyConfig(a)},applyConfig:function(a){if(!!a){this._config=c.extend(this._config||{},a||{});for(var b in a){if(b.length<3)continue;var d="set"+b.substring(0,1).toUpperCase()+b.substring(1);typeof this[d]=="function"&&(this[d](a[b]),delete this._config[b])}}},setRawData:function(b){var c=a.process(b);c=o(c),this.setData(c)},setData:function(a){this._data=a,this.urn=a.urn,this.dispatchEvent("dataset",a)},getData:function(){return this._data||null},hasData:function(){return!!this.getData()},getUrn:function(){return this.hasData()?this.getData().urn||null:null},hasUrn:function(){return!!this.getUrn()},getVisualizers:function(){return this._visualizers||null},setVisualizers:function(a){this._visualizers=a},hasVisualizers:function(){return!!this.getVisualizers()},getVisualizer:function(a){var b=(this.getVisualizers()||[]).filter(function(b){return b.type===a});return b.length?b[0]:null},hasVisualizer:function(a){return!!this.getVisualizer(a)},loadVisualizers:function(){if(!this._visualizersPromise){var a=c.Deferred();this._visualizersPromise=a.promise(),this._addVisualizers().then(function(){a.resolve(this.getVisualizers())}.bind(this))}return this._visualizersPromise},_addVisualizers:function(){var a=c.Deferred();if(!this.hasData()){a.resolve();return a.promise()}var b=this.getData(),d=h(b),e=[];d.forEach(function(a){switch(a.type){case"slideshow":a.data=k(b);break;case"annotation":e.push(m(b).then(function(b){a.data=b}))}}),c.when.apply(c,e).done(function(){this.setVisualizers(d),a.resolve(d)}.bind(this));return a.promise()},getType:function(){return this.hasData()?this.getData().mediaType:null},getSeries:function(){return this._series||null},setSeries:function(a){this._series=a},hasSeries:function(){return!!this.getSeries()},hasSerie:function(a){var b=!1;this.hasSeries()&&this.getSeries().forEach(function(c){c.urn==a&&(b=!0)});return b},loadSeries:function(){if(!this._seriesPromise){var a=c.Deferred();this._seriesPromise=a.promise(),this._addSeries().then(function(){a.resolve(this.getSeries())}.bind(this))}return this._seriesPromise},_addSeries:function(){if(!!this.hasData()){var b=c.Deferred(),d=this.getData();episodeOf=d.episodeOf;var e=[];if(episodeOf&&episodeOf.length){var f=[];episodeOf.forEach(function(a){f.push(n(a.urnRef))}),c.when.apply(c,f).done(function(){for(var c=0;c<arguments.length;c++)arguments[c]&&e.push(a.process(arguments[c]));this.setSeries(e),b.resolve(e)}.bind(this))}else this.setSeries(e),b.resolve(e);return b.promise()}},getRelatedItems:function(){return this._relatedItems||null},setRelatedItems:function(a){this._relatedItems=a},hasRelatedItems:function(){return!!this.getRelatedItems()},loadRelatedItems:function(){if(!this._relatedItemsPromise){var a=c.Deferred();this._relatedItemsPromise=a.promise(),this._addRelatedItems().then(function(){a.resolve(this.getRelatedItems())}.bind(this))}return this._relatedItemsPromise},getSegments:function(){if(!this.hasData())return null;var a=this.getData();return a.segments||null},hasSegments:function(){var a=this.getSegments();return a&&a.length},hasSegment:function(a){var b=!1;this.hasSegments()&&this.getSegments().forEach(function(c){c.urn==a&&(b=!0)});return b},getSegmentByStarttime:function(a){if(!this.hasSegments())return null;var b=this.getSegments(),c=b[0];b.forEach(function(b){b.start/1e3<=a&&(c=b)});return c},_addRelatedItems:function(){var b=c.Deferred(),d=setTimeout(function(){this.setRelatedItems([]),b.resolve()}.bind(this),4e3);c.ajax({dataType:"jsonp",url:g+"/media/program/"+this.urn+"/related.json",data:{profile:"woord",max:3}}).then(function(c){clearTimeout(d),c.forEach(function(b){b=o(a.process(b))}),this.setRelatedItems(c),b.resolve()}.bind(this),function(){b.resolve()});return b.promise()}});q.proto(f);return q}),define("vpro/woord/js/store/media",["vpro/woord/js/store/base","vpro/woord/js/model/Media","jquery","ext/jquery-xdomainrequest/jquery-xdomainrequest","vpro/purno/purno"],function(a,b,c){var d={apiLocation:null},e=function(b){b=purno.extend({},d,b||{}),b.idKey="urn",a.call(this,b)};e.prototype=purno.clone(a.prototype),purno.extend(e.prototype,{setApiLocation:function(a){!a||(this._apiLocation=a)},getApiLocation:function(){return this._apiLocation||null},hasApiLocation:function(){return!!this.getApiLocation()},findByUrns:function(a){a=purno.typeOf(a)=="array"?a:[a];var b=[];a.forEach(function(a){var c=this.getItem(a);c&&b.push(c)}.bind(this));return b},loadUrns:function(a,b){b=b||function(){},a=a?purno.typeOf(a)=="array"?a:[a]:[];var d=c.Deferred(),e=this.findByUrns(a);if(e.length==a.length){setTimeout(function(){b(e),d.resolve(e)},1);return d.promise()}var f=e.map(function(a){return a.getUrn()}),g=a.filter(function(a){return f.indexOf(a)===-1});this._addByUrn(g).then(function(){var c=this.findByUrns(a);b(c),d.resolve(c)}.bind(this));return d.promise()},_rawItemDecorator:function(a){var d=c.Deferred(),e=function(a){return new b({rawData:a})};a.objectType&&a.objectType==="program"?this._addGenres(a).then(function(a){d.resolve(e(a))}):d.resolve(e(a));return d.promise()},_addGenres:function(a){var b=c.Deferred(),d=[];a.descendantOf&&a.descendantOf.forEach(function(a){if(this._isCollection(a)){var b=a.urnRef;b&&d.push(b)}}.bind(this)),this.loadUrns(d).then(function(){a.genres=[],d.forEach(function(b){var c=this.getItem(b);if(c&&c._data){var d=c._data;if(d&&this._isMemberOfWoordArchive(d)){var e=this._getBestTitle(d);e&&a.genres.indexOf(e)==-1&&a.genres.push(e)}}}.bind(this)),b.resolve(a)}.bind(this));return b.promise()},_isCollection:function(a){return this._hasType(a,"COLLECTION")},_hasType:function(a,b){return a.type&&a.type===b},_isMemberOfWoordArchive:function(a){return this._isMemberOf(a,"urn:vpro:media:group:11887617")},_isMemberOf:function(a,b){var c=a.memberOf;if(c)for(var d in c){var e=c[d];if(e.urnRef&&e.urnRef===b)return!0}return!1},_getBestTitle:function(a){return this._getBestValue(a,"titles","MAIN")},_getBestValue:function(a,b,c){if(a[b]!==undefined){for(var d in a[b]){var e=a[b][d];if(e.owner&&e.owner=="BROADCASTER"&&e.type&&e.type==c)return e.value}for(var d in a[b]){var e=a[b][d];if(e.type&&e.type==c)return e.value}for(var d in a[b]){var e=a[b][d];return e.value}}return""},_addByUrn:function(a){if(!this.hasApiLocation())throw new Error("No api location known");a=purno.typeOf(a)=="array"?a:[a];var b=c.Deferred(),d=this.getApiLocation();c.ajax({type:"POST",jsonp:!1,crossDomain:!0,isLocal:!1,traditional:!0,url:d+"/media",data:{urn:a},dataType:"json",success:function(a){mediaItems=purno.typeOf(a)=="array"?a:[],this.addRawItem(mediaItems).then(b.resolve)}.bind(this)});return b.promise()}});return e}),define("vpro/woord/js/controller/MediaCollection",["vpro/woord/js/controller/MedialistAbstract","vpro/woord/js/store/media","vpro/woord/js/util","vpro/media/poms-processor","domain-config","jquery"],function(a,b,c,d,e,f){var g={viewConfig:{title:"Media collectie",name:"media collection"}},h=function(c,d){d=purno.extend({},g,d||{}),this._mediaStore=new b({apiLocation:"http://rs-test.vpro.nl"}),a.call(this,c,d)};h.prototype=purno.clone(a.prototype),purno.extend(h.prototype,{open:function(a){var b=[];(a.urns||"").split(",").forEach(function(a){c.uri.isUrn(a)&&b.push(a)}),this.view.render({title:"Bezig met laden",hideMediaItems:!0,mediaitems:[]}),this.view.show(),this._mediaStore.loadUrns(b).then(function(a){var b=[];a.forEach(function(a){b.push(a.getData())}),this.view.render({title:"Media collectie",mediaitems:b})}.bind(this))}});return h}),define("vpro/woord/js/controller/Player",["vpro/mediaplayer/js/player","vpro/woord/js/util"],function(a,b){var c=a.subclass({constructor:a.prototype.constructor,setMediaRecord:function(a,c){if(!!a)if(this._mediaRecord!==a||c!==!1&&!!b.object.deepEqual(c||{},this._mediaRecordPlayConfig))c=c||{},this._mediaRecordPlayConfig=c,this._mediaRecord=a,this._applyMediaRecord(),this.dispatchEvent({type:"mediarecordset",mediaRecord:a});else return},_applyMediaRecord:function(){if(!!this.hasMediaRecord()){var a=this.getMediaRecord(),b=a.getData(),c=[].concat(b.programUrls),d=this._mediaRecordPlayConfig;if(d.start||d.stop){var e=d.start||0,f=Math.max(d.stop||b.duration,e);c=c.map(function(a){return a+"#t="+e+","+f},this)}this.setSrc(c)}},getMediaRecord:function(){return this._mediaRecord||null},hasMediaRecord:function(){return!!this.getMediaRecord()}});return c}),define("vpro/mediaplayer/js/module/StreamSense",["ext/stapes/0.8.1/stapes","jquery","vpro/util/url","vpro/mediaplayer/js/MimeTypes"],function(a,b,c,d){var e=new a.subclass({constructor:function(a,b){this.options=this.getOptions(b),this.startTime=0,this.eventCounter=0,this.lastHeartBeat=0,this.excludedEngines=["ugflash","ugsilverlight","npoplayer"],this.getPlayerData=this.getPlayerDataFunction(a),this.engineData=null,this.addListeners(a)},addListeners:function(a){this.player=a,this.onPause=this.handlePause.bind(this),this.onPlay=this.handlePlay.bind(this),this.onTimeUpdate=this.handleTimeUpdate.bind(this),a.addEventListener("pause",this.onPause),a.addEventListener("play",this.onPlay),a.addEventListener("timeupdate",this.onTimeUpdate)},getCurrentMediaType:function(a){return/audio/i.test(a.mime)?"audio":"video"},getEngineData:function(a){var b=a.getSrc(),c=d.resolveMimeType(b);return b?a.getEngineData([{src:b,type:c}]):null},getImageUrl:function(a){var b="http://nl.sitestat.com/klo/"+this.options.site+"/s?"+this.normalizeString(this.options.counter);return b+"&"+c.buildQuery(a)},getOptions:function(a){return b.extend({},{site:"vpro",playlist:"vpro.mediaplayer.no.conf.given",episode:"vpro.mediaplayer.no.conf.given",program:"vpro.mediaplayer.no.conf.given",mediaType:"video",counter:"unknown"},a)},getParams:function(){var a=+(new Date),b={ns_type:"hidden",ns_ts:a,ns_st_cn:"1",ns_st_pr:this.normalizeString(this.options.program,"_"),ns_st_ep:this.normalizeString(this.options.episode,"_"),ns_st_pn:"1",ns_st_po:"0",ns_st_vo:"100",ns_st_ws:"normal",ns_st_pl:this.normalizeString(this.options.playlist),ns_st_tp:"1",ns_st_id:"1299251788.58514",ns_st_sv:"4.1.0",ns_jspageurl:window.location.href,ns_st_br:"0",ns_st_cl:"0",ns_st_ub:"0",ns_st_bt:"16880",ns_st_mp:"vpro-mediaplayer",ns_st_mv:"1.1.16",ns_st_cs:"400x224",ns_st_sp:"1",ug_domein:"unknown",ug_pagina:"unknown",ug_embed_url:"sl",ns_st_pt:a-this.startTime,ns_st_pa:a-this.startTime,ns_st_pc:"1",ns_st_bp:"16880",ns_st_pp:"1",ns_st_ty:this.mediaType};return b},getPlayerDataFunction:function(a){return function(){this.engineData=this.getEngineData(a),this.engineData&&(this.mediaType=this.getCurrentMediaType(this.engineData),this.isExcludedEngine=this.isExcludedEngineFn(a))}},handlePlay:function(a){this.getPlayerData();if(!this.isExcludedEngine){this.startTime=+(new Date);var c=this.getParams(),d={ns_st_ev:"play",ns_st_ec:this.eventCounter++};c=b.extend({},c,d),this.siteStat(c)}},handleTimeUpdate:function(a){this.engineData||this.getPlayerData();if(!this.isExcludedEngine){if(!this.isHeartBeat())return;var c=this.getParams(),d={ns_st_pe:"1",ns_st_hc:"1",ns_st_ev:"hb",ns_st_ec:this.eventCounter++};c=b.extend({},c,d),this.siteStat(c)}},handlePause:function(a){this.engineData||this.getPlayerData();if(!this.isExcludedEngine){var c=this.getParams(),d={ns_st_ev:"pause",ns_st_ec:this.eventCounter++};c=b.extend({},c,d),this.siteStat(c)}},isHeartBeat:function(){var a=+(new Date),b=!1;a-this.startTime<6e4?b=a-this.lastHeartBeat>1e4:b=a-this.lastHeartBeat>6e4,b&&(this.lastHeartBeat=a);return b},isExcludedEngineFn:function(a){var b=!1,c=a.getEngineName();this.excludedEngines.forEach(function(a){c==a&&(b=!0)});return b},normalizeString:function(a,b){b=b||".";return a.replace(/\s+/g,".").replace(/[^A-Za-z\._0-9]*/g,"")},removeListeners:function(){var a=this.player;!a||(a.removeEventListener("pause",this.onPause),a.removeEventListener("play",this.onPlay),a.removeEventListener("timeupdate",this.onTimeUpdate))},siteStat:function(a){(new Image).src=this.getImageUrl(a)},updateOptions:function(a){b.extend({},this.options,a)}});e.createModule=function(a){var b=a.getProfileData(),c=b.streamSenseCounter;return function(a){function d(a){b&&b.removeListeners(),b=a}var b;a.addEventListener("dataloaded",function(a,b,f){if(!!f.hasSources()){var g=f.getTitle(),h=c+"."+g,i=(f.getMainBroadcaster()||"vpro").toLowerCase(),j=new e(a,{counter:h,episode:g,playlist:h,program:g,site:i});d(j)}})}};return e}),define("vpro/woord/js/controller/PlayerFactory",["vpro/woord/js/controller/Player","vpro/mediaplayer/js/module/StreamSense"],function(a,b){function c(a){this._view=a,this._node=this._getPlayerNode(),this._player=null,this._initPlayer()}c.prototype=purno.clone(purno.EventEmitter.prototype),purno.extend(c.prototype,{_bindEventHandlers:function(){this._player.addEventListener("durationchange",function(){var a=this._player.getDuration();this._view.setPlayerBarDuration(a)}.bind(this)),this._player.addEventListener("timeupdate",function(){var a=this._player.getCurrentTime();this._view.setPlayerBarTime(a)}.bind(this)),this._player.addEventListener("play",function(){this._view.setPlayerBarPlaying()}.bind(this)),this._player.addEventListener("pause",function(){this._view.setPlayerBarPaused()}.bind(this)),this._player.addEventListener("error",function(a){if(a.type=="error"){var b=this._player.node.find(".player-error").html();this.dispatchEvent("error",b)}}.bind(this)),this._player.addEventListener("mediarecordset",function(a){var c=a.mediaRecord.getData(),d=c.title.replace(" ",".").toLowerCase();this._streamsense&&this._streamsense.removeListeners(),this._streamsense=new b(this._player,{counter:"woordnl."+d,site:"vpro",episode:d,program:"woordnl",playlist:"woordnl."+d})}.bind(this))},_getPlayerNode:function(){if(!this._playerNode){var a=$('<div id="playerpixel"></div>');$("body").append(a),this._playerNode=a.get(0)}return this._playerNode},_initPlayer:function(){this._player=new a(this._node,{controls:!1,html:"",volume:1,muted:window.vpro&&window.vpro.debugArgs&&window.vpro.debugArgs("muted")}),this._bindEventHandlers()},getPlayerInstance:function(){return this._player}});return c}),define("vpro/woord/js/model/Stats",["jquery"],function(a){function b(){this.attributes=this.getSitestatAttributes()}b.escapeSitestatCounter=function(a){return a.replace(" ","-").toLowerCase()},b.SITESTAT_ROOT="http://nl.sitestat.com/klo/vpro/s?",b.prototype={doSitestatCall:function(a){var c=b.SITESTAT_ROOT;c+=b.escapeSitestatCounter(a);for(var d in this.attributes){var e=this.attributes[d];c+="&amp;"+d+"="+encodeURIComponent(e)}window.sitestat&&sitestat(c)},getSitestatAttributes:function(){var b={};a("meta").each(function(a,c){var d=c.getAttribute("name");if(d&&d.indexOf("sitestat")!==-1){d=d.replace("sitestat-","");var e=c.getAttribute("content");e&&(b[d]=e)}});return b},handleRoute:function(a){this.doSitestatCall(a)}};return b}),define("vpro/woord/js/store/localstorage",["vpro/woord/js/store/base"],function(a){var b=function(){a.apply(this,arguments)};b.prototype=purno.clone(a.prototype),purno.extend(b.prototype,{readStorage:function(){if(!!this.hasName()){var a={},b=localStorage[this.getName()];if(b)try{a=JSON.parse(b)}catch(c){}this._items=a}},writeStorage:function(){if(!!this.hasName()){var a=JSON.stringify(this._items);localStorage[this.getName()]=a}}});return b}),define("vpro/woord/js/store/favoritemedia",["vpro/woord/js/store/localstorage"],function(a){var b={name:"mediaitemfavorite"},c=function(c){c=purno.extend({},b,c||{}),a.call(this,c)};c.prototype=purno.clone(a.prototype),purno.extend(c.prototype,{_generateFavoriteId:function(a){a=a||{},a=purno.extend({},a.urn?{urn:a.urn}:{},a.start?{start:a.start}:{},a.stop?{stop:a.stop}:{},a.visualizer?{visualizer:a.visualizer}:{});var b=[];for(var c in a)b.push(c+"-"+a[c]);return b.join("||")},hasItemByUrn:function(a){var b=this._generateFavoriteId({urn:a});return this.hasItem(b)},addMediaItem:function(a,b){b=purno.extend(b||{},{urn:a.getUrn()});var c=this._generateFavoriteId(b),d=purno.extend({},b,{id:c,dateAdded:(new Date).getTime()});this.setItem(c,d)}});return c}),define("vpro/woord/js/view/Application",["vpro/woord/js/util"],function(a){var b={home:"#home",search:"#search",play:"#search, #play"};return a.Stapes.create().extend({init:function(a,b,c){this.woord=a,this.$el=$(b),this.el=this.$el.get(0),this.$el.html(c),this.$navContainer=this.$el.find(".slides"),this.$slides=this.$el.find(".slides > .slide"),this.$navItems=this.$el.find(".nav-item"),this.$playerBar=this.$el.find("#playertime"),this.$playerBarMobile=this.$el.find("#playermobile"),this.$spinner=this.$el.find(".spinner"),this.bindEventHandlers(),this.emit("ready")},bindEventHandlers:function(){this.$el.on("click",".hotspot",this.handleInactiveClick.bind(this)),this.$el.on("click",".nav-item",this.handleMenuClick.bind(this)),this.$el.on("click","#playertime",this.handlePlayerBarClick.bind(this)),this.$el.on("click","button.woord",this.handleLogoClick.bind(this)),this.$el.on("click","#switchapptype",this.handleSwitchAppType.bind(this))},changeState:function(a,b){a=a==="nieuws"||a==="start"?"home":a,b=b==="nieuws"||b==="start"?"home":b,this.$navContainer.addClass(a).one("transitionend webkitTransitionEnd",function(b){this.emit("statechangeready",a)}.bind(this)),this.doSlideAnimation(a),b&&b!==""&&(this.$navContainer.removeClass(b),this.$navContainer.find(".slide.active").removeClass("active"),this.$navItems.removeClass("active")),this.$navContainer.find("#"+a).addClass("active"),this.$navItems.filter('[data-state="'+a+'"]').addClass("active")},disableState:function(a){this.$slides.filter("#"+a).addClass("disabled")},doSlideAnimation:function(a){var c=b[a];!c||(this.$slides.removeClass("open"),this.$navContainer.find(c).addClass("open"))},enableState:function(a){this.$slides.filter("#"+a).removeClass("disabled")},handleInactiveClick:function(a){a.preventDefault();var b=$(a.target).parents(".slide").eq(0);b.hasClass("disabled")||this.emit("activate:slide",b.attr("id"))},handleMenuClick:function(a){a.preventDefault();var b=$(a.target).closest("a[data-state]").data("state");this.emit("activate:slide",b)},handleLogoClick:function(a){this.emit("activate:slide","home")},handlePlayerBarClick:function(){this.emit("activate:play")},hidePlayerBar:function(){this.$playerBar.addClass("hidden"),this.$playerBarMobile.addClass("hidden")},handleReflow:function(){this.emit("reflow")},handleSwitchAppType:function(){this.emit("switchapptype")},hideSpinner:function(){this.$spinner.hide()},showPlayerBar:function(){this.$playerBar.removeClass("hidden"),this.$playerBarMobile.removeClass("hidden")},setPlayerBarPaused:function(){this.$playerBar.addClass("paused")},setPlayerBarPlaying:function(){this.$playerBar.removeClass("paused")},setPlayerBarDuration:function(b){var c="--:--";b=b*1,isNaN(b)||(c=a.date.secondsToHms(b)),!isNaN(b)&&b!=0&&this.$playerBar.find(".status").removeClass("hidden"),this.$playerBar.find(".player-time-duration").html(c)},setPlayerBarTime:function(b){var c="--:--";b=b*1,isNaN(b)||(c=a.date.secondsToHms(b)),this.$playerBar.find(".player-time-elapsed").html(c)},resetPlayerBar:function(){this.setPlayerBarTime(0),this.setPlayerBarDuration(0),this.setPlayerBarPaused()},showSpinner:function(){this.$spinner.show()}})}),define("vpro/woord/js/view/ErrorOverlay",["vpro/woord/js/view/AbstractOverlay"],function(a){var b=a.create().extend({init:function(b){a.initOverlay.call(this,b)},onHide:function(){b.callback(),b.callback=!1,b.off("hide",b.onHide)},showMessage:function(a,b,c,d){var e=this.templates.erroroverlay({title:a,message:b});c===0?this.setStyle(1):this.setStyle(0),d&&(this.callback=d,this.on("hide",this.onHide)),this._render(e),this.show()}});return b}),define("vpro/woord/js/woord",["jquery","vpro/woord/js/util","vpro/woord/js/hacks","vpro/woord/js/controller/Home","vpro/woord/js/controller/Search","vpro/woord/js/controller/Play","vpro/woord/js/controller/Router","vpro/woord/js/controller/konami","vpro/woord/js/controller/Share","vpro/woord/js/controller/Favorite","vpro/woord/js/controller/MediaCollection","vpro/woord/js/controller/PlayerFactory","vpro/woord/js/model/Stats","vpro/woord/js/store/media","vpro/woord/js/store/favoritemedia","vpro/woord/js/view/Application","vpro/woord/js/view/ErrorOverlay","vpro/util/xml-templates"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a,b,c){this.name="WoordError",this.message=a,this.level=b,this.code=c||!1}s.prototype=purno.clone(Error.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.name+": "+this.message};return b.Stapes.create().extend({init:function(a){this.homeController=d,this.searchController=e,this.playController=f,this.applicationView=p,this.konamiController=h,this.errorOverlay=q,this.router=g,this.stats=new m,this.favoriteMediaStore=new o,this.mediaStore=new n({apiLocation:a.apiRoot}),this.util=b,this.config=a,this.config.templateUrl=a.jsRoot+"/vpro/woord/template/template.xml",r(this.config.templateUrl,this._onTemplatesLoad.bind(this),!0)},_onTemplatesLoad:function(a){this.config.templates=a,c.run(),this.playerFactory=new l(this.applicationView),this.player=this.playerFactory.getPlayerInstance(),this.applicationView.on("ready",this.handleAppReady,this),p.init(this,this.config.containers.app,this.config.templates.app())},bindEventHandlers:function(){this.applicationView.on({"activate:slide":function(a){a==="home"&&this.openHome(),a==="search"&&this.openSearch(),a==="play"&&this.openPlay()},"activate:play":function(){this.player.getPaused()?this.player.play():this.player.pause()},reflow:function(){var a=this.router.getRoute().name;this.applicationView.resize(),this.applicationView.doSlideAnimation(a)}},this),this.playController.on({"change:active":function(a){a&&this.applicationView.showPlayerBar()},appaction:function(a){this[a.action].apply(this,a.arguments)},"change:loading":function(a){a?this.applicationView.showSpinner():this.applicationView.hideSpinner()}},this),this.router.on({error:function(a){a==="NO_MATCHING_ROUTE_FOR_URL"&&this.error404NotFound()},routechange:this.handleStateChange},this),this.on({loadstart:function(){this.applicationView.showSpinner()},loadend:function(){this.applicationView.hideSpinner()}},this),this.playerFactory.addEventListener("error",function(a){this.error(a,0)}.bind(this)),purno.addEventListener(document,"keydown",this.handleKeydown.bind(this))},error:function(a,b,c){c=c||!1,this.emit("error",{msg:a,level:b});var d=b===0?"foutmelding":"notificatie";this.errorOverlay.showMessage(d,a,b,c);throw new s(a,b)},error404NotFound:function(){this.error("".concat("Deze pagina bestaat niet. Sluit dit scherm om ","naar de startpagina te gaan."),0,function(){this.goHome()}.bind(this))},setTitle:function(a){a!=this._title&&(this._title=a,this._onTitleSet(a),this.emit("title:change",a))},_onTitleSet:function(a){document.title="Woord.nl - "+a},getTitle:function(){return this._title||""},getPlayerPage:function(a){var c=b.uri.parseUrn(a),d=b.tmpl(this.config.playerPage,{type:c.type,id:c.id});return d},getSharePage:function(a){var c=b.uri.parseUrn(a),d=b.tmpl(this.config.shareUrl,{type:c.type,id:c.id});return d},goHome:function(){this.router.navigate(this.config.homepageUrl)},goFavoriteList:function(a){var c=this.config.favoriteUrl;a&&(c=c+"?"+b.url.buildQuery(a)),this.router.navigate(c)},goPlay:function(a,c){a||this.error("Het is niet mogelijk om een item af te spelen zonder URN",0);var d=this.getPlayerPage(a);c&&(d=d+"?"+b.url.buildQuery(c)),this.router.navigate(d)},goShare:function(a,c){a||this.error("Het is niet mogelijk om een item te delen zonder urn",0);var d=this.getSharePage(a);c&&(c=b.url.buildQuery(c))&&(d=d+"?"+c),this.router.navigate(d)},goSearch:function(a){a||this.error("Het is niet mogelijk om deze zoekactie uit te voeren.",0);var c=this.config.searchUrl+"?"+b.url.buildQuery(a);this.router.navigate(c)},handleAppReady:function(){this.playController.init({woord:this,errorHandler:this.error.bind(this),player:this.player,playContainer:this.config.containers.play,applicationView:this.applicationView,templates:this.config.templates,viewVariant:this.config.viewVariant,favoriteMediaStore:this.favoriteMediaStore,mediaStore:this.mediaStore,disqusShortname:this.config.disqusShortname}),this.favoriteController=new j(this,{woord:this,templates:this.config.templates,favoriteMediaStore:this.favoriteMediaStore,mediaStore:this.mediaStore,defaultExitUrl:"zoek.html",player:this.player}),this.mediaCollectionController=new k(this,{templates:this.config.templates,defaultExitUrl:"zoek.html",mediaStore:this.mediaStore}),this.searchController.init(this,a.extend({favoriteMediaStore:this.favoriteMediaStore,openFavoriteListHandler:this.goFavoriteList.bind(this)},this.config)),this.homeController.init(this,this.config),this.konamiController.init(),this.shareController=new i({woord:this,embedUrl:this.config.embedUrl,templates:this.config.templates,mediaStore:this.mediaStore,player:this.player}),this.errorOverlay.init({name:"error",parentNode:a("body").get(0),templates:this.config.templates}),this.bindEventHandlers(),this.router.init(this)},handleKeydown:function(a){a.keyCode===9&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},handleStateChange:function(){var a=this.router.getPreviousRoute(),c=this.router.getRoute(),d=c.name==="lees"?"home":c.name;this.applicationView.enableState(d),this.applicationView.changeState(d,a.name),c.name==="lees"&&!c.data&&this.goHome(),c.name==="mediacollection"&&this.mediaCollectionController.open(c.data),c.name==="home"&&this.homeController.displayStart(c.requestRoute),c.name==="favoriet"&&this.openFavoriteList(c.data),c.name==="share"&&this.openShare(c.data),c.name==="lees"&&c.data&&this.homeController.displayArticle(c.requestRoute);if(c.name==="play"){var e=b.tmpl("urn:vpro:media:{{type}}:{{id}}",{type:c.data.mediaType,id:c.data.mediaId});this.playController.playItem(e,{start:c.data.start||!1,end:c.data.end||!1,visualizer:c.data.visualizer||!1})}c.name==="search"&&c.data&&this.searchController.setQuery(c.data),this.config.autoScrollTop&&window.scrollTo(0,0),this.stats.handleRoute(c.requestRoute)},isTouchDevice:function(){return"ontouchstart"in window},openShare:function(a){this.shareController.open(a)},openFavoriteList:function(a){this.favoriteController.open(a)},openHome:function(){var a=this.homeController.getPageType();a=a==="article"?"lees":a,a="home",this.router.open(a)},openPlay:function(){this.router.open("play")},openSearch:function(){this.router.open("search")}})})